"use strict";(self.webpackChunkTo_Do_List_App_Angular=self.webpackChunkTo_Do_List_App_Angular||[]).push([[179],{58:(Ei,mn,xe)=>{xe.d(mn,{BH:()=>yt,G6:()=>Xr,L:()=>Ge,LL:()=>U,Pz:()=>at,Sg:()=>Yn,UG:()=>G,ZB:()=>ye,ZR:()=>Z,aH:()=>At,b$:()=>Nn,eu:()=>F,hl:()=>O,jU:()=>kt,m9:()=>co,ne:()=>Di,pd:()=>da,r3:()=>Bn,ru:()=>Ct,tV:()=>W,uI:()=>un,vZ:()=>Ti,w1:()=>Jr,xO:()=>la,xb:()=>fr,z$:()=>Fe,zd:()=>Ur});const Ce=function(A){const D=[];let S=0;for(let q=0;q<A.length;q++){let x=A.charCodeAt(q);x<128?D[S++]=x:x<2048?(D[S++]=x>>6|192,D[S++]=63&x|128):55296==(64512&x)&&q+1<A.length&&56320==(64512&A.charCodeAt(q+1))?(x=65536+((1023&x)<<10)+(1023&A.charCodeAt(++q)),D[S++]=x>>18|240,D[S++]=x>>12&63|128,D[S++]=x>>6&63|128,D[S++]=63&x|128):(D[S++]=x>>12|224,D[S++]=x>>6&63|128,D[S++]=63&x|128)}return D},Mt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(A,D){if(!Array.isArray(A))throw Error("encodeByteArray takes an array as a parameter");this.init_();const S=D?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let x=0;x<A.length;x+=3){const ie=A[x],be=x+1<A.length,Ve=be?A[x+1]:0,Lt=x+2<A.length,Ft=Lt?A[x+2]:0;let En=(15&Ve)<<2|Ft>>6,gt=63&Ft;Lt||(gt=64,be||(En=64)),q.push(S[ie>>2],S[(3&ie)<<4|Ve>>4],S[En],S[gt])}return q.join("")},encodeString(A,D){return this.HAS_NATIVE_SUPPORT&&!D?btoa(A):this.encodeByteArray(Ce(A),D)},decodeString(A,D){return this.HAS_NATIVE_SUPPORT&&!D?atob(A):function(A){const D=[];let S=0,q=0;for(;S<A.length;){const x=A[S++];if(x<128)D[q++]=String.fromCharCode(x);else if(x>191&&x<224){const ie=A[S++];D[q++]=String.fromCharCode((31&x)<<6|63&ie)}else if(x>239&&x<365){const Lt=((7&x)<<18|(63&A[S++])<<12|(63&A[S++])<<6|63&A[S++])-65536;D[q++]=String.fromCharCode(55296+(Lt>>10)),D[q++]=String.fromCharCode(56320+(1023&Lt))}else{const ie=A[S++],be=A[S++];D[q++]=String.fromCharCode((15&x)<<12|(63&ie)<<6|63&be)}}return D.join("")}(this.decodeStringToByteArray(A,D))},decodeStringToByteArray(A,D){this.init_();const S=D?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let x=0;x<A.length;){const ie=S[A.charAt(x++)],Ve=x<A.length?S[A.charAt(x)]:0;++x;const Ft=x<A.length?S[A.charAt(x)]:64;++x;const fe=x<A.length?S[A.charAt(x)]:64;if(++x,null==ie||null==Ve||null==Ft||null==fe)throw new qt;q.push(ie<<2|Ve>>4),64!==Ft&&(q.push(Ve<<4&240|Ft>>2),64!==fe&&q.push(Ft<<6&192|fe))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let A=0;A<this.ENCODED_VALS.length;A++)this.byteToCharMap_[A]=this.ENCODED_VALS.charAt(A),this.charToByteMap_[this.byteToCharMap_[A]]=A,this.byteToCharMapWebSafe_[A]=this.ENCODED_VALS_WEBSAFE.charAt(A),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[A]]=A,A>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(A)]=A,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(A)]=A)}}};class qt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ge=function(A){return function(A){const D=Ce(A);return Mt.encodeByteArray(D,!0)}(A).replace(/\./g,"")},W=function(A){try{return Mt.decodeString(A,!0)}catch(D){console.error("base64Decode failed: ",D)}return null};function ye(A,D){if(!(D instanceof Object))return D;switch(D.constructor){case Date:return new Date(D.getTime());case Object:void 0===A&&(A={});break;case Array:A=[];break;default:return D}for(const S in D)!D.hasOwnProperty(S)||!He(S)||(A[S]=ye(A[S],D[S]));return A}function He(A){return"__proto__"!==A}const Le=()=>{try{return function rt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const A=process.env.__FIREBASE_DEFAULTS__;return A?JSON.parse(A):void 0})()||(()=>{if(typeof document>"u")return;let A;try{A=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const D=A&&W(A[1]);return D&&JSON.parse(D)})()}catch(A){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${A}`)}},At=()=>{var A;return null===(A=Le())||void 0===A?void 0:A.config},at=A=>{var D;return null===(D=Le())||void 0===D?void 0:D[`_${A}`]};class yt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((D,S)=>{this.resolve=D,this.reject=S})}wrapCallback(D){return(S,q)=>{S?this.reject(S):this.resolve(q),"function"==typeof D&&(this.promise.catch(()=>{}),1===D.length?D(S):D(S,q))}}}function Yn(A,D){if(A.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=D||"demo-project",x=A.iat||0,ie=A.sub||A.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const be=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:x,exp:x+3600,auth_time:x,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},A);return[Ge(JSON.stringify({alg:"none",type:"JWT"})),Ge(JSON.stringify(be)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function un(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function G(){var A;const D=null===(A=Le())||void 0===A?void 0:A.forceEnvironment;if("node"===D)return!0;if("browser"===D)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function kt(){return"object"==typeof self&&self.self===self}function Ct(){const A="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof A&&void 0!==A.id}function Nn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Jr(){const A=Fe();return A.indexOf("MSIE ")>=0||A.indexOf("Trident/")>=0}function Xr(){return!G()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O(){try{return"object"==typeof indexedDB}catch{return!1}}function F(){return new Promise((A,D)=>{try{let S=!0;const q="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(q);x.onsuccess=()=>{x.result.close(),S||self.indexedDB.deleteDatabase(q),A(!0)},x.onupgradeneeded=()=>{S=!1},x.onerror=()=>{var ie;D((null===(ie=x.error)||void 0===ie?void 0:ie.message)||"")}}catch(S){D(S)}})}class Z extends Error{constructor(D,S,q){super(S),this.code=D,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,Z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,U.prototype.create)}}class U{constructor(D,S,q){this.service=D,this.serviceName=S,this.errors=q}create(D,...S){const q=S[0]||{},x=`${this.service}/${D}`,ie=this.errors[D],be=ie?function _e(A,D){return A.replace(Qe,(S,q)=>{const x=D[q];return null!=x?String(x):`<${q}?>`})}(ie,q):"Error";return new Z(x,`${this.serviceName}: ${be} (${x}).`,q)}}const Qe=/\{\$([^}]+)}/g;function Bn(A,D){return Object.prototype.hasOwnProperty.call(A,D)}function fr(A){for(const D in A)if(Object.prototype.hasOwnProperty.call(A,D))return!1;return!0}function Ti(A,D){if(A===D)return!0;const S=Object.keys(A),q=Object.keys(D);for(const x of S){if(!q.includes(x))return!1;const ie=A[x],be=D[x];if(Un(ie)&&Un(be)){if(!Ti(ie,be))return!1}else if(ie!==be)return!1}for(const x of q)if(!S.includes(x))return!1;return!0}function Un(A){return null!==A&&"object"==typeof A}function la(A){const D=[];for(const[S,q]of Object.entries(A))Array.isArray(q)?q.forEach(x=>{D.push(encodeURIComponent(S)+"="+encodeURIComponent(x))}):D.push(encodeURIComponent(S)+"="+encodeURIComponent(q));return D.length?"&"+D.join("&"):""}function Ur(A){const D={};return A.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[x,ie]=q.split("=");D[decodeURIComponent(x)]=decodeURIComponent(ie)}}),D}function da(A){const D=A.indexOf("?");if(!D)return"";const S=A.indexOf("#",D);return A.substring(D,S>0?S:void 0)}function Di(A,D){const S=new Ui(A,D);return S.subscribe.bind(S)}class Ui{constructor(D,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then(()=>{D(this)}).catch(q=>{this.error(q)})}next(D){this.forEachObserver(S=>{S.next(D)})}error(D){this.forEachObserver(S=>{S.error(D)}),this.close(D)}complete(){this.forEachObserver(D=>{D.complete()}),this.close()}subscribe(D,S,q){let x;if(void 0===D&&void 0===S&&void 0===q)throw new Error("Missing Observer.");x=function As(A,D){if("object"!=typeof A||null===A)return!1;for(const S of D)if(S in A&&"function"==typeof A[S])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:S,complete:q},void 0===x.next&&(x.next=jr),void 0===x.error&&(x.error=jr),void 0===x.complete&&(x.complete=jr);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),ie}unsubscribeOne(D){void 0===this.observers||void 0===this.observers[D]||(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,D)}sendOne(D,S){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{S(this.observers[D])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jr(){}function co(A){return A&&A._delegate?A._delegate:A}},62:(Ei,mn,xe)=>{function I(t){return"function"==typeof t}function De(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const B=De(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ce(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ct{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof B?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{_n(s)}catch(o){e=e??[],o instanceof B?e=[...e,...o.errors]:e.push(o)}}if(e)throw new B(e)}}add(e){var n;if(e&&e!==this)if(this.closed)_n(e);else{if(e instanceof ct){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ce(n,e)}remove(e){const{_finalizers:n}=this;n&&Ce(n,e),e instanceof ct&&e._removeParent(this)}}ct.EMPTY=(()=>{const t=new ct;return t.closed=!0,t})();const Mt=ct.EMPTY;function qt(t){return t instanceof ct||t&&"closed"in t&&I(t.remove)&&I(t.add)&&I(t.unsubscribe)}function _n(t){I(t)?t():t.unsubscribe()}const Ge={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},W={setTimeout(t,e,...n){const{delegate:r}=W;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=W;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function te(t){W.setTimeout(()=>{const{onUnhandledError:e}=Ge;if(!e)throw t;e(t)})}function ye(){}const He=ot("C",void 0,void 0);function ot(t,e,n){return{kind:t,value:e,error:n}}let Re=null;function Le(t){if(Ge.useDeprecatedSynchronousErrorHandling){const e=!Re;if(e&&(Re={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Re;if(Re=null,n)throw r}}else t()}class In extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qt(e)&&e.add(this)):this.destination=kt}static create(e,n,r){return new Yn(e,n,r)}next(e){this.isStopped?G(function yn(t){return ot("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?G(function rt(t){return ot("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?G(He,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const At=Function.prototype.bind;function at(t,e){return At.call(t,e)}class yt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Fe(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Fe(r)}else Fe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Fe(n)}}}class Yn extends In{constructor(e,n,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ge.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&at(e.next,s),error:e.error&&at(e.error,s),complete:e.complete&&at(e.complete,s)}):i=e}this.destination=new yt(i)}}function Fe(t){Ge.useDeprecatedSynchronousErrorHandling?function vn(t){Ge.useDeprecatedSynchronousErrorHandling&&Re&&(Re.errorThrown=!0,Re.error=t)}(t):te(t)}function G(t,e){const{onStoppedNotification:n}=Ge;n&&W.setTimeout(()=>n(t,e))}const kt={closed:!0,next:ye,error:function un(t){throw t},complete:ye},Ct="function"==typeof Symbol&&Symbol.observable||"@@observable";function Nn(t){return t}let lt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function O(t){return t&&t instanceof In||function Xr(t){return t&&I(t.next)&&I(t.error)&&I(t.complete)}(t)&&qt(t)}(n)?n:new Yn(n,r,i);return Le(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Ds(r))((i,s)=>{const o=new Yn({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Ct](){return this}pipe(...n){return function Jr(t){return 0===t.length?Nn:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Ds(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Ds(t){var e;return null!==(e=t??Ge.Promise)&&void 0!==e?e:Promise}const F=De(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let j=(()=>{class t extends lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new H(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new F}next(n){Le(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Le(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Le(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Mt:(this.currentObservers=null,s.push(n),new ct(()=>{this.currentObservers=null,Ce(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new lt;return n.source=this,n}}return t.create=(e,n)=>new H(e,n),t})();class H extends j{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Mt}}function U(t){return e=>{if(function Z(t){return I(t?.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(t,e,n,r,i){return new Qe(t,e,n,r,i)}class Qe extends In{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $e(t,e){return U((n,r)=>{let i=0;n.subscribe(_e(r,s=>{r.next(t.call(e,s,i++))}))})}var ve=xe(582);const tt=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ot(t){return I(t?.then)}function Et(t){return I(t[Ct])}function xn(t){return Symbol.asyncIterator&&I(t?.[Symbol.asyncIterator])}function cn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Jn=function Bn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function fr(t){return I(t?.[Jn])}function ca(t){return(0,ve.FC)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,ve.qq)(n.read());if(i)return yield(0,ve.qq)(void 0);yield yield(0,ve.qq)(r)}}finally{n.releaseLock()}})}function Ti(t){return I(t?.getReader)}function Un(t){if(t instanceof lt)return t;if(null!=t){if(Et(t))return function so(t){return new lt(e=>{const n=t[Ct]();if(I(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(tt(t))return function la(t){return new lt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Ot(t))return function Ur(t){return new lt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,te)})}(t);if(xn(t))return Xn(t);if(fr(t))return function da(t){return new lt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Ti(t))return function Di(t){return Xn(ca(t))}(t)}throw cn(t)}function Xn(t){return new lt(e=>{(function Ui(t,e){var n,r,i,s;return(0,ve.mG)(this,void 0,void 0,function*(){try{for(n=(0,ve.KL)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function jn(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function jr(t,e,n=1/0){return I(e)?jr((r,i)=>$e((s,o)=>e(r,s,i,o))(Un(t(r,i))),n):("number"==typeof e&&(n=e),U((r,i)=>function As(t,e,n,r,i,s,o,a){const c=[];let d=0,p=0,g=!1;const _=()=>{g&&!c.length&&!d&&e.complete()},v=w=>d<r?E(w):c.push(w),E=w=>{s&&e.next(w),d++;let C=!1;Un(n(w,p++)).subscribe(_e(e,k=>{i?.(k),s?v(k):e.next(k)},()=>{C=!0},void 0,()=>{if(C)try{for(d--;c.length&&d<r;){const k=c.shift();o?jn(e,o,()=>E(k)):E(k)}_()}catch(k){e.error(k)}}))};return t.subscribe(_e(e,v,()=>{g=!0,_()})),()=>{a?.()}}(r,i,t,n)))}function Cs(t=1/0){return jr(Nn,t)}const Hr=new lt(t=>t.complete());function ji(t){return t[t.length-1]}function bs(t){return function Pr(t){return t&&I(t.schedule)}(ji(t))?t.pop():void 0}function Hn(t,e=0){return U((n,r)=>{n.subscribe(_e(r,i=>jn(r,t,()=>r.next(i),e),()=>jn(r,t,()=>r.complete(),e),i=>jn(r,t,()=>r.error(i),e)))})}function er(t,e=0){return U((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function co(t,e){if(!t)throw new Error("Iterable cannot be null");return new lt(n=>{jn(n,e,()=>{const r=t[Symbol.asyncIterator]();jn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function S(t,e){return e?function D(t,e){if(null!=t){if(Et(t))return function Hi(t,e){return Un(t).pipe(er(e),Hn(e))}(t,e);if(tt(t))return function Nu(t,e){return new lt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Ot(t))return function uo(t,e){return Un(t).pipe(er(e),Hn(e))}(t,e);if(xn(t))return co(t,e);if(fr(t))return function ha(t,e){return new lt(n=>{let r;return jn(n,e,()=>{r=t[Jn](),jn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(t,e);if(Ti(t))return function A(t,e){return co(ca(t),e)}(t,e)}throw cn(t)}(t,e):Un(t)}function q(...t){const e=bs(t),n=function ao(t,e){return"number"==typeof ji(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Un(r[0]):Cs(n)(S(r,e)):Hr}class x extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function ie(...t){return S(t,bs(t))}function be(t={}){const{connector:e=(()=>new j),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,d=0,p=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),o=c=void 0,p=g=!1},E=()=>{const w=o;v(),w?.unsubscribe()};return U((w,C)=>{d++,!g&&!p&&_();const k=c=c??e();C.add(()=>{d--,0===d&&!g&&!p&&(a=Ve(E,i))}),k.subscribe(C),!o&&d>0&&(o=new Yn({next:R=>k.next(R),error:R=>{g=!0,_(),a=Ve(v,n,R),k.error(R)},complete:()=>{p=!0,_(),a=Ve(v,r),k.complete()}}),Un(w).subscribe(o))})(s)}}function Ve(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Yn({next:()=>{r.unsubscribe(),t()}});return Un(e(...n)).subscribe(r)}function Lt(t,e){return U((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(_e(r,c=>{i?.unsubscribe();let d=0;const p=s++;Un(t(c,p)).subscribe(i=_e(r,g=>r.next(e?e(c,g,p,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ft(t,e=Nn){return t=t??ln,U((n,r)=>{let i,s=!0;n.subscribe(_e(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function ln(t,e){return t===e}function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("Could not find renamed property on target object.")}function gt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(gt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function ei(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const xu=fe({__forward_ref__:fe});function V(t){return t.__forward_ref__=V,t.toString=function(){return gt(this())},t}function b(t){return function Y(t){return"function"==typeof t&&t.hasOwnProperty(xu)&&t.__forward_ref__===V}(t)?t():t}function pe(t){return t&&!!t.\u0275providers}class ee extends Error{constructor(e,n){super(function zt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function ge(t){return"string"==typeof t?t:null==t?"":String(t)}function fa(t,e){throw new ee(-201,!1)}function tr(t,e){null==t&&function we(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Ye(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ti(t){return{providers:t.providers||[],imports:t.imports||[]}}function pa(t){return Kl(t,ga)||Kl(t,op)}function Kl(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ai(t){return t&&(t.hasOwnProperty(ma)||t.hasOwnProperty(Ql))?t[ma]:null}const ga=fe({\u0275prov:fe}),ma=fe({\u0275inj:fe}),op=fe({ngInjectableDef:fe}),Ql=fe({ngInjectorDef:fe});var Je=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Je||{});let _a;function Mn(t){const e=_a;return _a=t,e}function up(t,e,n){const r=pa(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Je.Optional?null:void 0!==e?e:void fa(gt(t))}const dt=globalThis;class le{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ye({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const gr={},Ea="__NG_DI_FLAG__",ku="ngTempTokenPath",Iy=/\n/gm,pp="__source";let qi;function ri(t){const e=qi;return qi=t,e}function wy(t,e=Je.Default){if(void 0===qi)throw new ee(-203,!1);return null===qi?up(t,void 0,e):qi.get(t,e&Je.Optional?null:void 0,e)}function ue(t,e=Je.Default){return(function ap(){return _a}()||wy)(b(t),e)}function ze(t,e=Je.Default){return ue(t,Lu(e))}function Lu(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Xl(t){const e=[];for(let n=0;n<t.length;n++){const r=b(t[n]);if(Array.isArray(r)){if(0===r.length)throw new ee(900,!1);let i,s=Je.Default;for(let o=0;o<r.length;o++){const a=r[o],c=y0(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(ue(i,s))}else e.push(ue(r))}return e}function Ci(t,e){return t[Ea]=e,t.prototype[Ea]=e,t}function y0(t){return t[Ea]}function nr(t){return{toString:t}.toString()}var Si=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Si||{}),Nr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Nr||{});const $r={},nt=[],Fu=fe({\u0275cmp:fe}),zi=fe({\u0275dir:fe}),td=fe({\u0275pipe:fe}),wa=fe({\u0275mod:fe}),ii=fe({\u0275fac:fe}),ho=fe({__NG_ELEMENT_ID__:fe}),Vu=fe({__NG_ENV_ID__:fe});function mr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Bu(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];Uu(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function gp(t){return 3===t||4===t||6===t}function Uu(t){return 64===t.charCodeAt(0)}function Gi(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||nd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function nd(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const rd="ng-template";function Ty(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==mr(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function ju(t){return 4===t.type&&t.value!==rd}function id(t,e,n){return e===(4!==t.type||n?t.value:rd)}function sd(t,e,n){let r=4;const i=t.attrs||[],s=function mp(t){for(let e=0;e<t.length;e++)if(gp(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!id(t,c,n)||""===c&&1===e.length){if(rr(r))return!1;o=!0}}else{const d=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!Ty(t.attrs,d,n)){if(rr(r))return!1;o=!0}continue}const g=od(8&r?"class":c,i,ju(t),n);if(-1===g){if(rr(r))return!1;o=!0;continue}if(""!==d){let _;_=g>s?"":i[g+1].toLowerCase();const v=8&r?_:null;if(v&&-1!==mr(v,d,0)||2&r&&d!==_){if(rr(r))return!1;o=!0}}}}else{if(!o&&!rr(r)&&!rr(c))return!1;if(o&&rr(c))continue;o=!1,r=c|1&r}}return rr(r)||o}function rr(t){return 0==(1&t)}function od(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function cd(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ad(t,e,n=!1){for(let r=0;r<e.length;r++)if(sd(t,e[r],n))return!0;return!1}function $u(t,e){return t?":not("+e.trim()+")":e}function _p(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!rr(o)&&(e+=$u(s,i),i=""),r=o,s=s||!rr(r);n++}return""!==i&&(e+=$u(s,i)),e}function Ss(t){return nr(()=>{const e=zu(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Si.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Nr.Emulated,styles:t.styles||nt,_:null,schemas:t.schemas||null,tView:null,id:""};vp(n);const r=t.dependencies;return n.directiveDefs=fo(r,!1),n.pipeDefs=fo(r,!0),n.id=function hd(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function dd(t){return Ze(t)||nn(t)}function Ay(t){return null!==t}function si(t){return nr(()=>({type:t.type,bootstrap:t.bootstrap||nt,declarations:t.declarations||nt,imports:t.imports||nt,exports:t.exports||nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function qu(t,e){if(null==t)return $r;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function ir(t){return nr(()=>{const e=zu(t);return vp(e),e})}function Ze(t){return t[Fu]||null}function nn(t){return t[zi]||null}function $n(t){return t[td]||null}function zu(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||$r,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||nt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qu(t.inputs,e),outputs:qu(t.outputs)}}function vp(t){t.features?.forEach(e=>e(t))}function fo(t,e){if(!t)return null;const n=e?$n:dd;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(Ay)}const Gt=0,ae=1,Me=2,vt=3,qr=4,Da=5,dn=6,po=7,Kt=8,oi=9,go=10,Se=11,Aa=12,Gu=13,mo=14,Vt=15,Ca=16,Wi=17,ai=18,Ps=19,Ep=20,ui=21,Ri=22,ba=23,_o=24,je=25,Zi=1,fd=2,ci=7,yo=9,Tn=11;function yr(t){return Array.isArray(t)&&"object"==typeof t[Zi]}function sr(t){return Array.isArray(t)&&!0===t[Zi]}function Ra(t){return 0!=(4&t.flags)}function Ns(t){return t.componentOffset>-1}function Zu(t){return 1==(1&t.flags)}function li(t){return!!t.template}function wp(t){return 0!=(512&t[Me])}function di(t,e){return t.hasOwnProperty(ii)?t[ii]:null}let Dn=null,Ki=!1;function xr(t){const e=Dn;return Dn=t,e}const Qt={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ku(t){if(!Yi(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Pp(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Rp(t){t.dirty=!0,function Sp(t){if(void 0===t.liveConsumerNode)return;const e=Ki;Ki=!0;try{for(const n of t.liveConsumerNode)n.dirty||Rp(n)}finally{Ki=e}}(t),t.consumerMarkedDirty?.(t)}function _d(t){return t&&(t.nextProducerIndex=0),xr(t)}function Qu(t,e){if(xr(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Yi(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Qi(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Pp(t){Io(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Ku(n),r!==n.version))return!0}return!1}function Na(t){if(Io(t),Yi(t))for(let e=0;e<t.producerNode.length;e++)Qi(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Qi(t,e){if(function Yu(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Io(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)Qi(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Io(i),i.producerIndexOfThis[r]=e}}function Yi(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Io(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Mp=null;const Lp=()=>{},xy=(()=>({...Qt,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Lp}))();class My{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Fp(t){return t.type.prototype.ngOnChanges&&(t.setInput=Oy),ky}function ky(){const t=Vp(this),e=t?.current;if(e){const n=t.previous;if(n===$r)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Oy(t,e,n,r){const i=this.declaredInputs[n],s=Vp(t)||function Ed(t,e){return t[Xu]=e}(t,{previous:$r,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new My(c&&c.currentValue,e,a===$r),t[r]=e}const Xu="__ngSimpleChanges__";function Vp(t){return t[Xu]||null}const hi=function(t,e,n){};function pt(t){for(;Array.isArray(t);)t=t[Gt];return t}function hn(t,e){return pt(e[t.index])}function tc(t,e){return t.data[e]}function vr(t,e){const n=e[t];return yr(n)?n:n[Gt]}function Ji(t,e){return null==e?null:t[e]}function Up(t){t[Wi]=0}function Cd(t){1024&t[Me]||(t[Me]|=1024,nc(t,1))}function jp(t){1024&t[Me]&&(t[Me]&=-1025,nc(t,-1))}function nc(t,e){let n=t[vt];if(null===n)return;n[Da]+=e;let r=n;for(n=n[vt];null!==n&&(1===e&&1===r[Da]||-1===e&&0===r[Da]);)n[Da]+=e,r=n,n=n[vt]}const Te={lFrame:Qp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ic(){return Te.bindingsEnabled}function K(){return Te.lFrame.lView}function Ke(){return Te.lFrame.tView}function rn(){let t=Zp();for(;null!==t&&64===t.type;)t=t.parent;return t}function Zp(){return Te.lFrame.currentTNode}function Mr(t,e){const n=Te.lFrame;n.currentTNode=t,n.isParent=e}function Pd(){return Te.lFrame.isParent}function Os(){return Te.lFrame.bindingIndex++}function kd(t,e){const n=Te.lFrame;n.bindingIndex=n.bindingRootIndex=t,Od(e)}function Od(t){Te.lFrame.currentDirectiveIndex=t}function Fd(t){Te.lFrame.currentQueryIndex=t}function $y(t){const e=t[ae];return 2===e.type?e.declTNode:1===e.type?t[dn]:null}function Vd(t,e,n){if(n&Je.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&Je.Host||(i=$y(s),null===i||(s=s[mo],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Te.lFrame=Fa();return r.currentTNode=e,r.lView=t,!0}function Bd(t){const e=Fa(),n=t[ae];Te.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Fa(){const t=Te.lFrame,e=null===t?null:t.child;return null===e?Qp(t):e}function Qp(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Yp(){const t=Te.lFrame;return Te.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Jp=Yp;function Ud(){const t=Yp();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function qn(){return Te.lFrame.selectedIndex}function Ls(t){Te.lFrame.selectedIndex=t}function wt(){const t=Te.lFrame;return tc(t.tView,t.selectedIndex)}let jd=!0;function ac(){return jd}function es(t){jd=t}function uc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:p}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=p&&(t.destroyHooks??=[]).push(n,p)}}function cc(t,e,n){eg(t,e,3,n)}function Do(t,e,n,r){(3&t[Me])===n&&eg(t,e,n,r)}function Va(t,e){let n=t[Me];(3&n)===e&&(n&=8191,n+=1,t[Me]=n)}function eg(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&t[Wi]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[Wi]+=65536),(a<s||-1==s)&&(Yy(t,n,e,c),t[Wi]=(4294901760&t[Wi])+c+2),c++}function lc(t,e){hi(4,t,e);const n=xr(null);try{e.call(t)}finally{xr(n),hi(5,t,e)}}function Yy(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Me]>>13<t[Wi]>>16&&(3&t[Me])===e&&(t[Me]+=8192,lc(a,s)):lc(a,s)}const Fs=-1;class Ba{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function $d(t){return t!==Fs}function Ua(t){return 32767&t}function ja(t,e){let n=function ev(t){return t>>16}(t),r=e;for(;n>0;)r=r[mo],n--;return r}let qd=!0;function Ha(t){const e=qd;return qd=t,e}const tv=255,ts=5;let nv=0;const pi={};function hc(t,e){const n=ig(t,e);if(-1!==n)return n;const r=e[ae];r.firstCreatePass&&(t.injectorIndex=e.length,$a(r.data,t),$a(e,null),$a(r.blueprint,null));const i=fc(t,e),s=t.injectorIndex;if($d(i)){const o=Ua(i),a=ja(i,e),c=a[ae].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function $a(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ig(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function fc(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=lg(i),null===r)return Fs;if(n++,i=i[mo],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Fs}function qa(t,e,n){!function zd(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ho)&&(r=n[ho]),null==r&&(r=n[ho]=nv++);const i=r&tv;e.data[t+(i>>ts)]|=1<<i}(t,e,n)}function sg(t,e,n){if(n&Je.Optional||void 0!==t)return t;fa()}function pc(t,e,n,r){if(n&Je.Optional&&void 0===r&&(r=null),!(n&(Je.Self|Je.Host))){const i=t[oi],s=Mn(void 0);try{return i?i.get(e,r,n&Je.Optional):up(e,r,n&Je.Optional)}finally{Mn(s)}}return sg(r,0,n)}function og(t,e,n,r=Je.Default,i){if(null!==t){if(2048&e[Me]&&!(r&Je.Self)){const o=function av(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Me]&&!(512&o[Me]);){const a=ag(s,o,n,r|Je.Self,pi);if(a!==pi)return a;let c=s.parent;if(!c){const d=o[Ep];if(d){const p=d.get(n,pi,r);if(p!==pi)return p}c=lg(o),o=o[mo]}s=c}return i}(t,e,n,r,pi);if(o!==pi)return o}const s=ag(t,e,n,r,pi);if(s!==pi)return s}return pc(e,n,r,i)}function ag(t,e,n,r,i){const s=function ug(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ho)?t[ho]:void 0;return"number"==typeof e?e>=0?e&tv:sv:e}(n);if("function"==typeof s){if(!Vd(e,t,r))return r&Je.Host?sg(i,0,r):pc(e,n,r,i);try{let o;if(o=s(r),null!=o||r&Je.Optional)return o;fa()}finally{Jp()}}else if("number"==typeof s){let o=null,a=ig(t,e),c=Fs,d=r&Je.Host?e[Vt][dn]:null;for((-1===a||r&Je.SkipSelf)&&(c=-1===a?fc(t,e):e[a+8],c!==Fs&&cg(r,!1)?(o=e[ae],a=Ua(c),e=ja(c,e)):a=-1);-1!==a;){const p=e[ae];if(mc(s,a,p.data)){const g=iv(a,e,n,o,r,d);if(g!==pi)return g}c=e[a+8],c!==Fs&&cg(r,e[ae].data[a+8]===d)&&mc(s,a,e)?(o=p,a=Ua(c),e=ja(c,e)):a=-1}}return i}function iv(t,e,n,r,i,s){const o=e[ae],a=o.data[t+8],p=function gc(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,c=t.directiveStart,p=s>>20,_=i?a+p:t.directiveEnd;for(let v=r?a:a+p;v<_;v++){const E=o[v];if(v<c&&n===E||v>=c&&E.type===n)return v}if(i){const v=o[c];if(v&&li(v)&&v.type===n)return c}return null}(a,o,n,null==r?Ns(a)&&qd:r!=o&&0!=(3&a.type),i&Je.Host&&s===a);return null!==p?Vs(e,o,p,a):pi}function Vs(t,e,n,r){let i=t[n];const s=e.data;if(function Hd(t){return t instanceof Ba}(i)){const o=i;o.resolving&&function lo(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ee(-200,`Circular dependency in DI detected for ${t}${n}`)}(function qe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ge(t)}(s[n]));const a=Ha(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Mn(o.injectImpl):null;Vd(t,r,Je.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function Qy(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Fp(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==d&&Mn(d),Ha(a),o.resolving=!1,Jp()}}return i}function mc(t,e,n){return!!(n[e+(t>>ts)]&1<<t)}function cg(t,e){return!(t&Je.Self||t&Je.Host&&e)}class Cn{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return og(this._tNode,this._lView,e,Lu(r),n)}}function sv(){return new Cn(rn(),K())}function lg(t){const e=t[ae],n=e.type;return 2===n?e.declTNode:1===n?t[dn]:null}const Co="__parameters__";function gi(t,e,n){return nr(()=>{const r=function Zd(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,d,p){const g=c.hasOwnProperty(Co)?c[Co]:Object.defineProperty(c,Co,{value:[]})[Co];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function So(t,e){t.forEach(n=>Array.isArray(n)?So(n,e):e(n))}function _c(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ro(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Ic=Ci(gi("Optional"),8),Xd=Ci(gi("SkipSelf"),4);function Tg(t){return 128==(128&t.flags)}var xo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(xo||{});const vv=new Map;let H1=0;const Ev="__ngContext__";function or(t,e){yr(e)?(t[Ev]=e[Ps],function q1(t){vv.set(t[Ps],t)}(e)):t[Ev]=e}let wv;function Tv(t,e){return wv(t,e)}function rh(t){const e=t[vt];return sr(e)?e[vt]:e}function sA(t){return aA(t[Aa])}function oA(t){return aA(t[qr])}function aA(t){for(;null!==t&&!sr(t);)t=t[qr];return t}function Dc(t,e,n,r,i){if(null!=r){let s,o=!1;sr(r)?s=r:yr(r)&&(o=!0,r=r[Gt]);const a=pt(r);0===t&&null!==n?null==i?dA(e,n,a):Qa(e,n,a,i||null,!0):1===t&&null!==n?Qa(e,n,a,i||null,!0):2===t?function Pg(t,e,n){const r=Sg(t,e);r&&function cL(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function hL(t,e,n,r,i){const s=n[ci];s!==pt(n)&&Dc(e,t,r,s,i);for(let a=Tn;a<n.length;a++){const c=n[a];sh(c[ae],c,t,e,r,s)}}(e,t,s,n,i)}}function Cg(t,e,n){return t.createElement(e,n)}function cA(t,e){const n=t[yo],r=n.indexOf(e);jp(e),n.splice(r,1)}function bg(t,e){if(t.length<=Tn)return;const n=Tn+e,r=t[n];if(r){const i=r[Ca];null!==i&&i!==t&&cA(i,r),e>0&&(t[n-1][qr]=r[qr]);const s=Ro(t,Tn+e);!function tL(t,e){sh(t,e,e[Se],2,null,null),e[Gt]=null,e[dn]=null}(r[ae],r);const o=s[ai];null!==o&&o.detachView(s[ae]),r[vt]=null,r[qr]=null,r[Me]&=-129}return r}function Av(t,e){if(!(256&e[Me])){const n=e[Se];e[ba]&&Na(e[ba]),e[_o]&&Na(e[_o]),n.destroyNode&&sh(t,e,n,3,null,null),function iL(t){let e=t[Aa];if(!e)return Cv(t[ae],t);for(;e;){let n=null;if(yr(e))n=e[Aa];else{const r=e[Tn];r&&(n=r)}if(!n){for(;e&&!e[qr]&&e!==t;)yr(e)&&Cv(e[ae],e),e=e[vt];null===e&&(e=t),yr(e)&&Cv(e[ae],e),n=e&&e[qr]}e=n}}(e)}}function Cv(t,e){if(!(256&e[Me])){e[Me]&=-129,e[Me]|=256,function uL(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Ba)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];hi(4,a,c);try{c.call(a)}finally{hi(5,a,c)}}else{hi(4,i,s);try{s.call(i)}finally{hi(5,i,s)}}}}}(t,e),function aL(t,e){const n=t.cleanup,r=e[po];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[po]=null);const i=e[ui];if(null!==i){e[ui]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[ae].type&&e[Se].destroy();const n=e[Ca];if(null!==n&&sr(e[vt])){n!==e[vt]&&cA(n,e);const r=e[ai];null!==r&&r.detachView(t)}!function z1(t){vv.delete(t[Ps])}(e)}}function bv(t,e,n){return function lA(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Gt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Nr.None||s===Nr.Emulated)return null}return hn(r,n)}}(t,e.parent,n)}function Qa(t,e,n,r,i){t.insertBefore(e,n,r,i)}function dA(t,e,n){t.appendChild(e,n)}function hA(t,e,n,r,i){null!==r?Qa(t,e,n,r,i):dA(t,e,n)}function Sg(t,e){return t.parentNode(e)}let Sv,xv,gA=function pA(t,e,n){return 40&t.type?hn(t,n):null};function Rg(t,e,n,r){const i=bv(t,r,e),s=e[Se],a=function fA(t,e,n){return gA(t,e,n)}(r.parent||e[dn],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)hA(s,i,n[c],a,!1);else hA(s,i,n,a,!1);void 0!==Sv&&Sv(s,r,e,n,i)}function ih(t,e){if(null!==e){const n=e.type;if(3&n)return hn(e,t);if(4&n)return Rv(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return ih(t,r);{const i=t[e.index];return sr(i)?Rv(-1,i):pt(i)}}if(32&n)return Tv(e,t)()||pt(t[e.index]);{const r=_A(t,e);return null!==r?Array.isArray(r)?r[0]:ih(rh(t[Vt]),r):ih(t,e.next)}}return null}function _A(t,e){return null!==e?t[Vt][dn].projection[e.projection]:null}function Rv(t,e){const n=Tn+t+1;if(n<e.length){const r=e[n],i=r[ae].firstChild;if(null!==i)return ih(r,i)}return e[ci]}function Pv(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===e&&(a&&or(pt(a),r),n.flags|=2),32!=(32&n.flags))if(8&c)Pv(t,e,n.child,r,i,s,!1),Dc(e,t,i,a,s);else if(32&c){const d=Tv(n,r);let p;for(;p=d();)Dc(e,t,i,p,s);Dc(e,t,i,a,s)}else 16&c?vA(t,e,r,n,i,s):Dc(e,t,i,a,s);n=o?n.projectionNext:n.next}}function sh(t,e,n,r,i,s){Pv(n,r,t.firstChild,e,i,s,!1)}function vA(t,e,n,r,i,s){const o=n[Vt],c=o[dn].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)Dc(e,t,i,c[d],s);else{let d=c;const p=o[vt];Tg(r)&&(d.flags|=128),Pv(t,e,d,p,i,s,!0)}}function IA(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function EA(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Bu(t,e,r),null!==i&&IA(t,e,i),null!==s&&function pL(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}const kg=new le("ENVIRONMENT_INITIALIZER"),kA=new le("INJECTOR",-1),OA=new le("INJECTOR_DEF_TYPES");class Vv{get(e,n=gr){if(n===gr){const r=new Error(`NullInjectorError: No provider for ${gt(e)}!`);throw r.name="NullInjectorError",r}return n}}function HL(...t){return{\u0275providers:LA(0,t),\u0275fromNgModule:!0}}function LA(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return So(e,o=>{const a=o;Og(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&FA(i,s),n}function FA(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Uv(i,s=>{e(s,r)})}}function Og(t,e,n,r){if(!(t=b(t)))return!1;let i=null,s=Ai(t);const o=!s&&Ze(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const c=t.ngModule;if(s=Ai(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of c)Og(d,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{So(s.imports,p=>{Og(p,e,n,r)&&(d||=[],d.push(p))})}finally{}void 0!==d&&FA(d,e)}if(!a){const d=di(i)||(()=>new i);e({provide:i,useFactory:d,deps:nt},i),e({provide:OA,useValue:i,multi:!0},i),e({provide:kg,useValue:()=>ue(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const d=t;Uv(c,p=>{e(p,d)})}}}return i!==t&&void 0!==t.providers}function Uv(t,e){for(let n of t)pe(n)&&(n=n.\u0275providers),Array.isArray(n)?Uv(n,e):e(n)}const $L=fe({provide:String,useValue:fe});function jv(t){return null!==t&&"object"==typeof t&&$L in t}function Ya(t){return"function"==typeof t}const Hv=new le("Set Injector scope."),Lg={},zL={};let $v;function Fg(){return void 0===$v&&($v=new Vv),$v}class is{}class Sc extends is{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zv(e,o=>this.processProvider(o)),this.records.set(kA,Rc(void 0,this)),i.has("environment")&&this.records.set(is,Rc(void 0,this));const s=this.records.get(Hv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(OA.multi,nt,Je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=ri(this),r=Mn(void 0);try{return e()}finally{ri(n),Mn(r)}}get(e,n=gr,r=Je.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Vu))return e[Vu](this);r=Lu(r);const s=ri(this),o=Mn(void 0);try{if(!(r&Je.SkipSelf)){let c=this.records.get(e);if(void 0===c){const d=function QL(t){return"function"==typeof t||"object"==typeof t&&t instanceof le}(e)&&pa(e);c=d&&this.injectableDefInScope(d)?Rc(qv(e),Lg):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Je.Self?Fg():this.parent).get(e,n=r&Je.Optional&&n===gr?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[ku]=a[ku]||[]).unshift(gt(e)),s)throw a;return function ed(t,e,n,r){const i=t[ku];throw e[pp]&&i.unshift(e[pp]),t.message=function bi(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=gt(e);if(Array.isArray(e))i=e.map(gt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):gt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Iy,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[ku]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Mn(o),ri(s)}}resolveInjectorInitializers(){const e=ri(this),n=Mn(void 0);try{const i=this.get(kg.multi,nt,Je.Self);for(const s of i)s()}finally{ri(e),Mn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){let n=Ya(e=b(e))?e:b(e&&e.provide);const r=function WL(t){return jv(t)?Rc(void 0,t.useValue):Rc(function UA(t,e,n){let r;if(Ya(t)){const i=b(t);return di(i)||qv(i)}if(jv(t))r=()=>b(t.useValue);else if(function BA(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Xl(t.deps||[]));else if(function VA(t){return!(!t||!t.useExisting)}(t))r=()=>ue(b(t.useExisting));else{const i=b(t&&(t.useClass||t.provide));if(!function ZL(t){return!!t.deps}(t))return di(i)||qv(i);r=()=>new i(...Xl(t.deps))}return r}(t),Lg)}(e);if(Ya(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Rc(void 0,Lg,!0),i.factory=()=>Xl(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Lg&&(n.value=zL,n.value=n.factory()),"object"==typeof n.value&&n.value&&function KL(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=b(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function qv(t){const e=pa(t),n=null!==e?e.factory:di(t);if(null!==n)return n;if(t instanceof le)throw new ee(204,!1);if(t instanceof Function)return function GL(t){const e=t.length;if(e>0)throw function Wa(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new ee(204,!1);const n=function yy(t){return t&&(t[ga]||t[op])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new ee(204,!1)}function Rc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function zv(t,e){for(const n of t)Array.isArray(n)?zv(n,e):n&&pe(n)?zv(n.\u0275providers,e):e(n)}const Vg=new le("AppId",{providedIn:"root",factory:()=>YL}),YL="ng",jA=new le("Platform Initializer"),ss=new le("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),HA=new le("CSP nonce",{providedIn:"root",factory:()=>function Cc(){if(void 0!==xv)return xv;if(typeof document<"u")return document;throw new ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let $A=(t,e,n)=>null;function Xv(t,e,n=!1){return $A(t,e,n)}class aF{}class GA{}class cF{resolveComponentFactory(e){throw function uF(t){const e=Error(`No component factory found for ${gt(t)}.`);return e.ngComponent=t,e}(e)}}let qg=(()=>{class t{static#e=this.NULL=new cF}return t})();function lF(){return xc(rn(),K())}function xc(t,e){return new Mc(hn(t,e))}let Mc=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=lF}return t})();class ZA{}let KA=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function hF(){const t=K(),n=vr(rn().index,t);return(yr(n)?n:t)[Se]}()}return t})(),fF=(()=>{class t{static#e=this.\u0275prov=Ye({token:t,providedIn:"root",factory:()=>null})}return t})();class zg{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const QA=new zg("16.2.12"),nI={};function eC(t,e=null,n=null,r){const i=tC(t,e,n,r);return i.resolveInjectorInitializers(),i}function tC(t,e=null,n=null,r,i=new Set){const s=[n||nt,HL(t)];return r=r||("object"==typeof t?void 0:gt(t)),new Sc(s,e||Fg(),r||null,i)}let os=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=gr;static#t=this.NULL=new Vv;static create(n,r){if(Array.isArray(n))return eC({name:""},r,n,"");{const i=n.name??"";return eC({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Ye({token:t,providedIn:"any",factory:()=>ue(kA)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function iI(t){return t.ngOriginalError}class js{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&iI(e);for(;n&&iI(n);)n=iI(n);return n||null}}function oI(t){return e=>{setTimeout(t,void 0,e)}}const Hs=class IF extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=oI(s),i&&(i=oI(i)),o&&(o=oI(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof ct&&e.add(a),a}};function rC(...t){}class St{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hs(!1),this.onMicrotaskEmpty=new Hs(!1),this.onStable=new Hs(!1),this.onError=new Hs(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function EF(){const t="function"==typeof dt.requestAnimationFrame;let e=dt[t?"requestAnimationFrame":"setTimeout"],n=dt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function DF(t){const e=()=>{!function TF(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(dt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,uI(t),t.isCheckStableRunning=!0,aI(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),uI(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function CF(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return iC(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),sC(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return iC(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),sC(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,uI(t),aI(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!St.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(St.isInAngularZone())throw new ee(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,wF,rC,rC);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const wF={};function aI(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function uI(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function iC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sC(t){t._nesting--,aI(t)}class AF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hs,this.onMicrotaskEmpty=new Hs,this.onStable=new Hs,this.onError=new Hs}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const oC=new le("",{providedIn:"root",factory:aC});function aC(){const t=ze(St);let e=!0;return q(new lt(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new lt(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{St.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{St.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(be()))}let cI=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Ye({token:t,providedIn:"root",factory:()=>new t})}return t})();function dh(t){for(;t;){t[Me]|=64;const e=rh(t);if(wp(t)&&!e)return t;t=e}return null}const hC=new le("",{providedIn:"root",factory:()=>!1});let Wg=null;function mC(t,e){return t[e]??vC()}function _C(t,e){const n=vC();n.producerNode?.length&&(t[e]=Wg,n.lView=t,Wg=yC())}const LF={...Qt,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{dh(t.lView)},lView:null};function yC(){return Object.create(LF)}function vC(){return Wg??=yC(),Wg}const Oe={};function Lc(t){IC(Ke(),K(),qn()+t,!1)}function IC(t,e,n,r){if(!r)if(3==(3&e[Me])){const s=t.preOrderCheckHooks;null!==s&&cc(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Do(e,s,0,n)}Ls(n)}function Be(t,e=Je.Default){const n=K();return null===n?ue(t,e):og(rn(),n,b(t),e)}function Zg(t,e,n,r,i,s,o,a,c,d,p){const g=e.blueprint.slice();return g[Gt]=i,g[Me]=140|r,(null!==d||t&&2048&t[Me])&&(g[Me]|=2048),Up(g),g[vt]=g[mo]=t,g[Kt]=n,g[go]=o||t&&t[go],g[Se]=a||t&&t[Se],g[oi]=c||t&&t[oi]||null,g[dn]=s,g[Ps]=function $1(){return H1++}(),g[Ri]=p,g[Ep]=d,g[Vt]=2==e.type?t[Vt]:g,g}function Fc(t,e,n,r,i){let s=t.data[e];if(null===s)s=function lI(t,e,n,r,i){const s=Zp(),o=Pd(),c=t.data[e]=function zF(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Xi(){return null!==Te.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(t,e,n,r,i),function jy(){return Te.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Oa(){const t=Te.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Mr(s,!0),s}function hh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function EC(t,e,n,r,i){const s=mC(e,ba),o=qn(),a=2&r;try{Ls(-1),a&&e.length>je&&IC(t,e,je,!1),hi(a?2:0,i);const d=a?s:null,p=_d(d);try{null!==d&&(d.dirty=!1),n(r,i)}finally{Qu(d,p)}}finally{a&&null===e[ba]&&_C(e,ba),Ls(o),hi(a?3:1,i)}}function dI(t,e,n){if(Ra(e)){const r=xr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{xr(r)}}}function hI(t,e,n){ic()&&(function JF(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;Ns(n)&&function sV(t,e,n){const r=hn(e,t),i=wC(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Kg(t,Zg(t,i,null,o,r,e,null,t[go].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||hc(n,e),or(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const c=t.data[a],d=Vs(e,t,a,n);or(d,e),null!==o&&oV(0,a-i,d,c,0,o),li(c)&&(vr(n.index,e)[Kt]=Vs(e,t,a,n))}}(t,e,n,hn(n,e)),64==(64&n.flags)&&bC(t,e,n))}function fI(t,e,n=hn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function wC(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=pI(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function pI(t,e,n,r,i,s,o,a,c,d,p){const g=je+r,_=g+i,v=function BF(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Oe);return n}(g,_),E="function"==typeof d?d():d;return v[ae]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:p}}let TC=t=>null;function DC(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?AC(n,e,i,s):r.hasOwnProperty(i)&&AC(n,e,r[i],s)}return n}function AC(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Gr(t,e,n,r,i,s,o,a){const c=hn(e,n);let p,d=e.inputs;!a&&null!=d&&(p=d[r])?(vI(t,n,p,r,i),Ns(e)&&function ZF(t,e){const n=vr(e,t);16&n[Me]||(n[Me]|=64)}(n,e.index)):3&e.type&&(r=function WF(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}function gI(t,e,n,r){if(ic()){const i=null===r?null:{"":-1},s=function eV(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(ad(e,o.selectors,!1))if(r||(r=[]),li(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),mI(t,e,a.length)}else r.unshift(o),mI(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&CC(t,e,n,o,i,a),i&&function tV(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new ee(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Gi(n.mergedAttrs,n.attrs)}function CC(t,e,n,r,i,s){for(let d=0;d<r.length;d++)qa(hc(n,e),t,r[d].type);!function rV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const p=r[d];p.providersResolver&&p.providersResolver(p)}let o=!1,a=!1,c=hh(t,e,r.length,null);for(let d=0;d<r.length;d++){const p=r[d];n.mergedAttrs=Gi(n.mergedAttrs,p.hostAttrs),iV(t,n,e,c,p),nV(c,p,i),null!==p.contentQueries&&(n.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=64);const g=p.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function GF(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let c=null,d=null;for(let p=e.directiveStart;p<i;p++){const g=s[p],_=n?n.get(g):null,E=_?_.outputs:null;c=DC(g.inputs,p,c,_?_.inputs:null),d=DC(g.outputs,p,d,E);const w=null===c||null===o||ju(e)?null:aV(c,p,o);a.push(w)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=d}(t,n,s)}function bC(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function Hy(){return Te.lFrame.currentDirectiveIndex}();try{Ls(s);for(let a=r;a<i;a++){const c=t.data[a],d=e[a];Od(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&XF(c,d)}}finally{Ls(-1),Od(o)}}function XF(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function mI(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function nV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;li(e)&&(n[""]=t)}}function iV(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=di(i.type)),o=new Ba(s,li(i),Be);t.blueprint[r]=o,n[r]=o,function QF(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function YF(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,hh(t,n,i.hostVars,Oe),i)}function oV(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)SC(r,n,o[a++],o[a++],o[a++])}function SC(t,e,n,r,i){const s=xr(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{xr(s)}}function aV(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function RC(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function PC(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];Fd(n[r]),o.contentQueries(2,e[s],s)}}}function Kg(t,e){return t[Aa]?t[Gu][qr]=e:t[Aa]=e,t[Gu]=e,e}function yI(t,e,n){Fd(0);const r=xr(null);try{e(t,n)}finally{xr(r)}}function kC(t,e){const n=t[oi],r=n?n.get(js,null):null;r&&r.handleError(e)}function vI(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];SC(t.data[o],e[o],r,a,i)}}function qs(t,e,n){const r=function wo(t,e){return pt(e[t])}(e,t);!function uA(t,e,n){t.setValue(e,n)}(t[Se],r,n)}function uV(t,e){const n=vr(e,t),r=n[ae];!function cV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Gt];null!==i&&null===n[Ri]&&(n[Ri]=Xv(i,n[oi])),II(r,n,n[Kt])}function II(t,e,n){Bd(e);try{const r=t.viewQuery;null!==r&&yI(1,r,n);const i=t.template;null!==i&&EC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&PC(t,e),t.staticViewQueries&&yI(2,t.viewQuery,n);const s=t.components;null!==s&&function lV(t,e){for(let n=0;n<e.length;n++)uV(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Me]&=-5,Ud()}}let OC=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function Ny(t,e,n){const r=Object.create(xy);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Rp(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Pp(r))return;r.hasRun=!0;const o=_d(r);try{r.cleanupFn(),r.cleanupFn=Lp,r.fn(i)}finally{Qu(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ye({token:t,providedIn:"root",factory:()=>new t})}return t})();function Qg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=ei(i,a):2==s&&(r=ei(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function fh(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(pt(s)),sr(s)&&LC(s,r);const o=n.type;if(8&o)fh(t,e,n.child,r);else if(32&o){const a=Tv(n,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=_A(e,n);if(Array.isArray(a))r.push(...a);else{const c=rh(e[Vt]);fh(c[ae],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function LC(t,e){for(let n=Tn;n<t.length;n++){const r=t[n],i=r[ae].firstChild;null!==i&&fh(r[ae],r,i,e)}t[ci]!==t[Gt]&&e.push(t[ci])}function Yg(t,e,n,r=!0){const i=e[go],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{FC(t,e,t.template,n)}catch(c){throw r&&kC(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function FC(t,e,n,r){const i=e[Me];if(256!=(256&i)){e[go].effectManager?.flush(),Bd(e);try{Up(e),function xd(t){return Te.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&EC(t,e,n,2,r);const o=3==(3&i);if(o){const d=t.preOrderCheckHooks;null!==d&&cc(e,d,null)}else{const d=t.preOrderHooks;null!==d&&Do(e,d,0,null),Va(e,0)}if(function fV(t){for(let e=sA(t);null!==e;e=oA(e)){if(!e[fd])continue;const n=e[yo];for(let r=0;r<n.length;r++){Cd(n[r])}}}(e),VC(e,2),null!==t.contentQueries&&PC(t,e),o){const d=t.contentCheckHooks;null!==d&&cc(e,d)}else{const d=t.contentHooks;null!==d&&Do(e,d,1),Va(e,1)}!function VF(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=mC(e,_o);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)Ls(~s);else{const o=s,a=n[++i],c=n[++i];kd(a,o),r.dirty=!1;const d=_d(r);try{c(2,e[o])}finally{Qu(r,d)}}}}finally{null===e[_o]&&_C(e,_o),Ls(-1)}}(t,e);const a=t.components;null!==a&&UC(e,a,0);const c=t.viewQuery;if(null!==c&&yI(2,c,r),o){const d=t.viewCheckHooks;null!==d&&cc(e,d)}else{const d=t.viewHooks;null!==d&&Do(e,d,2),Va(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Me]&=-73,jp(e)}finally{Ud()}}}function VC(t,e){for(let n=sA(t);null!==n;n=oA(n))for(let r=Tn;r<n.length;r++)BC(n[r],e)}function pV(t,e,n){BC(vr(e,t),n)}function BC(t,e){if(!function Ad(t){return 128==(128&t[Me])}(t))return;const n=t[ae],r=t[Me];if(80&r&&0===e||1024&r||2===e)FC(n,t,n.template,t[Kt]);else if(t[Da]>0){VC(t,1);const i=n.components;null!==i&&UC(t,i,1)}}function UC(t,e,n){for(let r=0;r<e.length;r++)pV(t,e[r],n)}class ph{get rootNodes(){const e=this._lView,n=e[ae];return fh(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Kt]}set context(e){this._lView[Kt]=e}get destroyed(){return 256==(256&this._lView[Me])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[vt];if(sr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(bg(e,r),Ro(n,r))}this._attachedToViewContainer=!1}Av(this._lView[ae],this._lView)}onDestroy(e){!function Hp(t,e){if(256==(256&t[Me]))throw new ee(911,!1);null===t[ui]&&(t[ui]=[]),t[ui].push(e)}(this._lView,e)}markForCheck(){dh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Me]&=-129}reattach(){this._lView[Me]|=128}detectChanges(){Yg(this._lView[ae],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rL(t,e){sh(t,e,e[Se],2,null,null)}(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e}}class gV extends ph{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Yg(e[ae],e,e[Kt],!1)}checkNoChanges(){}get context(){return null}}class jC extends qg{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ze(e);return new gh(n,this.ngModule)}}function HC(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class _V{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Lu(r);const i=this.injector.get(e,nI,r);return i!==nI||n===nI?i:this.parentInjector.get(e,n,r)}}class gh extends GA{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=HC(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return HC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function ld(t){return t.map(_p).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof is?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new _V(e,s):e,a=o.get(ZA,null);if(null===a)throw new ee(407,!1);const g={rendererFactory:a,sanitizer:o.get(fF,null),effectManager:o.get(OC,null),afterRenderEventManager:o.get(cI,null)},_=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",E=r?function UF(t,e,n,r){const s=r.get(hC,!1)||n===Nr.ShadowDom,o=t.selectRootElement(e,s);return function jF(t){TC(t)}(o),o}(_,r,this.componentDef.encapsulation,o):Cg(_,v,function mV(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v)),k=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let R=null;null!==E&&(R=Xv(E,o,!0));const M=pI(0,null,null,1,0,null,null,null,null,null,null),X=Zg(null,M,null,k,null,null,g,_,o,null,R);let ne,Ae;Bd(X);try{const ut=this.componentDef;let gn,tp=null;ut.findHostDirectiveDefs?(gn=[],tp=new Map,ut.findHostDirectiveDefs(ut,gn,tp),gn.push(ut)):gn=[ut];const hy=function vV(t,e){const n=t[ae],r=je;return t[r]=e,Fc(n,r,2,"#host",null)}(X,E),J5=function IV(t,e,n,r,i,s,o){const a=i[ae];!function EV(t,e,n,r){for(const i of t)e.mergedAttrs=Gi(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Qg(e,e.mergedAttrs,!0),null!==n&&EA(r,n,e))}(r,t,e,o);let c=null;null!==e&&(c=Xv(e,i[oi]));const d=s.rendererFactory.createRenderer(e,n);let p=16;n.signals?p=4096:n.onPush&&(p=64);const g=Zg(i,wC(n),null,p,i[t.index],t,s,d,null,null,c);return a.firstCreatePass&&mI(a,t,r.length-1),Kg(i,g),i[t.index]=g}(hy,E,ut,gn,X,g,_);Ae=tc(M,je),E&&function TV(t,e,n,r){if(r)Bu(t,n,["ng-version",QA.full]);else{const{attrs:i,classes:s}=function yp(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!rr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Bu(t,n,i),s&&s.length>0&&IA(t,n,s.join(" "))}}(_,ut,E,r),void 0!==n&&function DV(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(Ae,this.ngContentSelectors,n),ne=function wV(t,e,n,r,i,s){const o=rn(),a=i[ae],c=hn(o,i);CC(a,i,o,n,null,r);for(let p=0;p<n.length;p++)or(Vs(i,a,o.directiveStart+p,o),i);bC(a,i,o),c&&or(c,i);const d=Vs(i,a,o.directiveStart+o.componentOffset,o);if(t[Kt]=i[Kt]=d,null!==s)for(const p of s)p(d,e);return dI(a,o,t),d}(J5,ut,gn,tp,X,[AV]),II(M,X,null)}finally{Ud()}return new yV(this.componentType,ne,xc(Ae,X),X,Ae)}}class yV extends aF{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new gV(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;vI(s[ae],s,i,e,n),this.previousInputValues.set(e,n),dh(vr(this._tNode.index,s))}}get injector(){return new Cn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function AV(){const t=rn();uc(K()[ae],t)}function Xg(t){return!!EI(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function EI(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ar(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Bc(t,e,n,r){return ar(t,Os(),n)?e+ge(n)+r:Oe}let ub=function cb(t,e,n,r){return es(!0),e[Se].createComment("")};function Wc(t,e,n){const r=K();return ar(r,Os(),e)&&Gr(Ke(),wt(),r,t,e,r[Se],n,!1),Wc}function bI(t,e,n,r,i){const o=i?"class":"style";vI(t,n,e.inputs[o],o,r)}function xi(t,e,n,r){const i=K(),s=Ke(),o=je+t,a=i[Se],c=s.firstCreatePass?function s2(t,e,n,r,i,s){const o=e.consts,c=Fc(e,t,2,r,Ji(o,i));return gI(e,n,c,Ji(o,s)),null!==c.attrs&&Qg(c,c.attrs,!1),null!==c.mergedAttrs&&Qg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,n,r):s.data[o],d=db(s,i,c,a,e,t);i[o]=d;const p=Zu(c);return Mr(c,!0),EA(a,d,c),32!=(32&c.flags)&&ac()&&Rg(s,i,d,c),0===function Fy(){return Te.lFrame.elementDepthCount}()&&or(d,i),function Vy(){Te.lFrame.elementDepthCount++}(),p&&(hI(s,i,c),dI(s,c,i)),null!==r&&fI(i,c),xi}function cs(){let t=rn();Pd()?function La(){Te.lFrame.isParent=!1}():(t=t.parent,Mr(t,!1));const e=t;(function By(t){return Te.skipHydrationRootTNode===t})(e)&&function Uy(){Te.skipHydrationRootTNode=null}(),function Sd(){Te.lFrame.elementDepthCount--}();const n=Ke();return n.firstCreatePass&&(uc(n,t),Ra(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function rg(t){return 0!=(8&t.flags)}(e)&&bI(n,e,K(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function dc(t){return 0!=(16&t.flags)}(e)&&bI(n,e,K(),e.stylesWithoutHost,!1),cs}function Zc(t,e,n,r){return xi(t,e,n,r),cs(),Zc}let db=(t,e,n,r,i,s)=>(es(!0),Cg(r,i,function Xp(){return Te.lFrame.currentNamespace}()));function PI(t){return!!t&&"function"==typeof t.then}function gb(t){return!!t&&"function"==typeof t.subscribe}function Ih(t,e,n,r){const i=K(),s=Ke(),o=rn();return function _b(t,e,n,r,i,s,o){const a=Zu(r),d=t.firstCreatePass&&function xC(t){return t.cleanup||(t.cleanup=[])}(t),p=e[Kt],g=function NC(t){return t[po]||(t[po]=[])}(e);let _=!0;if(3&r.type||o){const w=hn(r,e),C=o?o(w):w,k=g.length,R=o?X=>o(pt(X[r.index])):r.index;let M=null;if(!o&&a&&(M=function d2(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[po],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==M)(M.__ngLastListenerFn__||M).__ngNextListenerFn__=s,M.__ngLastListenerFn__=s,_=!1;else{s=vb(r,e,p,s,!1);const X=n.listen(C,i,s);g.push(s,X),d&&d.push(i,R,k,k+1)}}else s=vb(r,e,p,s,!1);const v=r.outputs;let E;if(_&&null!==v&&(E=v[i])){const w=E.length;if(w)for(let C=0;C<w;C+=2){const ne=e[E[C]][E[C+1]].subscribe(s),Ae=g.length;g.push(s,ne),d&&d.push(i,r.index,Ae,-(Ae+1))}}}(s,i,i[Se],o,t,e,r),Ih}function yb(t,e,n,r){try{return hi(6,e,n),!1!==n(r)}catch(i){return kC(t,i),!1}finally{hi(7,e,n)}}function vb(t,e,n,r,i){return function s(o){if(o===Function)return r;dh(t.componentOffset>-1?vr(t.index,e):e);let c=yb(e,n,r,o),d=s.__ngNextListenerFn__;for(;d;)c=yb(e,n,d,o)&&c,d=d.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function NI(t,e,n){return xI(t,"",e,"",n),NI}function xI(t,e,n,r,i){const s=K(),o=Bc(s,e,n,r);return o!==Oe&&Gr(Ke(),wt(),s,t,o,s[Se],i,!1),xI}function om(t,e=""){const n=K(),r=Ke(),i=t+je,s=r.firstCreatePass?Fc(r,i,1,e,null):r.data[i],o=$b(r,n,s,e,t);n[i]=o,ac()&&Rg(r,n,o,s),Mr(s,!1)}let $b=(t,e,n,r,i)=>(es(!0),function Ag(t,e){return t.createText(e)}(e[Se],r));function FI(t){return am("",t,""),FI}function am(t,e,n){const r=K(),i=Bc(r,t,e,n);return i!==Oe&&qs(r,qn(),i),am}const Yc="en-US";let dS=Yc;class tu{}class oU{}class qI extends tu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jC(this);const i=function _r(t,e){const n=t[wa]||null;if(!n&&!0===e)throw new Error(`Type ${gt(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function $s(t){return t instanceof Function?t():t}(i.bootstrap),this._r3Injector=tC(e,n,[{provide:tu,useValue:this},{provide:qg,useValue:this.componentFactoryResolver},...r],gt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zI extends oU{constructor(e){super(),this.moduleType=e}create(e){return new qI(this.moduleType,e,[])}}function qS(t,e,n,r){return function zS(t,e,n,r,i,s){const o=e+n;return ar(t,o,i)?function us(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function bh(t,e){const n=t[e];return n===Oe?void 0:n}(t,o+1)}(K(),function An(){const t=Te.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r)}function VU(t,e,n,r=!0){const i=e[ae];if(function sL(t,e,n,r){const i=Tn+r,s=n.length;r>0&&(n[i-1][qr]=e),r<s-Tn?(e[qr]=n[i],_c(n,Tn+r,e)):(n.push(e),e[qr]=null),e[vt]=n;const o=e[Ca];null!==o&&n!==o&&function oL(t,e){const n=t[yo];e[Vt]!==e[vt][vt][Vt]&&(t[fd]=!0),null===n?t[yo]=[e]:n.push(e)}(o,e);const a=e[ai];null!==a&&a.insertView(t),e[Me]|=128}(i,e,t,n),r){const s=Rv(n,t),o=e[Se],a=Sg(o,t[ci]);null!==a&&function nL(t,e,n,r,i,s){r[Gt]=i,r[dn]=e,sh(t,r,n,1,i,s)}(i,t[dn],o,e,a,s)}}Symbol;let zs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=jU}return t})();const BU=zs,UU=class extends BU{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function FU(t,e,n,r){const i=e.tView,a=Zg(t,i,n,4096&t[Me]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Ca]=t[e.index];const d=t[ai];return null!==d&&(a[ai]=d.createEmbeddedView(i)),II(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new ph(i)}};function jU(){return function hm(t,e){return 4&t.type?new UU(e,t,xc(t,e)):null}(rn(),K())}let hs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=WU}return t})();function WU(){return function nR(t,e){let n;const r=e[t.index];return sr(r)?n=r:(n=RC(r,e,null,t),e[t.index]=n,Kg(e,n)),rR(n,e,t,r),new eR(n,t,e)}(rn(),K())}const ZU=hs,eR=class extends ZU{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return xc(this._hostTNode,this._hostLView)}get injector(){return new Cn(this._hostTNode,this._hostLView)}get parentInjector(){const e=fc(this._hostTNode,this._hostLView);if($d(e)){const n=ja(e,this._hostLView),r=Ua(e);return new Cn(n[ae].data[r+8],n)}return new Cn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=tR(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Tn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function bn(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const c=o?e:new gh(Ze(e)),d=r||this.parentInjector;if(!s&&null==c.ngModule){const C=(o?d:this.parentInjector).get(is,null);C&&(s=C)}Ze(c.componentType??{});const v=c.create(d,i,null,s);return this.insertImpl(v.hostView,a,false),v}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function Bp(t){return sr(t[vt])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const d=i[vt],p=new eR(d,d[dn],d[vt]);p.detach(p.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return VU(a,i,o,!r),e.attachToViewContainerRef(),_c(ZI(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=tR(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=bg(this._lContainer,n);r&&(Ro(ZI(this._lContainer),n),Av(r[ae],r))}detach(e){const n=this._adjustIndex(e,-1),r=bg(this._lContainer,n);return r&&null!=Ro(ZI(this._lContainer),n)?new ph(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function tR(t){return t[8]}function ZI(t){return t[8]||(t[8]=[])}let rR=function iR(t,e,n,r){if(t[ci])return;let i;i=8&n.type?pt(r):function KU(t,e){const n=t[Se],r=n.createComment(""),i=hn(e,t);return Qa(n,Sg(n,i),r,function lL(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[ci]=i};const Rj=new le("Application Initializer");let iE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=ze(Rj,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(PI(s))n.push(s);else if(gb(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Gs=new le("LocaleId",{providedIn:"root",factory:()=>ze(Gs,Je.Optional|Je.SkipSelf)||function Nj(){return typeof $localize<"u"&&$localize.locale||Yc}()});let sE=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new x(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const PR=new le(""),mm=new le("");let lE,uE=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,lE||(function nH(t){lE=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{St.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(ue(St),ue(cE),ue(mm))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})(),cE=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return lE?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Oo=null;const NR=new le("AllowMultipleToken"),dE=new le("PlatformDestroyListeners"),xR=new le("appBootstrapListener");function OR(t,e,n=[]){const r=`Platform: ${e}`,i=new le(r);return(s=[])=>{let o=hE();if(!o||o.injector.get(NR,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function sH(t){if(Oo&&!Oo.get(NR,!1))throw new ee(400,!1);(function MR(){!function Eo(t){Mp=t}(()=>{throw new ee(600,!1)})})(),Oo=t;const e=t.get(FR);(function kR(t){t.get(jA,null)?.forEach(n=>n())})(t)}(function LR(t=[],e){return os.create({name:e,providers:[{provide:Hv,useValue:"platform"},{provide:dE,useValue:new Set([()=>Oo=null])},...t]})}(a,r))}return function aH(t){const e=hE();if(!e)throw new ee(401,!1);return e}()}}function hE(){return Oo?.get(FR)??null}let FR=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function uH(t="zone.js",e){return"noop"===t?new AF:"zone.js"===t?new St(e):t}(r?.ngZone,function VR(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function uU(t,e,n){return new qI(t,e,n)}(n.moduleType,this.injector,function $R(t){return[{provide:St,useFactory:t},{provide:kg,multi:!0,useFactory:()=>{const e=ze(lH,{optional:!0});return()=>e.initialize()}},{provide:HR,useFactory:cH},{provide:oC,useFactory:aC}]}(()=>i)),o=s.injector.get(js,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{_m(this._modules,s),a.unsubscribe()})}),function BR(t,e,n){try{const r=n();return PI(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(iE);return a.runInitializers(),a.donePromise.then(()=>(function hS(t){tr(t,"Expected localeId to be defined"),"string"==typeof t&&(dS=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Gs,Yc)||Yc),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=UR({},r);return function rH(t,e,n){const r=new zI(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Nh);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new ee(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(dE,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(ue(os))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function UR(t,e){return Array.isArray(e)?e.reduce(UR,t):{...t,...e}}let Nh=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ze(HR),this.zoneIsStable=ze(oC),this.componentTypes=[],this.components=[],this.isStable=ze(sE).hasPendingTasks.pipe(Lt(n=>n?ie(!1):this.zoneIsStable),Ft(),be()),this._injector=ze(is)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof GA;if(!this._injector.get(iE).done)throw!i&&function Rs(t){const e=Ze(t)||nn(t)||$n(t);return null!==e&&e.standalone}(n),new ee(405,!1);let o;o=i?n:this._injector.get(qg).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function iH(t){return t.isBoundToModule}(o)?void 0:this._injector.get(tu),d=o.create(os.NULL,[],r||o.selector,a),p=d.location.nativeElement,g=d.injector.get(PR,null);return g?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),_m(this.components,d),g?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new ee(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;_m(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(xR,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>_m(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ee(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _m(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const HR=new le("",{providedIn:"root",factory:()=>ze(js).handleError.bind(void 0)});function cH(){const t=ze(St),e=ze(js);return n=>t.runOutsideAngular(()=>e.handleError(n))}let lH=(()=>{class t{constructor(){this.zone=ze(St),this.applicationRef=ze(Nh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class ZR{constructor(){}supports(e){return Xg(e)}create(e){return new IH(e)}}const vH=(t,e)=>e;class IH{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||vH}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<QR(r,i,s)?n:r,a=QR(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,p=c-i;if(d!=p){for(let _=0;_<d;_++){const v=_<s.length?s[_]:s[_]=0,E=v+_;p<=E&&E<d&&(s[_]=v+1)}s[o.previousIndex]=p-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Xg(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function FV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new EH(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new KR),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KR),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class EH{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wH{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class KR{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new wH,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function QR(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class YR{constructor(){}supports(e){return e instanceof Map||EI(e)}create(){return new TH}}class TH{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||EI(e)))throw new ee(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new DH(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class DH{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function JR(){return new Im([new ZR])}let Im=(()=>{class t{static#e=this.\u0275prov=Ye({token:t,providedIn:"root",factory:JR});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||JR()),deps:[[t,new Xd,new Ic]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new ee(901,!1)}}return t})();function XR(){return new xh([new YR])}let xh=(()=>{class t{static#e=this.\u0275prov=Ye({token:t,providedIn:"root",factory:XR});constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||XR()),deps:[[t,new Xd,new Ic]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new ee(901,!1)}}return t})();const bH=OR(null,"core",[]);let SH=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(ue(Nh))};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=ti({})}return t})(),yE=null;function vE(){return yE}class jH{}const Lo=new le("DocumentToken");function mP(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const RE=/\s+/,_P=[];let yP=(()=>{class t{constructor(n,r,i,s){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=_P,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(RE):_P}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(RE):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const i=this.stateMap.get(n);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(RE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||t)(Be(Im),Be(xh),Be(Mc),Be(KA))};static#t=this.\u0275dir=ir({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class S${constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let IP=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new S$(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),EP(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{EP(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(Be(hs),Be(zs),Be(Im))};static#t=this.\u0275dir=ir({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function EP(t,e){t.context.$implicit=e.item}let t4=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=ti({})}return t})();function xm(t){return"server"===t}class CP{}class S4 extends jH{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class LE extends S4{static makeCurrent(){!function UH(t){yE||(yE=t)}(new LE)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function R4(){return Lh=Lh||document.querySelector("base"),Lh?Lh.getAttribute("href"):null}();return null==n?null:function P4(t){Om=Om||document.createElement("a"),Om.setAttribute("href",t);const e=Om.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Lh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return mP(document.cookie,e)}}let Om,Lh=null,x4=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const FE=new le("EventManagerPlugins");let NP=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(ue(FE),ue(St))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();class xP{constructor(e){this._doc=e}}const VE="ng-app-id";let MP=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xm(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${VE}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(VE),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(VE,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(ue(Lo),ue(Vg),ue(HA,8),ue(ss))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const BE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},UE=/%COMP%/g,L4=new le("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function OP(t,e){return e.map(n=>n.replace(UE,t))}let LP=(()=>{class t{constructor(n,r,i,s,o,a,c,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=xm(a),this.defaultRenderer=new jE(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Nr.ShadowDom&&(r={...r,encapsulation:Nr.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof VP?i.applyToHost(n):i instanceof HE&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Nr.Emulated:s=new VP(c,d,r,this.appId,p,o,a,g);break;case Nr.ShadowDom:return new U4(c,d,n,r,o,a,this.nonce,g);default:s=new HE(c,d,r,p,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(ue(NP),ue(MP),ue(Vg),ue(L4),ue(Lo),ue(ss),ue(St),ue(HA))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();class jE{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(BE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(FP(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(FP(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=BE[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=BE[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(xo.DashCase|xo.Important)?e.style.setProperty(n,r,i&xo.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&xo.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=vE().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function FP(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class U4 extends jE{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=OP(i.id,i.styles);for(const p of d){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class HE extends jE{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?OP(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class VP extends HE{constructor(e,n,r,i,s,o,a,c){const d=i+"-"+r.id;super(e,n,r,s,o,a,c,d),this.contentAttr=function F4(t){return"_ngcontent-%COMP%".replace(UE,t)}(d),this.hostAttr=function V4(t){return"_nghost-%COMP%".replace(UE,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let j4=(()=>{class t extends xP{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(ue(Lo))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const BP=["alt","control","meta","shift"],H4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$4={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let q4=(()=>{class t extends xP{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vE().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),BP.forEach(d=>{const p=r.indexOf(d);p>-1&&(r.splice(p,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=H4[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),BP.forEach(o=>{o!==i&&(0,$4[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(ue(Lo))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const jP=[{provide:ss,useValue:"browser"},{provide:jA,useValue:function z4(){LE.makeCurrent()},multi:!0},{provide:Lo,useFactory:function W4(){return function yL(t){xv=t}(document),document},deps:[]}],Z4=OR(bH,"browser",jP),K4=new le(""),HP=[{provide:mm,useClass:class N4{addToWindow(e){dt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new ee(5103,!1);return s},dt.getAllAngularTestabilities=()=>e.getAllTestabilities(),dt.getAllAngularRootElements=()=>e.getAllRootElements(),dt.frameworkStabilizers||(dt.frameworkStabilizers=[]),dt.frameworkStabilizers.push(r=>{const i=dt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?vE().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:PR,useClass:uE,deps:[St,cE,mm]},{provide:uE,useClass:uE,deps:[St,cE,mm]}],$P=[{provide:Hv,useValue:"root"},{provide:js,useFactory:function G4(){return new js},deps:[]},{provide:FE,useClass:j4,multi:!0,deps:[Lo,St,ss]},{provide:FE,useClass:q4,multi:!0,deps:[Lo]},LP,MP,NP,{provide:ZA,useExisting:LP},{provide:CP,useClass:x4,deps:[]},[]];let Q4=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Vg,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(ue(K4,12))};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=ti({providers:[...$P,...HP],imports:[t4,SH]})}return t})();function Fh(t,e){return U((n,r)=>{let i=0;n.subscribe(_e(r,s=>t.call(e,s,i++)&&r.next(s)))})}function WP(t){return U((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}typeof window<"u"&&window;class Lm{}class Fm{}class fs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof fs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new fs;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof fs?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class iq{encodeKey(e){return ZP(e)}encodeValue(e){return ZP(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const oq=/%(\d[a-f0-9])/gi,aq={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ZP(t){return encodeURIComponent(t).replace(oq,(e,n)=>aq[n]??e)}function Vm(t){return`${t}`}class Vo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new iq,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function sq(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],i=Array.isArray(r)?r.map(Vm):[Vm(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Vo({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(Vm(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Vm(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class uq{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function KP(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function QP(t){return typeof Blob<"u"&&t instanceof Blob}function YP(t){return typeof FormData<"u"&&t instanceof FormData}class Vh{constructor(e,n,r,i){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function cq(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new fs),this.context||(this.context=new uq),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new Vo,this.urlWithParams=n}serializeBody(){return null===this.body?null:KP(this.body)||QP(this.body)||YP(this.body)||function lq(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Vo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||YP(this.body)?null:QP(this.body)?this.body.type||null:KP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,d=e.params||this.params;const p=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((g,_)=>g.set(_,e.setHeaders[_]),c)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,_)=>g.set(_,e.setParams[_]),d)),new Vh(n,r,s,{params:d,headers:c,context:p,reportProgress:a,responseType:i,withCredentials:o})}}var tl=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(tl||{});class qE{constructor(e,n=200,r="OK"){this.headers=e.headers||new fs,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class zE extends qE{constructor(e={}){super(e),this.type=tl.ResponseHeader}clone(e={}){return new zE({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class nl extends qE{constructor(e={}){super(e),this.type=tl.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new nl({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class JP extends qE{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function GE(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let dq=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let s;if(n instanceof Vh)s=n;else{let c,d;c=i.headers instanceof fs?i.headers:new fs(i.headers),i.params&&(d=i.params instanceof Vo?i.params:new Vo({fromObject:i.params})),s=new Vh(n,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=ie(s).pipe(function rq(t,e){return I(e)?jr(t,e,1):jr(t,1)}(c=>this.handler.handle(c)));if(n instanceof Vh||"events"===i.observe)return o;const a=o.pipe(Fh(c=>c instanceof nl));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe($e(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe($e(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe($e(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe($e(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Vo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,GE(i,r))}post(n,r,i={}){return this.request("POST",n,GE(i,r))}put(n,r,i={}){return this.request("PUT",n,GE(i,r))}static#e=this.\u0275fac=function(r){return new(r||t)(ue(Lm))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();function tN(t,e){return e(t)}function fq(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}const gq=new le(""),Bh=new le(""),nN=new le("");function mq(){let t=null;return(e,n)=>{null===t&&(t=(ze(gq,{optional:!0})??[]).reduceRight(fq,tN));const r=ze(sE),i=r.add();return t(e,n).pipe(WP(()=>r.remove(i)))}}let rN=(()=>{class t extends Lm{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=ze(sE)}handle(n){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Bh),...this.injector.get(nN,[])]));this.chain=i.reduceRight((s,o)=>function pq(t,e,n){return(r,i)=>n.runInContext(()=>e(r,s=>t(s,i)))}(s,o,this.injector),tN)}const r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(WP(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||t)(ue(Fm),ue(is))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const Iq=/^\)\]\}',?\n/;let sN=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new ee(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?S(r.\u0275loadImpl()):ie(null)).pipe(Lt(()=>new lt(s=>{const o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((w,C)=>o.setRequestHeader(w,C.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const w=n.detectContentTypeHeader();null!==w&&o.setRequestHeader("Content-Type",w)}if(n.responseType){const w=n.responseType.toLowerCase();o.responseType="json"!==w?w:"text"}const a=n.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const w=o.statusText||"OK",C=new fs(o.getAllResponseHeaders()),k=function Eq(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||n.url;return c=new zE({headers:C,status:o.status,statusText:w,url:k}),c},p=()=>{let{headers:w,status:C,statusText:k,url:R}=d(),M=null;204!==C&&(M=typeof o.response>"u"?o.responseText:o.response),0===C&&(C=M?200:0);let X=C>=200&&C<300;if("json"===n.responseType&&"string"==typeof M){const ne=M;M=M.replace(Iq,"");try{M=""!==M?JSON.parse(M):null}catch(Ae){M=ne,X&&(X=!1,M={error:Ae,text:M})}}X?(s.next(new nl({body:M,headers:w,status:C,statusText:k,url:R||void 0})),s.complete()):s.error(new JP({error:M,headers:w,status:C,statusText:k,url:R||void 0}))},g=w=>{const{url:C}=d(),k=new JP({error:w,status:o.status||0,statusText:o.statusText||"Unknown Error",url:C||void 0});s.error(k)};let _=!1;const v=w=>{_||(s.next(d()),_=!0);let C={type:tl.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(C.total=w.total),"text"===n.responseType&&o.responseText&&(C.partialText=o.responseText),s.next(C)},E=w=>{let C={type:tl.UploadProgress,loaded:w.loaded};w.lengthComputable&&(C.total=w.total),s.next(C)};return o.addEventListener("load",p),o.addEventListener("error",g),o.addEventListener("timeout",g),o.addEventListener("abort",g),n.reportProgress&&(o.addEventListener("progress",v),null!==a&&o.upload&&o.upload.addEventListener("progress",E)),o.send(a),s.next({type:tl.Sent}),()=>{o.removeEventListener("error",g),o.removeEventListener("abort",g),o.removeEventListener("load",p),o.removeEventListener("timeout",g),n.reportProgress&&(o.removeEventListener("progress",v),null!==a&&o.upload&&o.upload.removeEventListener("progress",E)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||t)(ue(CP))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();const WE=new le("XSRF_ENABLED"),oN=new le("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),aN=new le("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class uN{}let Dq=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=mP(n,this.cookieName),this.lastCookieString=n),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||t)(ue(Lo),ue(ss),ue(oN))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();function Aq(t,e){const n=t.url.toLowerCase();if(!ze(WE)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=ze(uN).getToken(),i=ze(aN);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var Bo=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Bo||{});function Cq(...t){const e=[dq,sN,rN,{provide:Lm,useExisting:rN},{provide:Fm,useExisting:sN},{provide:Bh,useValue:Aq,multi:!0},{provide:WE,useValue:!0},{provide:uN,useClass:Dq}];for(const n of t)e.push(...n.\u0275providers);return function Bv(t){return{\u0275providers:t}}(e)}const cN=new le("LEGACY_INTERCEPTOR_FN");function bq(){return function ru(t,e){return{\u0275kind:t,\u0275providers:e}}(Bo.LegacyInterceptors,[{provide:cN,useFactory:mq},{provide:Bh,useExisting:cN,multi:!0}])}let Sq=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t});static#n=this.\u0275inj=ti({providers:[Cq(bq())]})}return t})();var rl=xe(534);(0,rl.registerVersion)("firebase","10.7.0","app");class Lq extends ct{constructor(e,n){super()}schedule(e,n=0){return this}}const Um={setInterval(t,e,...n){const{delegate:r}=Um;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Um;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class lN extends Lq{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Um.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Um.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ce(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const ZE={now:()=>(ZE.delegate||Date).now(),delegate:void 0};class Uh{constructor(e,n=Uh.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Uh.now=ZE.now;class dN extends Uh{constructor(e,n=Uh.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Bq=new class Vq extends dN{}(class Fq extends lN{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),hN=new dN(lN),KE=new zg("ANGULARFIRE2_VERSION");class fN{constructor(){return((t,e)=>{const n=(0,rl.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(Hq)}}const Hq="app-check";function il(){}class pN{zone;delegate;constructor(e,n=Bq){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class $q{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",il,{},il,il)),n.pipe(function Uq(t,e,n){const r=I(t)||e||n?{next:t,error:e,complete:n}:t;return r?U((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(_e(s,c=>{var d;null===(d=r.next)||void 0===d||d.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,c),s.error(c)},()=>{var c,d;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):Nn}({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gN=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new pN(Zone.current)),this.insideAngular=n.run(()=>new pN(Zone.current,hN)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ue(St))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Zr(t){return function zq(t){return function(n){return(n=n.lift(new $q(t.ngZone))).pipe(er(t.outsideAngular),Hn(t.insideAngular))}}(function sl(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}())(t)}var Uo=xe(106);Uo.Z.registerVersion("firebase","10.7.0","app-compat");const Kq=["ngOnDestroy"];class mN{constructor(e){return e}}const jm=new le("angularfire2.app.options"),Hm=new le("angularfire2.app.name");function QE(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=Uo.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Uo.Z.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;Jq("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new mN(o)}const Jq=(t,...e)=>{},Xq={provide:mN,useFactory:QE,deps:[jm,St,[new Ic,Hm]]};let ez=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:jm,useValue:n},{provide:Hm,useValue:r}]}}constructor(n){Uo.Z.registerVersion("angularfire",KE.full,"core"),Uo.Z.registerVersion("angularfire",KE.full,"app-compat"),Uo.Z.registerVersion("angular",QA.full,n.toString())}static \u0275fac=function(r){return new(r||t)(ue(ss))};static \u0275mod=si({type:t});static \u0275inj=ti({providers:[Xq]})}return t})();function _N(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function tz(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(yN("error",`${e} was already initialized on the ${n} Firebase App with different settings.${nz?" You may need to reload as Firebase is not HMR aware.":""}`),yN("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const nz=typeof module<"u"&&!!module.hot,yN=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],xe(377);class rz extends j{constructor(e=1/0,n=1/0,r=ZE){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function vN(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,be({connector:()=>new rz(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const IN=De(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function oz(t=az){return U((e,n)=>{let r=!1;e.subscribe(_e(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function az(){return new IN}function EN(t,e){return I(e)?Lt(()=>t,e):Lt(()=>t)}const wN=new le("angularfire2.auth.use-emulator"),TN=new le("angularfire2.auth.settings"),DN=new le("angularfire2.auth.tenant-id"),AN=new le("angularfire2.auth.langugage-code"),CN=new le("angularfire2.auth.use-device-language"),bN=new le("angularfire.auth.persistence"),SN=(t,e,n,r,i,s,o,a)=>_N(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[d,p]of Object.entries(o))c.settings[d]=p;return a&&c.setPersistence(a),c},[n,r,i,s,o,a]);let RN=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,c,d,p,g,_,v){const E=new j,w=ie(void 0).pipe(Hn(o.outsideAngular),Lt(()=>s.runOutsideAngular(()=>Promise.resolve().then(xe.bind(xe,377)))),$e(()=>QE(n,s,r)),$e(C=>SN(C,s,a,d,p,g,c,_)),vN({bufferSize:1,refCount:!1}));if(xm(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ie(null);else{w.pipe(function uz(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Fh((i,s)=>t(i,s,r)):Nn,function iz(t){return t<=0?()=>Hr:U((e,n)=>{let r=0;e.subscribe(_e(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}(1),n?function sz(t){return U((e,n)=>{let r=!1;e.subscribe(_e(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}(e):oz(()=>new IN))}()).subscribe();const C=w.pipe(Lt(M=>M.getRedirectResult().then(X=>X,()=>null)),Zr,vN({bufferSize:1,refCount:!1})),k=w.pipe(Lt(M=>new lt(X=>({unsubscribe:s.runOutsideAngular(()=>M.onAuthStateChanged(ne=>X.next(ne),ne=>X.error(ne),()=>X.complete()))})))),R=w.pipe(Lt(M=>new lt(X=>({unsubscribe:s.runOutsideAngular(()=>M.onIdTokenChanged(ne=>X.next(ne),ne=>X.error(ne),()=>X.complete()))}))));this.authState=C.pipe(EN(k),er(o.outsideAngular),Hn(o.insideAngular)),this.user=C.pipe(EN(R),er(o.outsideAngular),Hn(o.insideAngular)),this.idToken=this.user.pipe(Lt(M=>M?S(M.getIdToken()):ie(null))),this.idTokenResult=this.user.pipe(Lt(M=>M?S(M.getIdTokenResult()):ie(null))),this.credential=q(C,E,this.authState.pipe(Fh(M=>!M))).pipe($e(M=>M?.user?M:null),er(o.outsideAngular),Hn(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(Kq.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(d=>n.run(()=>d)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,d)=>o.then(p=>{const g=p?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,g),g})})})}))(this,w,s,{spy:{apply:(C,k,R)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&R.then(M=>E.next(M))}}})}static \u0275fac=function(r){return new(r||t)(ue(jm),ue(Hm,8),ue(ss),ue(St),ue(gN),ue(wN,8),ue(TN,8),ue(DN,8),ue(AN,8),ue(CN,8),ue(bN,8),ue(fN,8))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function PN(...t){return function lz(){return Cs(1)}()(S(t,bs(t)))}function YE(...t){const e=bs(t);return U((n,r)=>{(e?PN(t,n,e):PN(t,n)).subscribe(r)})}function JE(){return U((t,e)=>{let n,r=!1;t.subscribe(_e(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}function XE(t,e){return U(function dz(t,e,n,r,i){return(s,o)=>{let a=n,c=e,d=0;s.subscribe(_e(o,p=>{const g=d++;c=a?t(c,p,g):(a=!0,p),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(t,e,arguments.length>=2,!0))}var ce,z=xe(861),NN=xe(537),ps=xe(879),Dt=xe(58),hz=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fi={},ew=ew||{},ke=hz||self;function $m(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function jh(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var tw="closure_uid_"+(1e9*Math.random()>>>0),pz=0;function gz(t,e,n){return t.call.apply(t.bind,arguments)}function mz(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ur(t,e,n){return(ur=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gz:mz).apply(null,arguments)}function qm(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function kn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function jo(){this.s=this.s,this.o=this.o}jo.prototype.s=!1,jo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function fz(t){Object.prototype.hasOwnProperty.call(t,tw)&&t[tw]||(t[tw]=++pz)}(this)},jo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xN=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function nw(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function MN(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if($m(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function cr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}cr.prototype.h=function(){this.defaultPrevented=!0};var yz=function(){if(!ke.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};ke.addEventListener("test",n,e),ke.removeEventListener("test",n,e)}catch{}return t}();function Hh(t){return/^[\s\xa0]*$/.test(t)}function zm(){var t=ke.navigator;return t&&(t=t.userAgent)?t:""}function gs(t){return-1!=zm().indexOf(t)}function rw(t){return rw[" "](t),t}rw[" "]=function(){};var sw,t,Iz=gs("Opera"),ol=gs("Trident")||gs("MSIE"),kN=gs("Edge"),iw=kN||ol,ON=gs("Gecko")&&!(-1!=zm().toLowerCase().indexOf("webkit")&&!gs("Edge"))&&!(gs("Trident")||gs("MSIE"))&&!gs("Edge"),Ez=-1!=zm().toLowerCase().indexOf("webkit")&&!gs("Edge");function LN(){var t=ke.document;return t?t.documentMode:void 0}e:{var ow="",aw=(t=zm(),ON?/rv:([^\);]+)(\)|;)/.exec(t):kN?/Edge\/([\d\.]+)/.exec(t):ol?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Ez?/WebKit\/(\S+)/.exec(t):Iz?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(aw&&(ow=aw?aw[1]:""),ol){var uw=LN();if(null!=uw&&uw>parseFloat(ow)){sw=String(uw);break e}}sw=ow}var wz=ke.document&&ol&&(LN()||parseInt(sw,10))||void 0;function $h(t,e){if(cr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ON){e:{try{rw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Tz[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&$h.$.h.call(this)}}kn($h,cr);var Tz={2:"touch",3:"pen",4:"mouse"};$h.prototype.h=function(){$h.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var qh="closure_listenable_"+(1e6*Math.random()|0),Dz=0;function Az(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Dz,this.fa=this.ia=!1}function Gm(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function lw(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function VN(t){const e={};for(const n in t)e[n]=t[n];return e}const BN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function UN(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<BN.length;s++)n=BN[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Wm(t){this.src=t,this.g={},this.h=0}function dw(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=xN(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Gm(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function hw(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}Wm.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=hw(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new Az(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var fw="closure_lm_"+(1e6*Math.random()|0),pw={};function jN(t,e,n,r,i){if(r&&r.once)return $N(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)jN(t,e[s],n,r,i);return null}return n=yw(n),t&&t[qh]?t.O(e,n,jh(r)?!!r.capture:!!r,i):HN(t,e,n,!1,r,i)}function HN(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=jh(i)?!!i.capture:!!i,a=mw(t);if(a||(t[fw]=a=new Wm(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function bz(){const e=Sz;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)yz||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(zN(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function $N(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)$N(t,e[s],n,r,i);return null}return n=yw(n),t&&t[qh]?t.P(e,n,jh(r)?!!r.capture:!!r,i):HN(t,e,n,!0,r,i)}function qN(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)qN(t,e[s],n,r,i);else r=jh(r)?!!r.capture:!!r,n=yw(n),t&&t[qh]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=hw(s=t.g[e],n,r,i))&&(Gm(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=mw(t))&&(e=t.g[e.toString()],t=-1,e&&(t=hw(e,n,r,i)),(n=-1<t?e[t]:null)&&gw(n))}function gw(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[qh])dw(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(zN(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mw(e))?(dw(n,t),0==n.h&&(n.src=null,e[fw]=null)):Gm(t)}}}function zN(t){return t in pw?pw[t]:pw[t]="on"+t}function Sz(t,e){if(t.fa)t=!0;else{e=new $h(e,this);var n=t.listener,r=t.la||t.src;t.ia&&gw(t),t=n.call(r,e)}return t}function mw(t){return(t=t[fw])instanceof Wm?t:null}var _w="__closure_events_fn_"+(1e9*Math.random()>>>0);function yw(t){return"function"==typeof t?t:(t[_w]||(t[_w]=function(e){return t.handleEvent(e)}),t[_w])}function On(){jo.call(this),this.i=new Wm(this),this.S=this,this.J=null}function Gn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new cr(e,t);else if(e instanceof cr)e.target=e.target||t;else{var i=e;UN(e=new cr(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Zm(o,r,!0,e)&&i}if(i=Zm(o=e.g=t,r,!0,e)&&i,i=Zm(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Zm(o=e.g=n[s],r,!1,e)&&i}function Zm(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&dw(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}kn(On,jo),On.prototype[qh]=!0,On.prototype.removeEventListener=function(t,e,n,r){qN(this,t,e,n,r)},On.prototype.N=function(){if(On.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Gm(n[r]);delete t.g[e],t.h--}}this.J=null},On.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},On.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var vw=ke.JSON.stringify;function Pz(){var t=Iw;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var GN=new class Rz{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new xz,t=>t.reset());class xz{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Mz(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function kz(t){ke.setTimeout(()=>{throw t},0)}let zh,Gh=!1,Iw=new class Nz{constructor(){this.h=this.g=null}add(e,n){const r=GN.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},WN=()=>{const t=ke.Promise.resolve(void 0);zh=()=>{t.then(Oz)}};var Oz=()=>{for(var t;t=Pz();){try{t.h.call(t.g)}catch(n){kz(n)}var e=GN;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Gh=!1};function Km(t,e){On.call(this),this.h=t||1,this.g=e||ke,this.j=ur(this.qb,this),this.l=Date.now()}function Ew(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function ww(t,e,n){if("function"==typeof t)n&&(t=ur(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ur(t.handleEvent,t)}return 2147483647<Number(e)?-1:ke.setTimeout(t,e||0)}function ZN(t){t.g=ww(()=>{t.g=null,t.i&&(t.i=!1,ZN(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}kn(Km,On),(ce=Km.prototype).ga=!1,ce.T=null,ce.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Gn(this,"tick"),this.ga&&(Ew(this),this.start()))}},ce.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ce.N=function(){Km.$.N.call(this),Ew(this),delete this.g};class Lz extends jo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ZN(this)}N(){super.N(),this.g&&(ke.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wh(t){jo.call(this),this.h=t,this.g={}}kn(Wh,jo);var KN=[];function QN(t,e,n,r){Array.isArray(n)||(n&&(KN[0]=n.toString()),n=KN);for(var i=0;i<n.length;i++){var s=jN(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function YN(t){lw(t.g,function(e,n){this.g.hasOwnProperty(n)&&gw(e)},t),t.g={}}function Qm(){this.g=!0}function al(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Uz(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return vw(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Wh.prototype.N=function(){Wh.$.N.call(this),YN(this)},Wh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qm.prototype.Ea=function(){this.g=!1},Qm.prototype.info=function(){};var su={},JN=null;function Ym(){return JN=JN||new On}function XN(t){cr.call(this,su.Ta,t)}function Zh(t){const e=Ym();Gn(e,new XN(e))}function ex(t,e){cr.call(this,su.STAT_EVENT,t),this.stat=e}function Ar(t){const e=Ym();Gn(e,new ex(e,t))}function tx(t,e){cr.call(this,su.Ua,t),this.size=e}function Kh(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ke.setTimeout(function(){t()},e)}su.Ta="serverreachability",kn(XN,cr),su.STAT_EVENT="statevent",kn(ex,cr),su.Ua="timingevent",kn(tx,cr);var Jm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},nx={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Tw(){}function ix(){}Tw.prototype.h=null;var Cw,Qh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Dw(){cr.call(this,"d")}function Aw(){cr.call(this,"c")}function Xm(){}function Yh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Wh(this),this.P=jz,this.V=new Km(t=iw?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new sx}function sx(){this.i=null,this.g="",this.h=!1}kn(Dw,cr),kn(Aw,cr),kn(Xm,Tw),Xm.prototype.g=function(){return new XMLHttpRequest},Xm.prototype.i=function(){return{}},Cw=new Xm;var jz=45e3,ox={},bw={};function Sw(t,e,n){t.L=1,t.A=r_(Ks(e)),t.u=n,t.S=!0,ax(t,null)}function ax(t,e){t.G=Date.now(),Jh(t),t.B=Ks(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),_x(n.i,"t",r),t.o=0,n=t.l.J,t.h=new sx,t.g=jx(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Lz(ur(t.Pa,t,t.g),t.O)),QN(t.U,t.g,"readystatechange",t.nb),e=t.I?VN(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Zh(),function Fz(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var d=a[c].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");o=2<=g.length&&"type"==g[1]?o+(p+"=")+d+"&":o+(p+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.v,t.B,t.m,t.W,t.u)}function ux(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function cx(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Hz(t,n),i==bw){4==e&&(t.s=4,Ar(14),r=!1),al(t.j,t.m,null,"[Incomplete Response]");break}if(i==ox){t.s=4,Ar(15),al(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}al(t.j,t.m,i,null),Rw(t,i)}ux(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,Ar(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lw(e),e.M=!0,Ar(11))):(al(t.j,t.m,n,"[Invalid Chunked Response]"),ou(t),Xh(t))}function Hz(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?bw:(n=Number(e.substring(n,r)),isNaN(n)?ox:(r+=1)+n>e.length?bw:(e=e.slice(r,r+n),t.o=r+n,e))}function Jh(t){t.Y=Date.now()+t.P,lx(t,t.P)}function lx(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Kh(ur(t.lb,t),e)}function e_(t){t.C&&(ke.clearTimeout(t.C),t.C=null)}function Xh(t){0==t.l.H||t.J||Fx(t.l,t)}function ou(t){e_(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Ew(t.V),YN(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Rw(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Pw(n.i,t)))if(!t.K&&Pw(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;c_(n),a_(n)}Ow(n),Ar(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Kh(ur(n.ib,n),6e3));if(1>=Ix(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else uu(n,11)}else if((t.K||n.g==t)&&c_(n),!Hh(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let d=i[e];if(n.V=d[0],d=d[1],2==n.H)if("c"==d[0]){n.K=d[1],n.pa=d[2];const p=d[3];null!=p&&(n.ra=p,n.l.info("VER="+n.ra));const g=d[4];null!=g&&(n.Ga=g,n.l.info("SVER="+n.Ga));const _=d[5];null!=_&&"number"==typeof _&&0<_&&(n.L=r=1.5*_,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const v=t.g;if(v){const E=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||-1==E.indexOf("spdy")&&-1==E.indexOf("quic")&&-1==E.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Nw(s,s.h),s.h=null))}if(r.F){const w=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,Bt(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=Ux(r,r.J?r.pa:null,r.Y),o.K){Ex(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(e_(a),Jh(a)),r.g=o}else Ox(r);0<n.j.length&&u_(n)}else"stop"!=d[0]&&"close"!=d[0]||uu(n,7);else 3==n.H&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?uu(n,7):kw(n):"noop"!=d[0]&&n.h&&n.h.Aa(d),n.A=0)}Zh()}catch{}}function dx(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if($m(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function qz(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if($m(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function $z(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if($m(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(ce=Yh.prototype).setTimeout=function(t){this.P=t},ce.nb=function(t){t=t.target;const e=this.M;e&&3==ms(t)?e.l():this.Pa(t)},ce.Pa=function(t){try{if(t==this.g)e:{const p=ms(this.g);var e=this.g.Ia();if(this.g.da(),!(3>p)&&(3!=p||iw||this.g&&(this.h.h||this.g.ja()||Rx(this.g)))){this.J||4!=p||7==e||Zh(),e_(this);var n=this.g.da();this.ca=n;t:if(ux(this)){var r=Rx(this.g);t="";var i=r.length,s=4==ms(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ou(this),Xh(this);var o="";break t}this.h.i=new ke.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function Vz(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,p,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hh(a)){var d=a;break t}}d=null}if(!(n=d)){this.i=!1,this.s=3,Ar(12),ou(this),Xh(this);break e}al(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rw(this,n)}this.S?(cx(this,p,o),iw&&this.i&&3==p&&(QN(this.U,this.V,"tick",this.mb),this.V.start())):(al(this.j,this.m,o,null),Rw(this,o)),4==p&&ou(this),this.i&&!this.J&&(4==p?Fx(this.l,this):(this.i=!1,Jh(this)))}else(function u9(t){const e={};t=(t.g&&2<=ms(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Hh(t[r]))continue;var n=Mz(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function Cz(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ar(12)):(this.s=0,Ar(13)),ou(this),Xh(this)}}}catch{}},ce.mb=function(){if(this.g){var t=ms(this.g),e=this.g.ja();this.o<e.length&&(e_(this),cx(this,t,e),this.i&&4!=t&&Jh(this))}},ce.cancel=function(){this.J=!0,ou(this)},ce.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function Bz(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Zh(),Ar(17)),ou(this),this.s=2,Xh(this)):lx(this,this.Y-t)};var hx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function au(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof au){this.h=t.h,t_(this,t.j),this.s=t.s,this.g=t.g,n_(this,t.m),this.l=t.l;var e=t.i,n=new nf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),fx(this,n),this.o=t.o}else t&&(e=String(t).match(hx))?(this.h=!1,t_(this,e[1]||"",!0),this.s=ef(e[2]||""),this.g=ef(e[3]||"",!0),n_(this,e[4]),this.l=ef(e[5]||"",!0),fx(this,e[6]||"",!0),this.o=ef(e[7]||"")):(this.h=!1,this.i=new nf(null,this.h))}function Ks(t){return new au(t)}function t_(t,e,n){t.j=n?ef(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function n_(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function fx(t,e,n){e instanceof nf?(t.i=e,function Yz(t,e){e&&!t.j&&(Ho(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(gx(this,r),_x(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=tf(e,Kz)),t.i=new nf(e,t.h))}function Bt(t,e,n){t.i.set(e,n)}function r_(t){return Bt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ef(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function tf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Gz),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Gz(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}au.prototype.toString=function(){var t=[],e=this.j;e&&t.push(tf(e,px,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(tf(e,px,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(tf(n,"/"==n.charAt(0)?Zz:Wz,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",tf(n,Qz)),t.join("")};var px=/[#\/\?@]/g,Wz=/[#\?:]/g,Zz=/[#\?]/g,Kz=/[#\?@]/g,Qz=/#/g;function nf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ho(t){t.g||(t.g=new Map,t.h=0,t.i&&function zz(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function gx(t,e){Ho(t),e=ul(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function mx(t,e){return Ho(t),e=ul(t,e),t.g.has(e)}function _x(t,e,n){gx(t,e),0<n.length&&(t.i=null,t.g.set(ul(t,e),nw(n)),t.h+=n.length)}function ul(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function yx(t){this.l=t||Xz,t=ke.PerformanceNavigationTiming?0<(t=ke.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ke.g&&ke.g.Ka&&ke.g.Ka()&&ke.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ce=nf.prototype).add=function(t,e){Ho(this),this.i=null,t=ul(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},ce.forEach=function(t,e){Ho(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},ce.ta=function(){Ho(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},ce.Z=function(t){Ho(this);let e=[];if("string"==typeof t)mx(this,t)&&(e=e.concat(this.g.get(ul(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},ce.set=function(t,e){return Ho(this),this.i=null,mx(this,t=ul(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},ce.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},ce.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var Xz=10;function vx(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ix(t){return t.h?1:t.g?t.g.size:0}function Pw(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Nw(t,e){t.g?t.g.add(e):t.h=e}function Ex(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function wx(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return nw(t.i)}yx.prototype.cancel=function(){if(this.i=wx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var e9=class{stringify(t){return ke.JSON.stringify(t,void 0)}parse(t){return ke.JSON.parse(t,void 0)}};function t9(){this.g=new e9}function n9(t,e,n){const r=n||"";try{dx(t,function(i,s){let o=i;jh(i)&&(o=vw(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function i_(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function rf(t){this.l=t.ec||null,this.j=t.ob||!1}function s_(t,e){On.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=xw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kn(rf,Tw),rf.prototype.g=function(){return new s_(this.l,this.j)},rf.prototype.i=function(t){return function(){return t}}({}),kn(s_,On);var xw=0;function Tx(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function sf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,af(t)}function af(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(ce=s_.prototype).open=function(t,e){if(this.readyState!=xw)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,af(this)},ce.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ke).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ce.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sf(this)),this.readyState=xw},ce.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,af(this)),this.g&&(this.readyState=3,af(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ke.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tx(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},ce.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?sf(this):af(this),3==this.readyState&&Tx(this)}},ce.Za=function(t){this.g&&(this.response=this.responseText=t,sf(this))},ce.Ya=function(t){this.g&&(this.response=t,sf(this))},ce.ka=function(){this.g&&sf(this)},ce.setRequestHeader=function(t,e){this.v.append(t,e)},ce.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},ce.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(s_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var i9=ke.JSON.parse;function Xt(t){On.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Dx,this.L=this.M=!1}kn(Xt,On);var Dx="",s9=/^https?$/i,o9=["POST","PUT"];function Ax(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Cx(t),o_(t)}function Cx(t){t.F||(t.F=!0,Gn(t,"complete"),Gn(t,"error"))}function bx(t){if(t.h&&typeof ew<"u"&&(!t.C[1]||4!=ms(t)||2!=t.da()))if(t.v&&4==ms(t))ww(t.La,0,t);else if(Gn(t,"readystatechange"),4==ms(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(hx)[1]||null;!i&&ke.self&&ke.self.location&&(i=ke.self.location.protocol.slice(0,-1)),r=!s9.test(i?i.toLowerCase():"")}n=r}if(n)Gn(t,"complete"),Gn(t,"success");else{t.m=6;try{var s=2<ms(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Cx(t)}}finally{o_(t)}}}function o_(t,e){if(t.g){Sx(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Gn(t,"ready");try{n.onreadystatechange=r}catch{}}}function Sx(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ke.clearTimeout(t.A),t.A=null)}function ms(t){return t.g?t.g.readyState:0}function Rx(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Dx:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Px(t){let e="";return lw(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function Mw(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Px(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Bt(t,e,n))}function uf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Nx(t){this.Ga=0,this.j=[],this.l=new Qm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=uf("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=uf("baseRetryDelayMs",5e3,t),this.hb=uf("retryDelaySeedMs",1e4,t),this.eb=uf("forwardChannelMaxRetries",2,t),this.xa=uf("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new yx(t&&t.concurrentRequestLimit),this.Ja=new t9,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function kw(t){if(xx(t),3==t.H){var e=t.W++,n=Ks(t.I);if(Bt(n,"SID",t.K),Bt(n,"RID",e),Bt(n,"TYPE","terminate"),cf(t,n),(e=new Yh(t,t.l,e)).L=2,e.A=r_(Ks(n)),n=!1,ke.navigator&&ke.navigator.sendBeacon)try{n=ke.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ke.Image&&((new Image).src=e.A,n=!0),n||(e.g=jx(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Jh(e)}Bx(t)}function a_(t){t.g&&(Lw(t),t.g.cancel(),t.g=null)}function xx(t){a_(t),t.u&&(ke.clearTimeout(t.u),t.u=null),c_(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ke.clearTimeout(t.m),t.m=null)}function u_(t){if(!vx(t.i)&&!t.m){t.m=!0;var e=t.Na;zh||WN(),Gh||(zh(),Gh=!0),Iw.add(e,t),t.C=0}}function Mx(t,e){var n;n=e?e.m:t.W++;const r=Ks(t.I);Bt(r,"SID",t.K),Bt(r,"RID",n),Bt(r,"AID",t.V),cf(t,r),t.o&&t.s&&Mw(r,t.o,t.s),n=new Yh(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=kx(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Nw(t.i,n),Sw(n,r,e)}function cf(t,e){t.na&&lw(t.na,function(n,r){Bt(e,r,n)}),t.h&&dx({},function(n,r){Bt(e,r,n)})}function kx(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ur(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let d=i[c].g;const p=i[c].map;if(d-=s,0>d)s=Math.max(0,i[c].g-100),a=!1;else try{n9(p,o,"req"+d+"_")}catch{r&&r(p)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Ox(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;zh||WN(),Gh||(zh(),Gh=!0),Iw.add(e,t),t.A=0}}function Ow(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Kh(ur(t.Ma,t),Vx(t,t.A)),t.A++,0))}function Lw(t){null!=t.B&&(ke.clearTimeout(t.B),t.B=null)}function Lx(t){t.g=new Yh(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ks(t.wa);Bt(e,"RID","rpc"),Bt(e,"SID",t.K),Bt(e,"AID",t.V),Bt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Bt(e,"TO",t.qa),Bt(e,"TYPE","xmlhttp"),cf(t,e),t.o&&t.s&&Mw(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=r_(Ks(e)),n.u=null,n.S=!0,ax(n,t)}function c_(t){null!=t.v&&(ke.clearTimeout(t.v),t.v=null)}function Fx(t,e){var n=null;if(t.g==e){c_(t),Lw(t),t.g=null;var r=2}else{if(!Pw(t.i,e))return;n=e.F,Ex(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;Gn(r=Ym(),new tx(r,n)),u_(t)}else Ox(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function c9(t,e){return!(Ix(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Kh(ur(t.Na,t,e),Vx(t,t.C)),t.C++,0)))}(t,e)||2==r&&Ow(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:uu(t,5);break;case 4:uu(t,10);break;case 3:uu(t,6);break;default:uu(t,2)}}function Vx(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function uu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=ur(t.pb,t);n||(n=new au("//www.google.com/images/cleardot.gif"),ke.location&&"http"==ke.location.protocol||t_(n,"https"),r_(n)),function r9(t,e){const n=new Qm;if(ke.Image){const r=new Image;r.onload=qm(i_,n,r,"TestLoadImage: loaded",!0,e),r.onerror=qm(i_,n,r,"TestLoadImage: error",!1,e),r.onabort=qm(i_,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=qm(i_,n,r,"TestLoadImage: timeout",!1,e),ke.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ar(2);t.H=0,t.h&&t.h.za(e),Bx(t),xx(t)}function Bx(t){if(t.H=0,t.ma=[],t.h){const e=wx(t.i);(0!=e.length||0!=t.j.length)&&(MN(t.ma,e),MN(t.ma,t.j),t.i.i.length=0,nw(t.j),t.j.length=0),t.h.ya()}}function Ux(t,e,n){var r=n instanceof au?Ks(n):new au(n);if(""!=r.g)e&&(r.g=e+"."+r.g),n_(r,r.m);else{var i=ke.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new au(null);r&&t_(s,r),e&&(s.g=e),i&&n_(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&Bt(r,n,e),Bt(r,"VER",t.ra),cf(t,r),r}function jx(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xt(t.Ha&&!t.va?new rf({ob:n}):t.va)).Oa(t.J),e}function Hx(){}function l_(){if(ol&&!(10<=Number(wz)))throw Error("Environmental error: no available transport.")}function Kr(t,e){On.call(this),this.g=new Nx(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Hh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hh(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new cl(this)}function $x(t){Dw.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function qx(){Aw.call(this),this.status=1}function cl(t){this.g=t}function Vi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Fw(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function mt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(ce=Xt.prototype).Oa=function(t){this.M=t},ce.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Cw.g(),this.C=function rx(t){return t.h||(t.h=t.i())}(this.u?this.u:Cw),this.g.onreadystatechange=ur(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void Ax(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=ke.FormData&&t instanceof ke.FormData,!(0<=xN(o9,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Sx(this),0<this.B&&((this.L=function a9(t){return ol&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ur(this.ua,this)):this.A=ww(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Ax(this,s)}},ce.ua=function(){typeof ew<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gn(this,"timeout"),this.abort(8))},ce.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Gn(this,"complete"),Gn(this,"abort"),o_(this))},ce.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),o_(this,!0)),Xt.$.N.call(this)},ce.La=function(){this.s||(this.G||this.v||this.l?bx(this):this.kb())},ce.kb=function(){bx(this)},ce.isActive=function(){return!!this.g},ce.da=function(){try{return 2<ms(this)?this.g.status:-1}catch{return-1}},ce.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ce.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),i9(e)}},ce.Ia=function(){return this.m},ce.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ce=Nx.prototype).ra=8,ce.H=1,ce.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Yh(this,this.l,t);let s=this.s;if(this.U&&(s?(s=VN(s),UN(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=kx(this,i,e),Bt(n=Ks(this.I),"RID",t),Bt(n,"CVER",22),this.F&&Bt(n,"X-HTTP-Session-Id",this.F),cf(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Px(s)))+"&"+e:this.o&&Mw(n,this.o,s)),Nw(this.i,i),this.bb&&Bt(n,"TYPE","init"),this.P?(Bt(n,"$req",e),Bt(n,"SID","null"),i.aa=!0,Sw(i,n,null)):Sw(i,n,e),this.H=2}}else 3==this.H&&(t?Mx(this,t):0==this.j.length||vx(this.i)||Mx(this))},ce.Ma=function(){if(this.u=null,Lx(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Kh(ur(this.jb,this),t)}},ce.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ar(10),a_(this),Lx(this))},ce.ib=function(){null!=this.v&&(this.v=null,a_(this),Ow(this),Ar(19))},ce.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ar(2)):(this.l.info("Failed to ping google.com"),Ar(1))},ce.isActive=function(){return!!this.h&&this.h.isActive(this)},(ce=Hx.prototype).Ba=function(){},ce.Aa=function(){},ce.za=function(){},ce.ya=function(){},ce.isActive=function(){return!0},ce.Va=function(){},l_.prototype.g=function(t,e){return new Kr(t,e)},kn(Kr,On),Kr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ar(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Ux(t,null,t.Y),u_(t)},Kr.prototype.close=function(){kw(this.g)},Kr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=vw(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&u_(e)},Kr.prototype.N=function(){this.g.h=null,delete this.j,kw(this.g),delete this.g,Kr.$.N.call(this)},kn($x,Dw),kn(qx,Aw),kn(cl,Hx),cl.prototype.Ba=function(){Gn(this.g,"a")},cl.prototype.Aa=function(t){Gn(this.g,new $x(t))},cl.prototype.za=function(t){Gn(this.g,new qx)},cl.prototype.ya=function(){Gn(this.g,"b")},kn(Vi,function l9(){this.blockSize=-1}),Vi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Vi.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)Fw(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Fw(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Fw(this,r),i=0;break}}this.h=i,this.i+=e},Vi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var d9={};function Vw(t){return-128<=t&&128>t?function vz(t,e){var n=d9;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new mt([0|e],0>e?-1:0)}):new mt([0|t],0>t?-1:0)}function _s(t){if(isNaN(t)||!isFinite(t))return ll;if(0>t)return Wn(_s(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Bw;return new mt(e,0)}var Bw=4294967296,ll=Vw(0),Uw=Vw(1),Gx=Vw(16777216);function Qs(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function vi(t){return-1==t.h}function Wn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new mt(n,~t.h).add(Uw)}function d_(t,e){return t.add(Wn(e))}function h_(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function lf(t,e){this.g=t,this.h=e}function f_(t,e){if(Qs(e))throw Error("division by zero");if(Qs(t))return new lf(ll,ll);if(vi(t))return e=f_(Wn(t),e),new lf(Wn(e.g),Wn(e.h));if(vi(e))return e=f_(t,Wn(e)),new lf(Wn(e.g),e.h);if(30<t.g.length){if(vi(t)||vi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Uw,r=e;0>=r.X(t);)n=Wx(n),r=Wx(r);var i=dl(n,1),s=dl(r,1);for(r=dl(r,2),n=dl(n,2);!Qs(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=dl(r,1),n=dl(n,1)}return e=d_(t,i.R(e)),new lf(i,e)}for(i=ll;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=_s(n)).R(e);vi(o)||0<o.X(t);)o=(s=_s(n-=r)).R(e);Qs(s)&&(s=Uw),i=i.add(s),t=d_(t,o)}return new lf(i,t)}function Wx(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new mt(n,t.h)}function dl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new mt(i,t.h)}(ce=mt.prototype).ea=function(){if(vi(this))return-Wn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Bw+r)*e,e*=Bw}return t},ce.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Qs(this))return"0";if(vi(this))return"-"+Wn(this).toString(t);for(var e=_s(Math.pow(t,6)),n=this,r="";;){var i=f_(n,e).g,s=((0<(n=d_(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Qs(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ce.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},ce.X=function(t){return vi(t=d_(this,t))?-1:Qs(t)?0:1},ce.abs=function(){return vi(this)?Wn(this):this},ce.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new mt(n,-2147483648&n[n.length-1]?-1:0)},ce.R=function(t){if(Qs(this)||Qs(t))return ll;if(vi(this))return vi(t)?Wn(this).R(Wn(t)):Wn(Wn(this).R(t));if(vi(t))return Wn(this.R(Wn(t)));if(0>this.X(Gx)&&0>t.X(Gx))return _s(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,c=65535&t.D(i);n[2*r+2*i]+=o*c,h_(n,2*r+2*i),n[2*r+2*i+1]+=s*c,h_(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,h_(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,h_(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new mt(n,0)},ce.gb=function(t){return f_(this,t).h},ce.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new mt(n,this.h&t.h)},ce.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new mt(n,this.h|t.h)},ce.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new mt(n,this.h^t.h)},l_.prototype.createWebChannel=l_.prototype.g,Kr.prototype.send=Kr.prototype.u,Kr.prototype.open=Kr.prototype.m,Kr.prototype.close=Kr.prototype.close,Jm.NO_ERROR=0,Jm.TIMEOUT=8,Jm.HTTP_ERROR=6,nx.COMPLETE="complete",ix.EventType=Qh,Qh.OPEN="a",Qh.CLOSE="b",Qh.ERROR="c",Qh.MESSAGE="d",On.prototype.listen=On.prototype.O,Xt.prototype.listenOnce=Xt.prototype.P,Xt.prototype.getLastError=Xt.prototype.Sa,Xt.prototype.getLastErrorCode=Xt.prototype.Ia,Xt.prototype.getStatus=Xt.prototype.da,Xt.prototype.getResponseJson=Xt.prototype.Wa,Xt.prototype.getResponseText=Xt.prototype.ja,Xt.prototype.send=Xt.prototype.ha,Xt.prototype.setWithCredentials=Xt.prototype.Oa,Vi.prototype.digest=Vi.prototype.l,Vi.prototype.reset=Vi.prototype.reset,Vi.prototype.update=Vi.prototype.j,mt.prototype.add=mt.prototype.add,mt.prototype.multiply=mt.prototype.R,mt.prototype.modulo=mt.prototype.gb,mt.prototype.compare=mt.prototype.X,mt.prototype.toNumber=mt.prototype.ea,mt.prototype.toString=mt.prototype.toString,mt.prototype.getBits=mt.prototype.D,mt.fromNumber=_s,mt.fromString=function zx(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Wn(zx(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=_s(Math.pow(e,8)),r=ll,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=_s(Math.pow(e,s)),r=r.R(s).add(_s(o))):r=(r=r.R(n)).add(_s(o))}return r};var h9=Fi.createWebChannelTransport=function(){return new l_},f9=Fi.getStatEventTarget=function(){return Ym()},jw=Fi.ErrorCode=Jm,p9=Fi.EventType=nx,g9=Fi.Event=su,Zx=Fi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},p_=(Fi.FetchXmlHttpFactory=rf,Fi.WebChannel=ix),m9=Fi.XhrIo=Xt,_9=Fi.Md5=Vi,hl=Fi.Integer=mt;const Kx="@firebase/firestore";class Ln{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");let fl="10.7.0";const $o=new ps.Yd("@firebase/firestore");function pl(){return $o.logLevel}function J(t,...e){if($o.logLevel<=ps.in.DEBUG){const n=e.map(Hw);$o.debug(`Firestore (${fl}): ${t}`,...n)}}function on(t,...e){if($o.logLevel<=ps.in.ERROR){const n=e.map(Hw);$o.error(`Firestore (${fl}): ${t}`,...n)}}function Fr(t,...e){if($o.logLevel<=ps.in.WARN){const n=e.map(Hw);$o.warn(`Firestore (${fl}): ${t}`,...n)}}function Hw(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function he(t="Unexpected state"){const e=`FIRESTORE (${fl}) INTERNAL ASSERTION FAILED: `+t;throw on(e),new Error(e)}function Ie(t,e){t||he()}function re(t,e){return t}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Dt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Qx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class I9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ln.UNAUTHENTICATED))}shutdown(){}}class E9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class w9{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,z.Z)(function*(){yield d.promise,yield s(r.currentUser)}))},c=d=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie("string"==typeof r.accessToken),new Qx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ie(null===e||"string"==typeof e),new Ln(e)}}class T9{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class D9{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new T9(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie("string"==typeof n.token),this.R=n.token,new Yx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function C9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Jx{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=C9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function gl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Xx(t){return t+"\0"}class Ut{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ut(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ut(0,0))}static max(){return new Ee(new Ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class df{constructor(e,n,r){void 0===n?n=0:n>e.length&&he(),void 0===r?r=e.length-n:r>e.length-n&&he(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===df.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof df?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class it extends df{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new it(n)}static emptyPath(){return new it([])}}const b9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends df{construct(e,n,r){return new jt(e,n,r)}static isValidIdentifier(e){return b9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new Q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}class oe{constructor(e){this.path=e}static fromPath(e){return new oe(it.fromString(e))}static fromName(e){return new oe(it.fromString(e).popFirst(5))}static empty(){return new oe(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===it.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new it(e.slice()))}}class ml{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function $w(t){return t.fields.find(e=>2===e.kind)}function cu(t){return t.fields.filter(e=>2!==e.kind)}ml.UNKNOWN_ID=-1;class lu{constructor(e,n){this.fieldPath=e,this.kind=n}}class _l{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new _l(0,Qr.min())}}function eM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(1e9===r?new Ut(n+1,0):new Ut(n,r));return new Qr(i,oe.empty(),e)}function tM(t){return new Qr(t.readTime,t.key,-1)}class Qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qr(Ee.min(),oe.empty(),-1)}static max(){return new Qr(Ee.max(),oe.empty(),-1)}}function qw(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=oe.comparator(t.documentKey,e.documentKey),0!==n?n:Ne(t.largestBatchId,e.largestBatchId))}const nM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qo(t){return zw.apply(this,arguments)}function zw(){return zw=(0,z.Z)(function*(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==nM)throw t;J("LocalStore","Unexpectedly lost primary lease")}),zw.apply(this,arguments)}class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(i=>i?N.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new N((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(p=>{o[d]=p,++a,a===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new N((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class g_{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Rn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new hf(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Gw(r.target.error);this.V.reject(new hf(e,i))}}static open(e,n,r,i){try{return new g_(n,e.transaction(i,r))}catch(s){throw new hf(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(J("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new N9(n)}}class Bi{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===Bi.S((0,Dt.z$)())&&on("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return J("SimpleDb","Removing database:",e),du(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Dt.hl)())return!1;if(Bi.C())return!0;const e=(0,Dt.z$)(),n=Bi.S(e),r=0<n&&n<10,i=Bi.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var n=this;return(0,z.Z)(function*(){return n.db||(J("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new hf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Q(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Q(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new hf(e,a))},s.onupgradeneeded=o=>{J("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.N(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{J("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=r=>n.B(r)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,z.Z)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.O(e);const c=g_.open(s.db,e,o?"readonly":"readwrite",r),d=i(c).next(p=>(c.g(),p)).catch(p=>(c.abort(p),N.reject(p))).toPromise();return d.catch(()=>{}),yield c.m,d}catch(c){const d=c,p="FirebaseError"!==d.name&&a<3;if(J("SimpleDb","Transaction failed with error:",d.message,"Retrying:",p),s.close(),!p)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class P9{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return du(this.k.delete())}}class hf extends Q{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function zo(t){return"IndexedDbTransactionError"===t.name}class N9{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(J("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(J("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),du(r)}add(e){return J("SimpleDb","ADD",this.store.name,e,e),du(this.store.add(e))}get(e){return du(this.store.get(e)).next(n=>(void 0===n&&(n=null),J("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return J("SimpleDb","DELETE",this.store.name,e),du(this.store.delete(e))}count(){return J("SimpleDb","COUNT",this.store.name),du(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new N((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new N((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){J("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new N((r,i)=>{n.onerror=s=>{const o=Gw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new N((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new P9(a),d=n(a.primaryKey,a.value,c);if(d instanceof N){const p=d.catch(g=>(c.done(),N.reject(g)));r.push(p)}c.isDone?i():null===c.$?a.continue():a.continue(c.$)}}).next(()=>N.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function du(t){return new N((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=Gw(r.target.error);n(i)}})}let iM=!1;function Gw(t){const e=Bi.S((0,Dt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iM||(iM=!0,setTimeout(()=>{throw r},0)),r}}return t}class x9{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;J("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,z.Z)(function*(){n.task=null;try{J("IndexBackiller",`Documents written: ${yield n.X.te()}`)}catch(r){zo(r)?J("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield qo(r)}yield n.ee(6e4)}))}}class M9{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,z.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.ne(r,e))})()}ne(e,n){const r=new Set;let i=n,s=!0;return N.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return J("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(J("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=tM(s);qw(o,r)>0&&(r=o)}),new Qr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Yr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function ff(t){return null==t}function pf(t){return 0===t&&1/t==-1/0}function sM(t){return"number"==typeof t&&Number.isInteger(t)&&!pf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function lr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=oM(e)),e=k9(t.get(n),e);return oM(e)}function k9(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function oM(t){return t+"\x01\x01"}function ys(t){const e=t.length;if(Ie(e>=2),2===e)return Ie("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),it.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&he(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:he()}s=o+2}return new it(r)}const aM=["userId","batchId"];function m_(t,e){return[t,lr(e)]}function uM(t,e,n){return[t,lr(e),n]}const O9={},L9=["prefixPath","collectionGroup","readTime","documentId"],F9=["prefixPath","collectionGroup","documentId"],V9=["collectionGroup","readTime","prefixPath","documentId"],B9=["canonicalId","targetId"],U9=["targetId","path"],j9=["path","targetId"],H9=["collectionId","parent"],$9=["indexId","uid"],q9=["uid","sequenceNumber"],z9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],G9=["indexId","uid","orderedDocumentKey"],W9=["userId","collectionPath","documentId"],Z9=["userId","collectionPath","largestBatchId"],K9=["userId","collectionGroup","largestBatchId"],cM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Q9=[...cM,"documentOverlays"],lM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dM=lM,Y9=[...dM,"indexConfiguration","indexState","indexEntries"];class Ww extends rM{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Fn(t,e){const n=re(t);return Bi.M(n.ae,e)}function hM(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Go(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Nt{constructor(e,n){this.comparator=e,this.root=n||Zn.EMPTY}insert(e,n){return new Nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new __(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new __(this.root,e,this.comparator,!1)}getReverseIterator(){return new __(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new __(this.root,e,this.comparator,!0)}}class __{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Zn.RED,this.left=i??Zn.EMPTY,this.right=s??Zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Zn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Zn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}}Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1,Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Zn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class It{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pM(this.data.getIterator())}getIteratorFrom(e){return new pM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class pM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yl(t){return t.hasNext()?t.getNext():void 0}class Vr{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new Vr([])}unionWith(e){let n=new It(jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class gM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gM("Invalid base64 string: "+s):s}}(e);return new Pn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const X9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wo(t){if(Ie(!!t),"string"==typeof t){let e=0;const n=X9.exec(t);if(Ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:en(t.seconds),nanos:en(t.nanos)}}function en(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ys(t){return"string"==typeof t?Pn.fromBase64String(t):Pn.fromUint8Array(t)}function y_(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function v_(t){const e=t.mapValue.fields.__previous_value__;return y_(e)?v_(e):e}function gf(t){const e=Wo(t.mapValue.fields.__local_write_time__.timestampValue);return new Ut(e.seconds,e.nanos)}class e3{constructor(e,n,r,i,s,o,a,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d}}class Zo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Zo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zo&&e.projectId===this.projectId&&e.database===this.database}}const Ko={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},I_={nullValue:"NULL_VALUE"};function Qo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?y_(t)?4:vM(t)?9007199254740991:10:he()}function vs(t,e){if(t===e)return!0;const n=Qo(t);if(n!==Qo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gf(t).isEqual(gf(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Wo(i.timestampValue),a=Wo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,Ys(t.bytesValue).isEqual(Ys(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return en(i.geoPointValue.latitude)===en(s.geoPointValue.latitude)&&en(i.geoPointValue.longitude)===en(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return en(i.integerValue)===en(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=en(i.doubleValue),a=en(s.doubleValue);return o===a?pf(o)===pf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return gl(t.arrayValue.values||[],e.arrayValue.values||[],vs);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(hM(o)!==hM(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!vs(o[c],a[c])))return!1;return!0}(t,e);default:return he()}var s}function mf(t,e){return void 0!==(t.values||[]).find(n=>vs(n,e))}function Yo(t,e){if(t===e)return 0;const n=Qo(t),r=Qo(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=en(s.integerValue||s.doubleValue),c=en(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return mM(t.timestampValue,e.timestampValue);case 4:return mM(gf(t),gf(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ys(s),c=Ys(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){const p=Ne(a[d],c[d]);if(0!==p)return p}return Ne(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ne(en(s.latitude),en(o.latitude));return 0!==a?a:Ne(en(s.longitude),en(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],c=o.values||[];for(let d=0;d<a.length&&d<c.length;++d){const p=Yo(a[d],c[d]);if(p)return p}return Ne(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ko.mapValue&&o===Ko.mapValue)return 0;if(s===Ko.mapValue)return 1;if(o===Ko.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),d=o.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const _=Ne(c[g],p[g]);if(0!==_)return _;const v=Yo(a[c[g]],d[p[g]]);if(0!==v)return v}return Ne(c.length,p.length)}(t.mapValue,e.mapValue);default:throw he()}}function mM(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ne(t,e);const n=Wo(t),r=Wo(e),i=Ne(n.seconds,r.seconds);return 0!==i?i:Ne(n.nanos,r.nanos)}function vl(t){return Zw(t)}function Zw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ys(t.bytesValue).toBase64():"referenceValue"in t?oe.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Zw(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Zw(n.fields[o])}`;return i+"}"}(t.mapValue):he()}function hu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kw(t){return!!t&&"integerValue"in t}function _f(t){return!!t&&"arrayValue"in t}function _M(t){return!!t&&"nullValue"in t}function yM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function w_(t){return!!t&&"mapValue"in t}function yf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Go(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function vM(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function t3(t){return"nullValue"in t?I_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?hu(Zo.empty(),oe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:he()}function n3(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?hu(Zo.empty(),oe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ko:he()}function IM(t,e){const n=Yo(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function EM(t,e){const n=Yo(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!w_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yf(n)}setAll(e){let n=jt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=yf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());w_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];w_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Go(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Kn(yf(this.value))}}function wM(t){const e=[];return Go(t.fields,(n,r)=>{const i=new jt([n]);if(w_(r)){const s=wM(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vr(e)}class Ht{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ht(e,0,Ee.min(),Ee.min(),Ee.min(),Kn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ht(e,1,n,Ee.min(),r,i,0)}static newNoDocument(e,n){return new Ht(e,2,n,Ee.min(),Ee.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,Ee.min(),Ee.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jo{constructor(e,n){this.position=e,this.inclusive=n}}function TM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?oe.comparator(oe.fromName(o.referenceValue),n.key):Yo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function DM(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vs(t.position[n],e.position[n]))return!1;return!0}class vf{constructor(e,n="asc"){this.field=e,this.dir=n}}function r3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class AM{}class et extends AM{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new i3(e,n,r):"array-contains"===n?new a3(e,r):"in"===n?new NM(e,r):"not-in"===n?new u3(e,r):"array-contains-any"===n?new c3(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new s3(e,r):new o3(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Yo(n,this.value)):null!==n&&Qo(this.value)===Qo(n)&&this.matchesComparison(Yo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _t extends AM{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new _t(e,n)}matches(e){return Il(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Il(t){return"and"===t.op}function Qw(t){return"or"===t.op}function Yw(t){return CM(t)&&Il(t)}function CM(t){for(const e of t.filters)if(e instanceof _t)return!1;return!0}function Jw(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+vl(t.value);if(Yw(t))return t.filters.map(e=>Jw(e)).join(",");{const e=t.filters.map(n=>Jw(n)).join(",");return`${t.op}(${e})`}}function bM(t,e){return t instanceof et?(r=t,(i=e)instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&vs(r.value,i.value)):t instanceof _t?function(r,i){return i instanceof _t&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&bM(o,i.filters[a]),!0)}(t,e):void he();var r,i}function SM(t,e){const n=t.filters.concat(e);return _t.create(n,t.op)}function RM(t){return t instanceof et?`${(n=t).field.canonicalString()} ${n.op} ${vl(n.value)}`:t instanceof _t?function(n){return n.op.toString()+" {"+n.getFilters().map(RM).join(" ,")+"}"}(t):"Filter";var n}class i3 extends et{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class s3 extends et{constructor(e,n){super(e,"in",n),this.keys=PM(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class o3 extends et{constructor(e,n){super(e,"not-in",n),this.keys=PM(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PM(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>oe.fromName(r.referenceValue))}class a3 extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _f(n)&&mf(n.arrayValue,this.value)}}class NM extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&mf(this.value.arrayValue,n)}}class u3 extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(mf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!mf(this.value.arrayValue,n)}}class c3 extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_f(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mf(this.value.arrayValue,r))}}class l3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function Xw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new l3(t,e,n,r,i,s,o)}function fu(t){const e=re(t);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ff(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vl(r)).join(",")),e.ce=n}return e.ce}function If(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!r3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!DM(t.startAt,e.startAt)&&DM(t.endAt,e.endAt)}function T_(t){return oe.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function D_(t,e){return t.filters.filter(n=>n instanceof et&&n.field.isEqual(e))}function xM(t,e,n){let r=I_,i=!0;for(const s of D_(t,e)){let o=I_,a=!0;switch(s.op){case"<":case"<=":o=t3(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=I_}IM({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];IM({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function MM(t,e,n){let r=Ko,i=!0;for(const s of D_(t,e)){let o=Ko,a=!0;switch(s.op){case">=":case">":o=n3(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ko}EM({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];EM({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class Js{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null}}function kM(t,e,n,r,i,s,o,a){return new Js(t,e,n,r,i,s,o,a)}function El(t){return new Js(t)}function OM(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function eT(t){return null!==t.collectionGroup}function wl(t){const e=re(t);if(null===e.le){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(jt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new vf(s,r))}),n.has(jt.keyField().canonicalString())||e.le.push(new vf(jt.keyField(),r))}return e.le}function Cr(t){const e=re(t);return e.he||(e.he=function LM(t,e){if("F"===t.limitType)return Xw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new vf(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Jo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jo(t.startAt.position,t.startAt.inclusive):null;return Xw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,wl(t))),e.he}function tT(t,e){const n=t.filters.concat([e]);return new Js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function A_(t,e,n){return new Js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ef(t,e){return If(Cr(t),Cr(e))&&t.limitType===e.limitType}function FM(t){return`${fu(Cr(t))}|lt:${t.limitType}`}function Tl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>RM(i)).join(", ")}]`),ff(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vl(i)).join(",")),`Target(${r})`}(Cr(t))}; limitType=${t.limitType})`}function wf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):oe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of wl(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,c){const d=TM(o,a,c);return o.inclusive?d<=0:d<0}(r.startAt,wl(r),i)||r.endAt&&!function(o,a,c){const d=TM(o,a,c);return o.inclusive?d>=0:d>0}(r.endAt,wl(r),i)));var r,i}function VM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BM(t){return(e,n)=>{let r=!1;for(const i of wl(t)){const s=d3(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function d3(t,e,n){const r=t.field.isKeyField()?oe.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),d=a.data.field(s);return null!==c&&null!==d?Yo(c,d):he()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}class Xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Go(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return fM(this.inner)}size(){return this.innerSize}}const h3=new Nt(oe.comparator);function Br(){return h3}const UM=new Nt(oe.comparator);function Tf(...t){let e=UM;for(const n of t)e=e.insert(n.key,n);return e}function jM(t){let e=UM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Is(){return Df()}function HM(){return Df()}function Df(){return new Xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const f3=new Nt(oe.comparator),p3=new It(oe.comparator);function Ue(...t){let e=p3;for(const n of t)e=e.add(n);return e}const g3=new It(Ne);function nT(){return g3}function $M(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function qM(t){return{integerValue:""+t}}function zM(t,e){return sM(e)?qM(e):$M(t,e)}class C_{constructor(){this._=void 0}}function m3(t,e,n){return t instanceof Dl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&y_(s)&&(s=v_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof pu?WM(t,e):t instanceof gu?ZM(t,e):function(i,s){const o=GM(i,s),a=KM(o)+KM(i.Ie);return Kw(o)&&Kw(i.Ie)?qM(a):$M(i.serializer,a)}(t,e)}function _3(t,e,n){return t instanceof pu?WM(t,e):t instanceof gu?ZM(t,e):n}function GM(t,e){return t instanceof Al?Kw(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Dl extends C_{}class pu extends C_{constructor(e){super(),this.elements=e}}function WM(t,e){const n=QM(e);for(const r of t.elements)n.some(i=>vs(i,r))||n.push(r);return{arrayValue:{values:n}}}class gu extends C_{constructor(e){super(),this.elements=e}}function ZM(t,e){let n=QM(e);for(const r of t.elements)n=n.filter(i=>!vs(i,r));return{arrayValue:{values:n}}}class Al extends C_{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function KM(t){return en(t.integerValue||t.doubleValue)}function QM(t){return _f(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Af{constructor(e,n){this.field=e,this.transform=n}}class v3{constructor(e,n){this.version=e,this.transformResults=n}}class Zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function b_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class S_{}function YM(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new bl(t.key,Zt.none()):new Cl(t.key,t.data,Zt.none());{const n=t.data,r=Kn.empty();let i=new It(jt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new eo(t.key,r,new Vr(i.toArray()),Zt.none())}}function I3(t,e,n){t instanceof Cl?function(i,s,o){const a=i.value.clone(),c=ek(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof eo?function(i,s,o){if(!b_(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ek(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(XM(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Cf(t,e,n,r){return t instanceof Cl?function(s,o,a,c){if(!b_(s.precondition,o))return a;const d=s.value.clone(),p=tk(s.fieldTransforms,c,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof eo?function(s,o,a,c){if(!b_(s.precondition,o))return a;const d=tk(s.fieldTransforms,c,o),p=o.data;return p.setAll(XM(s)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):(a=n,b_(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function E3(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=GM(r.transform,i||null);null!=s&&(null===n&&(n=Kn.empty()),n.set(r.field,s))}return n||null}function JM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&gl(r,i,(s,o)=>function y3(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof pu&&i instanceof pu||r instanceof gu&&i instanceof gu?gl(r.elements,i.elements,vs):r instanceof Al&&i instanceof Al?vs(r.Ie,i.Ie):r instanceof Dl&&i instanceof Dl);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Cl extends S_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class eo extends S_{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ek(t,e,n){const r=new Map;Ie(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,_3(o,a,n[i]))}return r}function tk(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,m3(s,o,e))}return r}class bl extends S_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rT extends S_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&I3(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Cf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=HM();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=YM(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,(n,r)=>JM(n,r))&&gl(this.baseMutations,e.baseMutations,(n,r)=>JM(n,r))}}class sT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length);let i=f3;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new sT(e,n,r,i)}}class oT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class T3{constructor(e,n){this.count=e,this.unchangedNames=n}}var pn,st;function nk(t){switch(t){default:return he();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function rk(t){if(void 0===t)return on("GRPC error has no .code"),L.UNKNOWN;switch(t){case pn.OK:return L.OK;case pn.CANCELLED:return L.CANCELLED;case pn.UNKNOWN:return L.UNKNOWN;case pn.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case pn.INTERNAL:return L.INTERNAL;case pn.UNAVAILABLE:return L.UNAVAILABLE;case pn.UNAUTHENTICATED:return L.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case pn.NOT_FOUND:return L.NOT_FOUND;case pn.ALREADY_EXISTS:return L.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return L.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case pn.ABORTED:return L.ABORTED;case pn.OUT_OF_RANGE:return L.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return L.UNIMPLEMENTED;case pn.DATA_LOSS:return L.DATA_LOSS;default:return he()}}(st=pn||(pn={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";function ik(){return new TextEncoder}const D3=new hl([4294967295,4294967295],0);function sk(t){const e=ik().encode(t),n=new _9;return n.update(e),new Uint8Array(n.digest())}function ok(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hl([n,r],0),new hl([i,s],0)]}class aT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bf(`Invalid padding: ${n}`);if(r<0)throw new bf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new bf(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new bf(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=hl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(hl.fromNumber(r)));return 1===i.compare(D3)&&(i=new hl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=sk(e),[r,i]=ok(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new aT(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const n=sk(e),[r,i]=ok(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class bf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sf(Ee.min(),i,new Nt(Ne),Br(),Ue())}}class Rf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rf(r,n,Ue(),Ue(),Ue())}}class P_{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class ak{constructor(e,n){this.targetId=e,this.fe=n}}class uk{constructor(e,n,r=Pn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ck{constructor(){this.ge=0,this.pe=dk(),this.ye=Pn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ue(),n=Ue(),r=Ue();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:he()}}),new Rf(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=dk()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ie(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class A3{constructor(e){this.Le=e,this.ke=new Map,this.qe=Br(),this.Qe=lk(),this.Ke=new Nt(Ne)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:he()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(T_(s))if(0===r){const o=new oe(s.path);this.We(n,o,Ht.newNoDocument(o,Ee.min()))}else Ie(1===r);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),c=a?this.et(a,e,o):1;0!==c&&(this.He(n),this.Ke=this.Ke.insert(n,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ys(r).toUint8Array()}catch(c){if(c instanceof gM)return Fr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new aT(o,i,s)}catch(c){return Fr(c instanceof bf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Te?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&T_(a.target)){const c=new oe(a.target.path);null!==this.qe.get(c)||this.st(o,c)||this.We(o,c,Ht.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Ue();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const d=this.Ye(c);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Sf(e,n,this.Ke,this.qe,r);return this.qe=Br(),this.Qe=lk(),this.Ke=new Nt(Ne),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new ck,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new It(Ne),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||J("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new ck),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function lk(){return new Nt(oe.comparator)}function dk(){return new Nt(oe.comparator)}const C3={asc:"ASCENDING",desc:"DESCENDING"},b3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S3={and:"AND",or:"OR"};class R3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uT(t,e){return t.useProto3Json||ff(e)?e:{value:e}}function Sl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function P3(t,e){return Sl(t,e.toTimestamp())}function an(t){return Ie(!!t),Ee.fromTimestamp(function(n){const r=Wo(n);return new Ut(r.seconds,r.nanos)}(t))}function cT(t,e){return(r=t,new it(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function fk(t){const e=it.fromString(t);return Ie(wk(e)),e}function Pf(t,e){return cT(t.databaseId,e.path)}function Es(t,e){const n=fk(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(gk(n))}function lT(t,e){return cT(t.databaseId,e)}function pk(t){const e=fk(t);return 4===e.length?it.emptyPath():gk(e)}function Nf(t){return new it(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gk(t){return Ie(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function mk(t,e,n){return{name:Pf(t,e),fields:n.value.mapValue.fields}}function _k(t,e,n){const r=Es(t,e.name),i=an(e.updateTime),s=e.createTime?an(e.createTime):Ee.min(),o=new Kn({mapValue:{fields:e.fields}}),a=Ht.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function xf(t,e){let n;if(e instanceof Cl)n={update:mk(t,e.key,e.value)};else if(e instanceof bl)n={delete:Pf(t,e.key)};else if(e instanceof eo)n={update:mk(t,e.key,e.data),updateMask:V3(e.fieldMask)};else{if(!(e instanceof rT))return he();n={verify:Pf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Dl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof pu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof gu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Al)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw he()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:P3(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:he()),n;var s}function dT(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Zt.updateTime(an(s.updateTime)):void 0!==s.exists?Zt.exists(s.exists):Zt.none():Zt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(Ie("REQUEST_TIME"===a.setToServerValue),c=new Dl):"appendMissingElements"in a?c=new pu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new gu(a.removeAllFromArray.values||[]):"increment"in a?c=new Al(o,a.increment):he();const d=jt.fromServerFormat(a.fieldPath);return new Af(d,c)}(t,i)):[];var s;if(e.update){const i=Es(t,e.update.name),s=new Kn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Vr((e.updateMask.fieldPaths||[]).map(p=>jt.fromServerFormat(p)));return new eo(i,s,o,n,r)}return new Cl(i,s,n,r)}if(e.delete){const i=Es(t,e.delete);return new bl(i,n)}if(e.verify){const i=Es(t,e.verify);return new rT(i,n)}return he()}function yk(t,e){return{documents:[lT(t,e.path)]}}function hT(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=lT(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=lT(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(0!==c.length)return Ek(_t.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(c){if(0!==c.length)return c.map(d=>{return{field:Xo((g=d).field),direction:O3(g.dir)};var g})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=uT(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n;var c}function vk(t){let e=pk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ie(1===r);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const _=Ik(g);return _ instanceof _t&&Yw(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(_=>{return new vf(Rl((E=_).field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;n.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,ff(_)?null:_}(n.limit));let c=null;var g;n.startAt&&(c=new Jo((g=n.startAt).values||[],!!g.before));let d=null;return n.endAt&&(d=function(g){return new Jo(g.values||[],!g.before)}(n.endAt)),kM(e,i,o,s,a,"F",c,d)}function Ik(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Rl(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Rl(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Rl(n.unaryFilter.field);return et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Rl(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(t):void 0!==t.fieldFilter?et.create(Rl((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return _t.create(n.compositeFilter.filters.map(r=>Ik(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he()}}(n.compositeFilter.op))}(t):he();var n}function O3(t){return C3[t]}function L3(t){return b3[t]}function F3(t){return S3[t]}function Xo(t){return{fieldPath:t.canonicalString()}}function Rl(t){return jt.fromServerFormat(t.fieldPath)}function Ek(t){return t instanceof et?function(n){if("=="===n.op){if(yM(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NAN"}};if(_M(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(yM(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NOT_NAN"}};if(_M(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(n.field),op:L3(n.op),value:n.value}}}(t):t instanceof _t?function(n){const r=n.getFilters().map(i=>Ek(i));return 1===r.length?r[0]:{compositeFilter:{op:F3(n.op),filters:r}}}(t):he()}function V3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wk(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class to{constructor(e,n,r,i,s=Ee.min(),o=Ee.min(),a=Pn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new to(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new to(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Tk{constructor(e){this.ut=e}}function Dk(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:N_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Pf(s=t.ut,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Sl(s,o.version.toTimestamp()),createTime:Sl(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:mu(e.version)};else{if(!e.isUnknownDocument())return he();r.unknownDocument={path:n.path.toArray(),version:mu(e.version)}}var s,o;return r}function N_(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function mu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _u(t){const e=new Ut(t.seconds,t.nanoseconds);return Ee.fromTimestamp(e)}function yu(t,e){const n=(e.baseMutations||[]).map(s=>dT(t.ut,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>dT(t.ut,s)),i=Ut.fromMillis(e.localWriteTimeMs);return new iT(e.batchId,i,n,r)}function Mf(t){const e=_u(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?_u(t.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=void 0!==t.query.documents?(Ie(1===(s=t.query).documents.length),Cr(El(pk(s.documents[0])))):function(s){return Cr(vk(s))}(t.query),new to(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Pn.fromBase64String(t.resumeToken));var s}function Ak(t,e){const n=mu(e.snapshotVersion),r=mu(e.lastLimboFreeSnapshotVersion);let i;i=T_(e.target)?yk(t.ut,e.target):hT(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fu(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function fT(t){const e=vk({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?A_(e,e.limit,"L"):e}function pT(t,e){return new oT(e.largestBatchId,dT(t.ut,e.overlayMutation))}function Ck(t,e){const n=e.path.lastSegment();return[t,lr(e.path.popLast()),n]}function bk(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:mu(r.readTime),documentKey:lr(r.documentKey.path),largestBatchId:r.largestBatchId}}class U3{getBundleMetadata(e,n){return Sk(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:_u(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return Sk(e).put({bundleId:(i=n).id,createTime:mu(an(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return Rk(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:fT(s.bundledQuery),readTime:_u(s.readTime)};var s})}saveNamedQuery(e,n){return Rk(e).put({name:(i=n).name,readTime:mu(an(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Sk(t){return Fn(t,"bundles")}function Rk(t){return Fn(t,"namedQueries")}class x_{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){return new x_(e,n.uid||"")}getOverlay(e,n){return kf(e).get(Ck(this.userId,n)).next(r=>r?pT(this.serializer,r):null)}getOverlays(e,n){const r=Is();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new oT(n,o);i.push(this.lt(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(lr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(kf(e).H("collectionPathOverlayIndex",a))}),N.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Is(),s=lr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return kf(e).W("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const d=pT(this.serializer,c);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Is();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return kf(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,d,p)=>{const g=pT(this.serializer,d);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):p.done()}).next(()=>s)}lt(e,n){return kf(e).put(function(i,s,o){const[a,c,d]=Ck(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:xf(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function kf(t){return Fn(t,"documentOverlays")}class vu{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(en(e.integerValue));else if("doubleValue"in e){const r=en(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),pf(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),"string"==typeof r?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Ys(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?vM(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):he()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),oe.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}function j3(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Pk(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=j3(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}vu.St=new vu;class H3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=Pk(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=Pk(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;0===n?(this.Qt(0),this.Qt(255)):255===n?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;0===n?(this.$t(0),this.$t(255)):255===n?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $3{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class q3{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Of{constructor(){this.Wt=new H3,this.Gt=new $3(this.Wt),this.zt=new q3(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Iu{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Iu(this.indexId,this.documentKey,this.arrayValue,r)}}function ea(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=Nk(t.arrayValue,e.arrayValue),0!==n?n:(n=Nk(t.directionalValue,e.directionalValue),0!==n?n:oe.comparator(t.documentKey,e.documentKey)))}function Nk(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class xk{constructor(e){this.Jt=new It((n,r)=>jt.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Ie(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=$w(e);if(void 0!==n&&!this.tn(n))return!1;const r=cu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.nn(a,c)||!this.rn(this.Yt[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.Yt.length||!this.rn(this.Yt[o++],r[s]))return!1;return!0}sn(){if(this.Xt)return null;let e=new It(jt.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new lu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new lu(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new lu(r.field,"asc"===r.dir?0:1)));return new ml(ml.UNKNOWN_ID,this.collectionId,n,_l.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Mk(t){var e,n;if(Ie(t instanceof et||t instanceof _t),t instanceof et){if(t instanceof NM){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>et.create(t.field,"==",s)))||[];return _t.create(i,"or")}return t}const r=t.filters.map(i=>Mk(i));return _t.create(r,t.op)}function z3(t){if(0===t.getFilters().length)return[];const e=_T(Mk(t));return Ie(kk(e)),gT(e)||mT(e)?[e]:e.getFilters()}function gT(t){return t instanceof et}function mT(t){return t instanceof _t&&Yw(t)}function kk(t){return gT(t)||mT(t)||function(n){if(n instanceof _t&&Qw(n)){for(const r of n.getFilters())if(!gT(r)&&!mT(r))return!1;return!0}return!1}(t)}function _T(t){if(Ie(t instanceof et||t instanceof _t),t instanceof et)return t;if(1===t.filters.length)return _T(t.filters[0]);const e=t.filters.map(r=>_T(r));let n=_t.create(e,t.op);return n=M_(n),kk(n)?n:(Ie(n instanceof _t),Ie(Il(n)),Ie(n.filters.length>1),n.filters.reduce((r,i)=>yT(r,i)))}function yT(t,e){let n;return Ie(t instanceof et||t instanceof _t),Ie(e instanceof et||e instanceof _t),n=t instanceof et?e instanceof et?_t.create([t,e],"and"):Ok(t,e):e instanceof et?Ok(e,t):function(i,s){if(Ie(i.filters.length>0&&s.filters.length>0),Il(i)&&Il(s))return SM(i,s.getFilters());const o=Qw(i)?i:s,a=Qw(i)?s:i,c=o.filters.map(d=>yT(d,a));return _t.create(c,"or")}(t,e),M_(n)}function Ok(t,e){if(Il(e))return SM(e,t.getFilters());{const n=e.filters.map(r=>yT(t,r));return _t.create(n,"or")}}function M_(t){if(Ie(t instanceof et||t instanceof _t),t instanceof et)return t;const e=t.getFilters();if(1===e.length)return M_(e[0]);if(CM(t))return t;const n=e.map(i=>M_(i)),r=[];return n.forEach(i=>{i instanceof et?r.push(i):i instanceof _t&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:_t.create(r,t.op)}class G3{constructor(){this.on=new vT}addToCollectionParentIndex(e,n){return this.on.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Qr.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class vT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new It(it.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new It(it.comparator)).toArray()}}const k_=new Uint8Array(0);class W3{constructor(e,n){this.user=e,this.databaseId=n,this._n=new vT,this.an=new Xs(r=>fu(r),(r,i)=>If(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:lr(i)};return Lk(e).put(s)}return N.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Xx(n),""],!1,!0);return Lk(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ys(o.parent))}return r})}addFieldIndex(e,n){const r=Lf(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=Nl(e);return s.next(a=>{o.put(bk(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Lf(e),i=Nl(e),s=Pl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Lf(e),r=Pl(e),i=Nl(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return N.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new xk(r).sn();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Pl(e);let i=!0;const s=new Map;return N.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ue();const a=[];return N.forEach(s,(c,d)=>{var M;J("IndexedDbIndexManager",`Using index ${M=c,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`} to execute ${fu(n)}`);const p=function(M,X){const ne=$w(X);if(void 0===ne)return null;for(const Ae of D_(M,ne.fieldPath))switch(Ae.op){case"array-contains-any":return Ae.value.arrayValue.values||[];case"array-contains":return[Ae.value]}return null}(d,c),g=function(M,X){const ne=new Map;for(const Ae of cu(X))for(const ut of D_(M,Ae.fieldPath))switch(ut.op){case"==":case"in":ne.set(Ae.fieldPath.canonicalString(),ut.value);break;case"not-in":case"!=":return ne.set(Ae.fieldPath.canonicalString(),ut.value),Array.from(ne.values())}return null}(d,c),_=function(M,X){const ne=[];let Ae=!0;for(const ut of cu(X)){const gn=0===ut.kind?xM(M,ut.fieldPath,M.startAt):MM(M,ut.fieldPath,M.startAt);ne.push(gn.value),Ae&&(Ae=gn.inclusive)}return new Jo(ne,Ae)}(d,c),v=function(M,X){const ne=[];let Ae=!0;for(const ut of cu(X)){const gn=0===ut.kind?MM(M,ut.fieldPath,M.endAt):xM(M,ut.fieldPath,M.endAt);ne.push(gn.value),Ae&&(Ae=gn.inclusive)}return new Jo(ne,Ae)}(d,c),E=this.ln(c,d,_),w=this.ln(c,d,v),C=this.hn(c,d,g),k=this.Pn(c.indexId,p,E,_.inclusive,w,v.inclusive,C);return N.forEach(k,R=>r.j(R,n.limit).next(M=>{M.forEach(X=>{const ne=oe.fromSegments(X.documentKey);o.has(ne)||(o=o.add(ne),a.push(ne))})}))}).next(()=>a)}return N.resolve(null)})}un(e){let n=this.an.get(e);return n||(n=0===e.filters.length?[e]:z3(_t.create(e.filters,"and")).map(r=>Xw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const c=(null!=n?n.length:1)*Math.max(r.length,s.length),d=c/(null!=n?n.length:1),p=[];for(let g=0;g<c;++g){const _=n?this.In(n[g/d]):k_,v=this.Tn(e,_,r[g%d],i),E=this.En(e,_,s[g%d],o),w=a.map(C=>this.Tn(e,_,C,!0));p.push(...this.createRange(v,E,w))}return p}Tn(e,n,r,i){const s=new Iu(e,oe.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new Iu(e,oe.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new xk(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return N.forEach(i,s=>this.cn(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let d=new It(jt.comparator),p=!1;for(const g of c.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?p=!0:d=d.add(_.field));for(const g of c.orderBy)g.field.isKeyField()||(d=d.add(g.field));return d.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}dn(e,n){const r=new Of;for(const i of cu(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.jt(i.kind);vu.St.ht(s,o)}return r.Ut()}In(e){const n=new Of;return vu.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Of;return vu.St.ht(hu(this.databaseId,n),r.jt(function(s){const o=cu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(null===r)return[];let i=[];i.push(new Of);let s=0;for(const o of cu(e)){const a=r[s++];for(const c of i)if(this.Rn(n,o.fieldPath)&&_f(a))i=this.Vn(i,o,a);else{const d=c.jt(o.kind);vu.St.ht(a,d)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new Of;c.seed(a.Ut()),vu.St.ht(o,c.jt(n.kind)),s.push(c)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof et&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Lf(e),i=Nl(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return N.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(p,g){const _=g?new _l(g.sequenceNumber,new Qr(_u(g.readTime),new oe(ys(g.documentKey)),g.largestBatchId)):_l.empty(),v=p.fields.map(([E,w])=>new lu(jt.fromServerFormat(E),w));return new ml(p.indexId,p.collectionGroup,v,_)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Ne(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Lf(e),s=Nl(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,c=>s.put(bk(c.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,c=>this.gn(e,i,c).next(d=>{const p=this.pn(s,c);return d.isEqual(p)?N.resolve():this.yn(e,s,c,d,p)}))))})}wn(e,n,r,i){return Pl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Pl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=Pl(e);let s=new It(ea);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new Iu(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new It(ea);const i=this.dn(n,e);if(null==i)return r;const s=$w(n);if(null!=s){const o=e.data.field(s.fieldPath);if(_f(o))for(const a of o.arrayValue.values||[])r=r.add(new Iu(n.indexId,e.key,this.In(a),i))}else r=r.add(new Iu(n.indexId,e.key,k_,i));return r}yn(e,n,r,i,s){J("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(c,d,p,g,_){const v=c.getIterator(),E=d.getIterator();let w=yl(v),C=yl(E);for(;w||C;){let k=!1,R=!1;if(w&&C){const M=p(w,C);M<0?R=!0:M>0&&(k=!0)}else null!=w?R=!0:k=!0;k?(g(C),C=yl(E)):R?(_(w),w=yl(v)):(w=yl(v),C=yl(E))}}(i,s,ea,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),N.waitFor(o)}fn(e){let n=1;return Nl(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ea(o,a)).filter((o,a,c)=>!a||0!==ea(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=ea(o,e),c=ea(o,n);if(0===a)i[0]=e.Ht();else if(a>0&&c<0)i.push(o),i.push(o.Ht());else if(c>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,k_,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,k_,[]]))}return s}bn(e,n){return ea(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Fk)}getMinOffset(e,n){return N.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||he())).next(Fk)}}function Lk(t){return Fn(t,"collectionParents")}function Pl(t){return Fn(t,"indexEntries")}function Lf(t){return Fn(t,"indexConfiguration")}function Nl(t){return Fn(t,"indexState")}function Fk(t){Ie(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;qw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Qr(e.readTime,e.documentKey,n)}const Vk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class dr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Bk(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:o},(p,g,_)=>(a++,_.delete()));s.push(c.next(()=>{Ie(1===a)}));const d=[];for(const p of n.mutations){const g=uM(e,p.key.path,n.batchId);s.push(i.delete(g)),d.push(p.key)}return N.waitFor(s).next(()=>d)}function O_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw he();e=t.noDocument}return JSON.stringify(e).length}dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(41943040,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);class L_{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Ie(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new L_(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=xl(e),o=ta(e);return o.add({}).next(a=>{Ie("number"==typeof a);const c=new iT(a,n,r,i),d=function(v,E,w){const C=w.baseMutations.map(R=>xf(v.ut,R)),k=w.mutations.map(R=>xf(v.ut,R));return{userId:E,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:C,mutations:k}}(this.serializer,this.userId,c),p=[];let g=new It((_,v)=>Ne(_.canonicalString(),v.canonicalString()));for(const _ of i){const v=uM(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),p.push(o.put(d)),p.push(s.put(v,O9))}return g.forEach(_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Dn[a]=c.keys()}),N.waitFor(p).next(()=>c)})}lookupMutationBatch(e,n){return ta(e).get(n).next(r=>r?(Ie(r.userId===this.userId),yu(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?N.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ta(e).Y({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(Ie(a.batchId>=r),s=yu(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ta(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).W("userMutationsIndex",n).next(r=>r.map(i=>yu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=m_(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return xl(e).Y({range:i},(o,a,c)=>{const[d,p,g]=o,_=ys(p);if(d===this.userId&&n.path.isEqual(_))return ta(e).get(g).next(v=>{if(!v)throw he();Ie(v.userId===this.userId),s.push(yu(this.serializer,v))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Ne);const i=[];return n.forEach(s=>{const o=m_(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=xl(e).Y({range:a},(d,p,g)=>{const[_,v,E]=d,w=ys(v);_===this.userId&&s.path.isEqual(w)?r=r.add(E):g.done()});i.push(c)}),N.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=m_(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new It(Ne);return xl(e).Y({range:o},(c,d,p)=>{const[g,_,v]=c,E=ys(_);g===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(v)):p.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ta(e).get(s).next(o=>{if(null===o)throw he();Ie(o.userId===this.userId),r.push(yu(this.serializer,o))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Bk(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return xl(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=ys(s[1]);i.push(c)}else a.done()}).next(()=>{Ie(0===i.length)})})}containsKey(e,n){return Uk(e,this.userId,n)}Mn(e){return jk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Uk(t,e,n){const r=m_(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return xl(t).Y({range:s,J:!0},(a,c,d)=>{const[p,g,_]=a;p===e&&g===i&&(o=!0),d.done()}).next(()=>o)}function ta(t){return Fn(t,"mutations")}function xl(t){return Fn(t,"documentMutations")}function jk(t){return Fn(t,"mutationQueues")}class Eu{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Eu(0)}static Nn(){return new Eu(-1)}}class Z3{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new Eu(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Ee.fromTimestamp(new Ut(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ml(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Ie(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ml(e).Y((o,a)=>{const c=Mf(a);c.sequenceNumber<=n&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>N.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ml(e).Y((r,i)=>{const s=Mf(i);n(s)})}Bn(e){return Hk(e).get("targetGlobalKey").next(n=>(Ie(null!==n),n))}Ln(e,n){return Hk(e).put("targetGlobalKey",n)}kn(e,n){return Ml(e).put(Ak(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=fu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ml(e).Y({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const d=Mf(a);If(n,d.target)&&(s=d,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=na(e);return n.forEach(o=>{const a=lr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(i)}removeMatchingKeys(e,n,r){const i=na(e);return N.forEach(n,s=>{const o=lr(s.path);return N.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=na(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=na(e);let s=Ue();return i.Y({range:r,J:!0},(o,a,c)=>{const d=ys(o[1]),p=new oe(d);s=s.add(p)}).next(()=>s)}containsKey(e,n){const r=lr(n.path),i=IDBKeyRange.bound([r],[Xx(r)],!1,!0);let s=0;return na(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],c,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}_t(e,n){return Ml(e).get(n).next(r=>r?Mf(r):null)}}function Ml(t){return Fn(t,"targets")}function Hk(t){return Fn(t,"targetGlobal")}function na(t){return Fn(t,"targetDocuments")}function $k([t,e],[n,r]){const i=Ne(t,n);return 0===i?Ne(e,r):i}class K3{constructor(e){this.Qn=e,this.buffer=new It($k),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$k(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){var n=this;J("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,z.Z)(function*(){n.Wn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){zo(r)?J("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield qo(r)}yield n.Gn(3e5)}))}}class Q3{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return N.resolve(Yr._e);const r=new K3(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(Vk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vk):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,c,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),pl()<=ps.in.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-p}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${g} documents in `+(d-c)+`ms\nTotal Duration: ${d-p}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class Y3{constructor(e,n){this.db=e,this.garbageCollector=function zk(t,e){return new Q3(t,e)}(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return F_(e,r)}removeReference(e,n,r){return F_(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return F_(e,n)}Xn(e,n){return function(i,s){let o=!1;return jk(i).Z(a=>Uk(i,a,s).next(c=>(c&&(o=!0),N.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const c=this.Xn(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ee.min()),na(e).delete([0,lr(o.path)])))});i.push(c)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return F_(e,n)}Zn(e,n){const r=na(e);let i,s=Yr._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:d})=>{0===o?(s!==Yr._e&&n(new oe(ys(i)),s),s=d,i=c):s=Yr._e}).next(()=>{s!==Yr._e&&n(new oe(ys(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function F_(t,e){return na(t).put((i=t.currentSequenceNumber,{targetId:0,path:lr(e.path),sequenceNumber:i}));var i}class Gk{constructor(){this.changes=new Xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class J3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return wu(e).put(r)}removeEntry(e,n,r){return wu(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],N_(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Ht.newInvalidDocument(n);return wu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ff(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:Ht.newInvalidDocument(n)};return wu(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ff(n))},(i,s)=>{r={document:this.tr(n,s),size:O_(s)}}).next(()=>r)}getEntries(e,n){let r=Br();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=Br(),i=new Nt(oe.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,O_(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return N.resolve();let i=new It(Qk);n.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Ff(i.first()),Ff(i.last())),o=i.getIterator();let a=o.getNext();return wu(e).Y({index:"documentKeyIndex",range:s},(c,d,p)=>{const g=oe.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&Qk(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?p.U(Ff(a)):p.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),N_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wu(e).W(IDBKeyRange.bound(a,c,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let p=Br();for(const g of d){const _=this.tr(oe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(wf(n,_)||i.has(_.key))&&(p=p.insert(_.key,_))}return p})}getAllFromCollectionGroup(e,n,r,i){let s=Br();const o=Kk(n,r),a=Kk(n,Qr.max());return wu(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,d,p)=>{const g=this.tr(oe.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(g.key,g),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new X3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Zk(e).get("remoteDocumentGlobalKey").next(n=>(Ie(!!n),n))}er(e,n){return Zk(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=function B3(t,e){let n;if(e.document)n=_k(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),i=_u(e.noDocument.readTime);n=Ht.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return he();{const r=oe.fromSegments(e.unknownDocument.path),i=_u(e.unknownDocument.version);n=Ht.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ut(i[0],i[1]);return Ee.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(Ee.min()))return r}return Ht.newInvalidDocument(e)}}function Wk(t){return new J3(t)}class X3 extends Gk{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new Xs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new It((s,o)=>Ne(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=Dk(this._r.serializer,o);i=i.add(s.path.popLast());const d=O_(c);r+=d-a.size,n.push(this._r.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=Dk(this._r.serializer,o.convertToNoDocument(Ee.min()));n.push(this._r.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Zk(t){return Fn(t,"remoteDocumentGlobal")}function wu(t){return Fn(t,"remoteDocumentsV14")}function Ff(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Kk(t,e){const n=e.documentKey.path.toArray();return[t,N_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Qk(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ne(n[s],r[s]),i)return i;return i=Ne(n.length,r.length),i||(i=Ne(n[n.length-2],r[r.length-2]),i||Ne(n[n.length-1],r[r.length-1]))}class eG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Yk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Cf(r.mutation,i,Vr.empty(),Ut.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ue()){const i=Is();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Tf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Br();const o=Df(),a=Df();return n.forEach((c,d)=>{const p=r.get(d.key);i.has(d.key)&&(void 0===p||p.mutation instanceof eo)?s=s.insert(d.key,d):void 0!==p?(o.set(d.key,p.mutation.getFieldMask()),Cf(p.mutation,d,p.mutation.getFieldMask(),Ut.now())):o.set(d.key,Vr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var g;return a.set(d,new eG(p,null!==(g=o.get(d))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Df();let i=new Nt((o,a)=>o-a),s=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const d=n.get(c);if(null===d)return;let p=r.get(c)||Vr.empty();p=a.applyToLocalView(d,p),r.set(c,p);const g=(i.get(a.batchId)||Ue()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),d=c.key,p=c.value,g=HM();p.forEach(_=>{if(!s.has(_)){const v=YM(n.get(_),r.get(_));null!==v&&g.set(_,v),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return oe.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):eT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):N.resolve(Is());let a=-1,c=s;return o.next(d=>N.forEach(d,(p,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(p)?N.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Ue())).next(p=>({batchId:a,changes:jM(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(r=>{let i=Tf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Tf();return this.indexManager.getCollectionParents(e,s).next(a=>N.forEach(a,c=>{const d=(g=n,_=c.child(s),new Js(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,d)=>{const p=d.getKey();null===o.get(p)&&(o=o.insert(p,Ht.newInvalidDocument(p)))});let a=Tf();return o.forEach((c,d)=>{const p=s.get(c);void 0!==p&&Cf(p.mutation,d,Vr.empty(),Ut.now()),wf(n,d)&&(a=a.insert(c,d))}),a})}}class tG{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return N.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,{id:(i=n).id,version:i.version,createTime:an(i.createTime)}),N.resolve();var i}getNamedQuery(e,n){return N.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,{name:(i=n).name,query:fT(i.bundledQuery),readTime:an(i.readTime)}),N.resolve();var i}}class nG{constructor(){this.overlays=new Nt(oe.comparator),this.lr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Is();return N.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const i=Is(),s=n.length+1,o=new oe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return N.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Nt((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=s.get(d.largestBatchId);null===p&&(p=Is(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const a=Is(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>a.set(d,p)),!(a.size()>=i)););return N.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new oT(n,r));let s=this.lr.get(n);void 0===s&&(s=Ue(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}class IT{constructor(){this.hr=new It(Vn.Pr),this.Ir=new It(Vn.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new Vn(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Vn(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new oe(new it([])),r=new Vn(n,e),i=new Vn(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new oe(new it([])),r=new Vn(n,e),i=new Vn(n,e+1);let s=Ue();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Vn(e,0),r=this.hr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Vn{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return oe.comparator(e.key,n.key)||Ne(e.gr,n.gr)}static Tr(e,n){return Ne(e.gr,n.gr)||oe.comparator(e.key,n.key)}}class rG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new It(Vn.Pr)}checkEmpty(e){return N.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++;const o=new iT(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new Vn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Sr(n+1),s=i<0?0:i;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Vn(n,0),i=new Vn(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Ne);return n.forEach(i=>{const s=new Vn(i,0),o=new Vn(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),N.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;oe.isDocumentKey(s)||(s=s.child(""));const o=new Vn(new oe(s),0);let a=new It(Ne);return this.yr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.gr)),!0)},o),N.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Ie(0===this.Dr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.yr;return N.forEach(n.mutations,i=>{const s=new Vn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new Vn(n,0),i=this.yr.firstAfterOrEqual(r);return N.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return N.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class iG{constructor(e){this.Cr=e,this.docs=new Nt(oe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=Br();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ht.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Br();const o=n.path,a=new oe(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||qw(tM(p),r)<=0||(i.has(p.key)||wf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,i){he()}vr(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sG(this)}getSize(e){return N.resolve(this.size)}}class sG extends Gk{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}class oG{constructor(e){this.persistence=e,this.Fr=new Xs(n=>fu(n),If),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Mr=0,this.Or=new IT,this.targetCount=0,this.Nr=Eu.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),N.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Eu(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.kn(n),N.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(s).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Or.containsKey(n))}}class ET{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Yr(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new oG(this),this.indexManager=new G3,this.remoteDocumentCache=new iG(r=>this.referenceDelegate.Qr(r)),this.serializer=new Tk(n),this.Kr=new tG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new rG(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new aG(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return N.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class aG extends rM{constructor(e){super(),this.currentSequenceNumber=e}}class V_{constructor(e){this.persistence=e,this.Gr=new IT,this.zr=null}static jr(e){return new V_(e)}get Hr(){if(this.zr)return this.zr;throw he()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),N.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Hr,r=>{const i=oe.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,Ee.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return N.or([()=>N.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}class uG{constructor(e){this.serializer=e}N(e,n,r,i){const s=new g_("createOrUpgrade",n);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aM,{unique:!0}),c.createObjectStore("documentMutations"),Jk(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=N.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Jk(e)),o=o.next(()=>function(c){const d=c.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,d){return d.store("mutations").W().next(p=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aM,{unique:!0});const g=d.store("mutations"),_=p.map(v=>g.put(v));return N.waitFor(_)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const d=c.createObjectStore("documentOverlays",{keyPath:W9});d.createIndex("collectionPathOverlayIndex",Z9,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",K9,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const d=c.createObjectStore("remoteDocumentsV14",{keyPath:L9});d.createIndex("documentKeyIndex",F9),d.createIndex("collectionGroupIndex",V9)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:$9}).createIndex("sequenceNumberIndex",q9,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:z9}).createIndex("documentKeyIndex",G9,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=O_(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>N.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>N.forEach(a,c=>{Ie(c.userId===s.userId);const d=yu(this.serializer,c);return Bk(e,s.userId,d).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const c=new it(o),d=[0,lr(c)];s.push(n.get(d).next(p=>p?N.resolve():n.put({targetId:0,path:lr(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>N.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:H9});const r=n.store("collectionParents"),i=new vT,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:lr(c)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const c=new it(o);return s(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,c],d)=>{const p=ys(a);return s(p.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=Mf(i),o=Ak(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),c=(g=o,g.document?new oe(it.fromString(g.document.name).popFirst(5)):g.noDocument?oe.fromSegments(g.noDocument.path):g.unknownDocument?oe.fromSegments(g.unknownDocument.path):he()).path.toArray(),d={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(d))}).next(()=>N.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=Wk(this.serializer),s=new ET(V_.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(c=>{var d;let p=null!==(d=a.get(c.userId))&&void 0!==d?d:Ue();yu(this.serializer,c).keys().forEach(g=>p=p.add(g)),a.set(c.userId,p)}),N.forEach(a,(c,d)=>{const p=new Ln(d),g=x_.ct(this.serializer,p),_=s.getIndexManager(p),v=L_.ct(p,this.serializer,_,s.referenceDelegate);return new Yk(i,v,g,_).recalculateAndSaveOverlaysForDocumentKeys(new Ww(n,Yr._e),c).next()})})}}function Jk(t){t.createObjectStore("targetDocuments",{keyPath:U9}).createIndex("documentTargetsIndex",j9,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",B9,{unique:!0}),t.createObjectStore("targetGlobal")}const wT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class TT{constructor(e,n,r,i,s,o,a,c,d,p,g=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=d,this._i=p,this.ai=g,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=_=>Promise.resolve(),!TT.D())throw new Q(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Y3(this,i),this.Ii=n+"main",this.serializer=new Tk(c),this.Ti=new Bi(this.Ii,this.ai,new uG(this.serializer)),this.qr=new Z3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Wk(this.serializer),this.Kr=new U3,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===p&&on("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Q(L.FAILED_PRECONDITION,wT);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Yr(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){var n=this;return this.Pi=function(){var r=(0,z.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(function(){var n=(0,z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,z.Z)(function*(){n.started&&(yield n.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>U_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(zo(e))return J("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return J("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Vf(e).get("owner").next(n=>N.resolve(this.wi(n)))}Si(e){return U_(e).delete(this.clientId)}bi(){var e=this;return(0,z.Z)(function*(){if(e.isPrimary&&!e.Di(e.hi,18e5)){e.hi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Fn(r,"clientMetadata");return i.W().next(s=>{const o=e.Ci(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return N.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ei)for(const r of n)e.Ei.removeItem(e.vi(r.clientId))}})()}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?N.resolve(!0):Vf(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new Q(L.FAILED_PRECONDITION,wT);return!1}}return!(!this.networkEnabled||!this.inForeground)||U_(e).W().next(r=>void 0===this.Ci(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&J("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,z.Z)(function*(){e.kr=!1,e.Mi(),e.li&&(e.li.cancel(),e.li=null),e.xi(),e.Oi(),yield e.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new Ww(n,Yr._e);return e.pi(r).next(()=>e.Si(r))}),e.Ti.close(),e.Ni()})()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>U_(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return L_.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new W3(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return x_.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){J("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(c=this.ai)?Y9:14===c?dM:13===c?lM:12===c?Q9:11===c?cM:void he();var c;let o;return this.Ti.runTransaction(e,i,s,a=>(o=new Ww(a,this.Lr?this.Lr.next():Yr._e),"readwrite-primary"===n?this.fi(o).next(c=>!!c||this.gi(o)).next(c=>{if(!c)throw on(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new Q(L.FAILED_PRECONDITION,nM);return r(o)}).next(c=>this.yi(o).next(()=>c)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return Vf(e).get("owner").next(n=>{if(null!==n&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Q(L.FAILED_PRECONDITION,wT)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vf(e).put("owner",n)}static D(){return Bi.D()}pi(e){const n=Vf(e);return n.get("owner").next(r=>this.wi(r)?(J("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):N.resolve())}Di(e,n){const r=Date.now();return!(e<r-n||e>r&&(on(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;(0,Dt.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=null!==(null===(n=this.Ei)||void 0===n?void 0:n.getItem(this.vi(e)));return J("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return on("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){on("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vf(t){return Fn(t,"owner")}function U_(t){return Fn(t,"clientMetadata")}function DT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class AT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ue(),i=Ue();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new AT(e,n.fromCache,r,i)}}class cG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Xk{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cG;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(pl()<=ps.in.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Tl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),N.resolve()):(pl()<=ps.in.DEBUG&&J("QueryEngine","Query:",Tl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(pl()<=ps.in.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Tl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cr(n))):N.resolve())}zi(e,n){if(OM(n))return N.resolve(null);let r=Cr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=A_(n,null,"F"),r=Cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ue(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Yi(n,a);return this.Zi(n,d,o,c.readTime)?this.zi(e,A_(n,null,"F")):this.Xi(e,d,n,c)}))})))}ji(e,n,r,i){return OM(n)||i.isEqual(Ee.min())?N.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?N.resolve(null):(pl()<=ps.in.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tl(n)),this.Xi(e,o,n,eM(i,-1)).next(a=>a))})}Yi(e,n){let r=new It(BM(e));return n.forEach((i,s)=>{wf(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return pl()<=ps.in.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Tl(n)),this.Gi.getDocumentsMatchingQuery(e,n,Qr.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class lG{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Nt(Ne),this.ns=new Xs(s=>fu(s),If),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yk(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function eO(t,e,n,r){return new lG(t,e,n,r)}function tO(t,e){return CT.apply(this,arguments)}function CT(){return CT=(0,z.Z)(function*(t,e){const n=re(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=Ue();for(const d of i){o.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of s){a.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(d=>({_s:d,removedBatchIds:o,addedBatchIds:a}))})})}),CT.apply(this,arguments)}function nO(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function rO(t,e,n){let r=Ue(),i=Ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Br();return n.forEach((a,c)=>{const d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ee.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||0===c.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{us:o,cs:i}})}function fG(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kl(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,N.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new to(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function Ol(t,e,n){return bT.apply(this,arguments)}function bT(){return bT=(0,z.Z)(function*(t,e,n){const r=re(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!zo(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}),bT.apply(this,arguments)}function j_(t,e,n){const r=re(t);let i=Ee.min(),s=Ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,p){const g=re(c),_=g.ns.get(p);return void 0!==_?N.resolve(g.ts.get(_)):g.qr.getTargetData(d,p)}(r,o,Cr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:Ee.min(),n?s:Ue())).next(a=>(oO(r,VM(e),a),{documents:a,ls:s})))}function iO(t,e){const n=re(t),r=re(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function sO(t,e){const n=re(t),r=n.rs.get(e)||Ee.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,eM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(oO(n,e,i),i))}function oO(t,e,n){let r=t.rs.get(e)||Ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}function ST(){return ST=(0,z.Z)(function*(t,e,n,r){const i=re(t);let s=Ue(),o=Br();for(const d of n){const p=e.hs(d.metadata.name);d.document&&(s=s.add(p));const g=e.Ps(d);g.setReadTime(e.Is(d.metadata.readTime)),o=o.insert(p,g)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),c=yield kl(i,(p=r,Cr(El(it.fromString(`__bundle__/docs/${p}`)))));var p;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>rO(d,a,o).next(p=>(a.apply(d),p)).next(p=>i.qr.removeMatchingKeysForTargetId(d,c.targetId).next(()=>i.qr.addMatchingKeys(d,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,p.us,p.cs)).next(()=>p.us)))}),ST.apply(this,arguments)}function gG(t,e){return RT.apply(this,arguments)}function RT(){return RT=(0,z.Z)(function*(t,e,n=Ue()){const r=yield kl(t,Cr(fT(e.bundledQuery))),i=re(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=an(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(Pn.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}),RT.apply(this,arguments)}function aO(t,e){return`firestore_clients_${t}_${e}`}function uO(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function PT(t,e){return`firestore_targets_${t}_${e}`}class H_{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Q(i.error.code,i.error.message))),o?new H_(e,n,i.state,s):(on("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bf{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Q(r.error.code,r.error.message))),s?new Bf(e,r.state,i):(on("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $_{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=nT();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=sM(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new $_(e,s):(on("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class NT{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new NT(n.clientId,n.onlineState):(on("SharedClientState",`Failed to parse online state: ${e}`),null)}}class xT{constructor(){this.activeTargetIds=nT()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MT{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Nt(Ne),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=aO(this.persistenceKey,this.Rs),this.ws=`firestore_sequence_number_${this.persistenceKey}`,this.gs=this.gs.insert(this.Rs,new xT),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=`firestore_online_state_${this.persistenceKey}`,this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,z.Z)(function*(){const n=yield e.syncEngine.Bi();for(const i of n){if(i===e.Rs)continue;const s=e.getItem(aO(e.persistenceKey,i));if(s){const o=$_.Ts(i,s);o&&(e.gs=e.gs.insert(o.clientId,o))}}e.Fs();const r=e.storage.getItem(e.Cs);if(r){const i=e.Ms(r);i&&e.xs(i)}for(const i of e.ps)e.fs(i);e.ps=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(PT(this.persistenceKey,e));if(r){const i=Bf.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(PT(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return J("SharedClientState","READ",e,n),n}setItem(e,n){J("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){J("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){var n=this;const r=e;if(r.storageArea===this.storage){if(J("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ys)return void on("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,z.Z)(function*(){if(n.started){if(null!==r.key)if(n.Ss.test(r.key)){if(null==r.newValue){const i=n.Ks(r.key);return n.$s(i,null)}{const i=n.Us(r.key,r.newValue);if(i)return n.$s(i.clientId,i)}}else if(n.bs.test(r.key)){if(null!==r.newValue){const i=n.Ws(r.key,r.newValue);if(i)return n.Gs(i)}}else if(n.Ds.test(r.key)){if(null!==r.newValue){const i=n.zs(r.key,r.newValue);if(i)return n.js(i)}}else if(r.key===n.Cs){if(null!==r.newValue){const i=n.Ms(r.newValue);if(i)return n.xs(i)}}else if(r.key===n.ws){const i=function(o){let a=Yr._e;if(null!=o)try{const c=JSON.parse(o);Ie("number"==typeof c),a=c}catch(c){on("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==Yr._e&&n.sequenceNumberHandler(i)}else if(r.key===n.vs){const i=n.Hs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Js(s)))}}else n.ps.push(r)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new H_(this.currentUser,e,n,r),s=uO(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=uO(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){this.storage.setItem(this.Cs,JSON.stringify({clientId:this.Rs,onlineState:e}))}ks(e,n,r){const i=PT(this.persistenceKey,e),s=new Bf(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return $_.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]);return H_.Ts(new Ln(void 0!==r[2]?r[2]:null),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Bf.Ts(i,n)}Ms(e){return NT.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){var n=this;return(0,z.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Ys(e.batchId,e.state,e.error);J("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=nT();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class cO{constructor(){this.eo=new xT,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new xT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mG{ro(e){}shutdown(){}}class lO{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let q_=null;function kT(){return null===q_?q_=268435456+Math.round(2147483648*Math.random()):q_++,"0x"+q_.toString(16)}const _G={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yG{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const hr="WebChannelConnection";class vG extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=kT(),c=this.So(n,r);J("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);const d={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(d,s,o),this.Do(n,c,d,i).then(p=>(J("RestConnection",`Received RPC '${n}' ${a}: `,p),p),p=>{throw Fr("RestConnection",`RPC '${n}' ${a} failed with error: `,p,"url: ",c,"request:",i),p})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+fl,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){return`${this.mo}/v1/${r}:${_G[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=kT();return new Promise((o,a)=>{const c=new m9;c.setWithCredentials(!0),c.listenOnce(p9.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case jw.NO_ERROR:const p=c.getResponseJson();J(hr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case jw.TIMEOUT:J(hr,`RPC '${e}' ${s} timed out`),a(new Q(L.DEADLINE_EXCEEDED,"Request time out"));break;case jw.HTTP_ERROR:const g=c.getStatus();if(J(hr,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_?.error;if(v&&v.status&&v.message){const E=function(C){const k=C.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(k)>=0?k:L.UNKNOWN}(v.status);a(new Q(E,v.message))}else a(new Q(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Q(L.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{J(hr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);J(hr,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",d,r,15)})}vo(e,n,r){const i=kT(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=h9(),a=f9(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.bo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=s.join("");J(hr,`Creating RPC '${e}' stream ${i}: ${p}`,c);const g=o.createWebChannel(p,c);let _=!1,v=!1;const E=new yG({co:C=>{v?J(hr,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(_||(J(hr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),J(hr,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},lo:()=>g.close()}),w=(C,k,R)=>{C.listen(k,M=>{try{R(M)}catch(X){setTimeout(()=>{throw X},0)}})};return w(g,p_.EventType.OPEN,()=>{v||J(hr,`RPC '${e}' stream ${i} transport opened.`)}),w(g,p_.EventType.CLOSE,()=>{v||(v=!0,J(hr,`RPC '${e}' stream ${i} transport closed`),E.Ro())}),w(g,p_.EventType.ERROR,C=>{v||(v=!0,Fr(hr,`RPC '${e}' stream ${i} transport errored:`,C),E.Ro(new Q(L.UNAVAILABLE,"The operation could not be completed")))}),w(g,p_.EventType.MESSAGE,C=>{var k;if(!v){const R=C.data[0];Ie(!!R);const X=R.error||(null===(k=R[0])||void 0===k?void 0:k.error);if(X){J(hr,`RPC '${e}' stream ${i} received error:`,X);const ne=X.status;let Ae=function(tp){const hy=pn[tp];if(void 0!==hy)return rk(hy)}(ne),ut=X.message;void 0===Ae&&(Ae=L.INTERNAL,ut="Unknown error status: "+ne+" with message "+X.message),v=!0,E.Ro(new Q(Ae,ut)),g.close()}else J(hr,`RPC '${e}' stream ${i} received:`,R),E.Vo(R)}}),w(a,g9.STAT_EVENT,C=>{C.stat===Zx.PROXY?J(hr,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Zx.NOPROXY&&J(hr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function dO(){return typeof window<"u"?window:null}function z_(){return typeof document<"u"?document:null}function Uf(t){return new R3(t,!0)}class OT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class hO{constructor(e,n,r,i,s,o,a,c){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new OT(e,n)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}stop(){var e=this;return(0,z.Z)(function*(){e.jo()&&(yield e.close(0))})()}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){var e=this;return(0,z.Z)(function*(){if(e.Ho())return e.close(0)})()}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){var r=this;return(0,z.Z)(function*(){r.t_(),r.n_(),r.zo.cancel(),r.Uo++,4!==e?r.zo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(on(n.toString()),on("Using maximum backoff delay to prevent overloading the backend."),r.zo.Lo()):n&&n.code===L.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.r_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Io(n)})()}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new Q(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){var e=this;this.state=5,this.zo.ko((0,z.Z)(function*(){e.state=0,e.start()}))}o_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IG extends hO{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=function x3(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:he(),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(Ie(void 0===p||"string"==typeof p),Pn.fromBase64String(p||"")):(Ie(void 0===p||p instanceof Uint8Array),Pn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const p=void 0===d.code?L.UNKNOWN:rk(d.code);return new Q(p,d.message||"")}(o);n=new uk(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Es(t,r.document.name),s=an(r.document.updateTime),o=r.document.createTime?an(r.document.createTime):Ee.min(),a=new Kn({mapValue:{fields:r.document.fields}}),c=Ht.newFoundDocument(i,s,o,a);n=new P_(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=Es(t,r.document),s=r.readTime?an(r.readTime):Ee.min(),o=Ht.newNoDocument(i,s);n=new P_([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Es(t,r.document);n=new P_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return he();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new T3(i,s);n=new ak(r.targetId,o)}}var d;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?an(o.readTime):Ee.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=Nf(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=T_(c)?{documents:yk(s,c)}:{query:hT(s,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=hk(s,o.resumeToken);const d=uT(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ee.min())>0){a.readTime=Sl(s,o.snapshotVersion.toTimestamp());const d=uT(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function k3(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=Nf(this.serializer),n.removeTarget=e,this.e_(n)}}class EG extends hO{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=function M3(t,e){return t&&t.length>0?(Ie(void 0!==e),t.map(n=>function(i,s){let o=an(i.updateTime?i.updateTime:s);return o.isEqual(Ee.min())&&(o=an(s)),new v3(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=an(e.commitTime);return this.listener.I_(r,n)}return Ie(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Nf(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>xf(this.serializer,r))};this.e_(n)}}class wG extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(L.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(L.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class DG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(on(n),this.f_=!1):J("OnlineStateTracker",n)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class AG{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(a=>{r.enqueueAndForget((0,z.Z)(function*(){var c;ra(o)&&(J("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,z.Z)(function*(p){const g=re(p);g.C_.add(4),yield Ll(g),g.M_.set("Unknown"),g.C_.delete(4),yield jf(g)}),function d(p){return c.apply(this,arguments)})(o))}))}),this.M_=new DG(r,i)}}function jf(t){return FT.apply(this,arguments)}function FT(){return FT=(0,z.Z)(function*(t){if(ra(t))for(const e of t.v_)yield e(!0)}),FT.apply(this,arguments)}function Ll(t){return VT.apply(this,arguments)}function VT(){return VT=(0,z.Z)(function*(t){for(const e of t.v_)yield e(!1)}),VT.apply(this,arguments)}function G_(t,e){const n=re(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),jT(n)?UT(n):Vl(n).Ho()&&BT(n,e))}function Hf(t,e){const n=re(t),r=Vl(n);n.D_.delete(e),r.Ho()&&fO(n,e),0===n.D_.size&&(r.Ho()?r.Zo():ra(n)&&n.M_.set("Unknown"))}function BT(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vl(t).u_(e)}function fO(t,e){t.x_.Oe(e),Vl(t).c_(e)}function UT(t){t.x_=new A3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Vl(t).start(),t.M_.g_()}function jT(t){return ra(t)&&!Vl(t).jo()&&t.D_.size>0}function ra(t){return 0===re(t).C_.size}function pO(t){t.x_=void 0}function CG(t){return HT.apply(this,arguments)}function HT(){return HT=(0,z.Z)(function*(t){t.D_.forEach((e,n)=>{BT(t,e)})}),HT.apply(this,arguments)}function bG(t,e){return $T.apply(this,arguments)}function $T(){return $T=(0,z.Z)(function*(t,e){pO(t),jT(t)?(t.M_.w_(e),UT(t)):t.M_.set("Unknown")}),$T.apply(this,arguments)}function SG(t,e,n){return qT.apply(this,arguments)}function qT(){return qT=(0,z.Z)(function*(t,e,n){if(t.M_.set("Online"),e instanceof uk&&2===e.state&&e.cause)try{yield(r=(0,z.Z)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.D_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.D_.delete(c),s.x_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield W_(t,r)}else if(e instanceof P_?t.x_.$e(e):e instanceof ak?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(Ee.min()))try{const r=yield nO(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.D_.get(d);p&&s.D_.set(d,p.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{const p=s.D_.get(c);if(!p)return;s.D_.set(c,p.withResumeToken(Pn.EMPTY_BYTE_STRING,p.snapshotVersion)),fO(s,c);const g=new to(p.target,c,d,p.sequenceNumber);BT(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){J("RemoteStore","Failed to raise snapshot:",r),yield W_(t,r)}var r}),qT.apply(this,arguments)}function W_(t,e,n){return zT.apply(this,arguments)}function zT(){return zT=(0,z.Z)(function*(t,e,n){if(!zo(e))throw e;t.C_.add(1),yield Ll(t),t.M_.set("Offline"),n||(n=()=>nO(t.localStore)),t.asyncQueue.enqueueRetryable((0,z.Z)(function*(){J("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield jf(t)}))}),zT.apply(this,arguments)}function gO(t,e){return e().catch(n=>W_(t,n,e))}function Fl(t){return GT.apply(this,arguments)}function GT(){return GT=(0,z.Z)(function*(t){const e=re(t),n=ia(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;RG(e);)try{const i=yield fG(e.localStore,r);if(null===i){0===e.b_.length&&n.Zo();break}r=i.batchId,PG(e,i)}catch(i){yield W_(e,i)}mO(e)&&_O(e)}),GT.apply(this,arguments)}function RG(t){return ra(t)&&t.b_.length<10}function PG(t,e){t.b_.push(e);const n=ia(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function mO(t){return ra(t)&&!ia(t).jo()&&t.b_.length>0}function _O(t){ia(t).start()}function NG(t){return WT.apply(this,arguments)}function WT(){return WT=(0,z.Z)(function*(t){ia(t).E_()}),WT.apply(this,arguments)}function xG(t){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,z.Z)(function*(t){const e=ia(t);for(const n of t.b_)e.P_(n.mutations)}),ZT.apply(this,arguments)}function MG(t,e,n){return KT.apply(this,arguments)}function KT(){return KT=(0,z.Z)(function*(t,e,n){const r=t.b_.shift(),i=sT.from(r,e,n);yield gO(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Fl(t)}),KT.apply(this,arguments)}function kG(t,e){return QT.apply(this,arguments)}function QT(){return QT=(0,z.Z)(function*(t,e){var n;e&&ia(t).h_&&(yield(n=(0,z.Z)(function*(i,s){if(nk(a=s.code)&&a!==L.ABORTED){const o=i.b_.shift();ia(i).Yo(),yield gO(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Fl(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),mO(t)&&_O(t)}),QT.apply(this,arguments)}function yO(t,e){return YT.apply(this,arguments)}function YT(){return YT=(0,z.Z)(function*(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=ra(n);n.C_.add(3),yield Ll(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield jf(n)}),YT.apply(this,arguments)}function JT(t,e){return XT.apply(this,arguments)}function XT(){return XT=(0,z.Z)(function*(t,e){const n=re(t);e?(n.C_.delete(2),yield jf(n)):e||(n.C_.add(2),yield Ll(n),n.M_.set("Unknown"))}),XT.apply(this,arguments)}function Vl(t){return t.O_||(t.O_=function(n,r,i){const s=re(n);return s.A_(),new IG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:CG.bind(null,t),Io:bG.bind(null,t),a_:SG.bind(null,t)}),t.v_.push(function(){var e=(0,z.Z)(function*(n){n?(t.O_.Yo(),jT(t)?UT(t):t.M_.set("Unknown")):(yield t.O_.stop(),pO(t))});return function(n){return e.apply(this,arguments)}}())),t.O_}function ia(t){return t.N_||(t.N_=function(n,r,i){const s=re(n);return s.A_(),new EG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:NG.bind(null,t),Io:kG.bind(null,t),T_:xG.bind(null,t),I_:MG.bind(null,t)}),t.v_.push(function(){var e=(0,z.Z)(function*(n){n?(t.N_.Yo(),yield Fl(t)):(yield t.N_.stop(),t.b_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))});return function(n){return e.apply(this,arguments)}}())),t.N_}class eD{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new eD(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bl(t,e){if(on("AsyncQueue",`${e}: ${t}`),zo(t))return new Q(L.UNAVAILABLE,`${e}: ${t}`);throw t}class Ul{constructor(e){this.comparator=e?(n,r)=>e(n,r)||oe.comparator(n.key,r.key):(n,r)=>oe.comparator(n.key,r.key),this.keyedMap=Tf(),this.sortedSet=new Nt(this.comparator)}static emptySet(e){return new Ul(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ul;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class vO{constructor(){this.B_=new Nt(oe.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?0!==e.type&&3===r.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==r.type?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.B_=this.B_.remove(n):1===e.type&&2===r.type?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):he():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class jl{constructor(e,n,r,i,s,o,a,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new jl(e,n,Ul.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class OG{constructor(){this.k_=void 0,this.listeners=[]}}class LG{constructor(){this.queries=new Xs(e=>FM(e),Ef),this.onlineState="Unknown",this.q_=new Set}}function tD(t,e){return nD.apply(this,arguments)}function nD(){return nD=(0,z.Z)(function*(t,e){const n=re(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new OG),i)try{s.k_=yield n.onListen(r)}catch(o){const a=Bl(o,`Initialization of query '${Tl(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&sD(n)}),nD.apply(this,arguments)}function rD(t,e){return iD.apply(this,arguments)}function iD(){return iD=(0,z.Z)(function*(t,e){const n=re(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),iD.apply(this,arguments)}function FG(t,e){const n=re(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&sD(n)}function VG(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function sD(t){t.q_.forEach(e=>{e.next()})}class oD{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new jl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){return!e.fromCache||(!this.options.J_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}H_(e){e=jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class BG{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}class IO{constructor(e){this.serializer=e}hs(e){return Es(this.serializer,e)}Ps(e){return e.metadata.exists?_k(this.serializer,e.document,!1):Ht.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return an(e)}}class UG{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=EO(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=it.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new IO(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||Ue()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,z.Z)(function*(){const n=yield function pG(t,e,n,r){return ST.apply(this,arguments)}(e.localStore,new IO(e.serializer),e.documents,e.X_.id),r=e.ta(e.documents);for(const i of e.queries)yield gG(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,na:e.collectionGroups,ra:n}})()}}function EO(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class wO{constructor(e){this.key=e}}class TO{constructor(e){this.key=e}}class DO{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Ue(),this.mutatedKeys=Ue(),this._a=BM(e),this.aa=new Ul(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new vO,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const _=i.get(p),v=wf(this.query,g)?g:null,E=!!_&&this.mutatedKeys.has(_.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let C=!1;_&&v?_.data.isEqual(v.data)?E!==w&&(r.track({type:3,doc:v}),C=!0):this.ha(_,v)||(r.track({type:2,doc:v}),C=!0,(c&&this._a(v,c)>0||d&&this._a(v,d)<0)&&(a=!0)):!_&&v?(r.track({type:0,doc:v}),C=!0):_&&!v&&(r.track({type:1,doc:_}),C=!0,(c||d)&&(a=!0)),C&&(v?(o=o.add(v),s=w?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const p="F"===this.query.limitType?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((p,g)=>function(v,E){const w=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return w(v)-w(E)}(p.type,g.type)||this._a(p.doc,g.doc)),this.Pa(r),i=null!=i&&i;const a=n&&!i?this.Ia():[],c=0===this.oa.size&&this.current&&!i?1:0,d=c!==this.sa;return this.sa=c,0!==o.length||d?{snapshot:new jl(this.query,e.aa,s,o,e.mutatedKeys,0===c,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new vO,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Ue(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new TO(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new wO(r))}),n}da(e){this.ia=e.ls,this.oa=Ue();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return jl.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class jG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class HG{constructor(e){this.key=e,this.Ra=!1}}class $G{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Xs(a=>FM(a),Ef),this.fa=new Map,this.ga=new Set,this.pa=new Nt(oe.comparator),this.ya=new Map,this.wa=new IT,this.Sa={},this.ba=new Map,this.Da=Eu.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function qG(t,e){return aD.apply(this,arguments)}function aD(){return aD=(0,z.Z)(function*(t,e){const n=PD(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=yield kl(n.localStore,Cr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield uD(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&G_(n.remoteStore,o)}return i}),aD.apply(this,arguments)}function uD(t,e,n,r,i){return cD.apply(this,arguments)}function cD(){return cD=(0,z.Z)(function*(t,e,n,r,i){t.va=(g,_,v)=>{return(E=(0,z.Z)(function*(C,k,R,M){let X=k.view.ca(R);X.Zi&&(X=yield j_(C.localStore,k.query,!1).then(({documents:gn})=>k.view.ca(gn,X)));const ne=M&&M.targetChanges.get(k.targetId),Ae=M&&null!=M.targetMismatches.get(k.targetId),ut=k.view.applyChanges(X,C.isPrimaryClient,ne,Ae);return vD(C,k.targetId,ut.Ta),ut.snapshot}),function w(C,k,R,M){return E.apply(this,arguments)})(t,g,_,v);var E};const s=yield j_(t.localStore,e,!0),o=new DO(e,s.ls),a=o.ca(s.documents),c=Rf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=o.applyChanges(a,t.isPrimaryClient,c);vD(t,n,d.Ta);const p=new jG(e,n,o);return t.ma.set(e,p),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),d.snapshot}),cD.apply(this,arguments)}function zG(t,e){return lD.apply(this,arguments)}function lD(){return lD=(0,z.Z)(function*(t,e){const n=re(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!Ef(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ol(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Hf(n.remoteStore,r.targetId),Hl(n,r.targetId)}).catch(qo))):(Hl(n,r.targetId),yield Ol(n.localStore,r.targetId,!0))}),lD.apply(this,arguments)}function dD(){return dD=(0,z.Z)(function*(t,e,n){const r=ND(t);try{const i=yield function(o,a){const c=re(o),d=Ut.now(),p=a.reduce((v,E)=>v.add(E.key),Ue());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let E=Br(),w=Ue();return c.ss.getEntries(v,p).next(C=>{E=C,E.forEach((k,R)=>{R.isValidDocument()||(w=w.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,E)).next(C=>{g=C;const k=[];for(const R of a){const M=E3(R,g.get(R.key).overlayedDocument);null!=M&&k.push(new eo(R.key,M,wM(M.value.mapValue),Zt.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,k,a)}).next(C=>{_=C;const k=C.applyToLocalDocumentSet(g,w);return c.documentOverlayCache.saveOverlays(v,C.batchId,k)})}).then(()=>({batchId:_.batchId,changes:jM(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let d=o.Sa[o.currentUser.toKey()];d||(d=new Nt(Ne)),d=d.insert(a,c),o.Sa[o.currentUser.toKey()]=d}(r,i.batchId,n),yield no(r,i.changes),yield Fl(r.remoteStore)}catch(i){const s=Bl(i,"Failed to persist write");n.reject(s)}}),dD.apply(this,arguments)}function AO(t,e){return hD.apply(this,arguments)}function hD(){return hD=(0,z.Z)(function*(t,e){const n=re(t);try{const r=yield function hG(t,e){const n=re(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((p,g)=>{const _=i.get(g);if(!_)return;a.push(n.qr.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.qr.addMatchingKeys(s,p.addedDocuments,g)));let v=_.withSequenceNumber(s.currentSequenceNumber);var w,C,k;null!==e.targetMismatches.get(g)?v=v.withResumeToken(Pn.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,r)),i=i.insert(g,v),C=v,k=p,(0===(w=_).resumeToken.approximateByteSize()||C.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8||k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0)&&a.push(n.qr.updateTargetData(s,v))});let c=Br(),d=Ue();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),a.push(rO(s,o,e.documentUpdates).next(p=>{c=p.us,d=p.cs})),!r.isEqual(Ee.min())){const p=n.qr.getLastRemoteSnapshotVersion(s).next(g=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(p)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.ts=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Ie(o.Ra):i.removedDocuments.size>0&&(Ie(o.Ra),o.Ra=!1))}),yield no(n,r,e)}catch(r){yield qo(r)}}),hD.apply(this,arguments)}function CO(t,e,n){const r=re(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=re(o);c.onlineState=a;let d=!1;c.queries.forEach((p,g)=>{for(const _ of g.listeners)_.Q_(a)&&(d=!0)}),d&&sD(c)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WG(t,e,n){return fD.apply(this,arguments)}function fD(){return fD=(0,z.Z)(function*(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new Nt(oe.comparator);o=o.insert(s,Ht.newNoDocument(s,Ee.min()));const a=Ue().add(s),c=new Sf(Ee.min(),new Map,new Nt(Ne),o,a);yield AO(r,c),r.pa=r.pa.remove(s),r.ya.delete(e),ID(r)}else yield Ol(r.localStore,e,!1).then(()=>Hl(r,e,n)).catch(qo)}),fD.apply(this,arguments)}function ZG(t,e){return pD.apply(this,arguments)}function pD(){return pD=(0,z.Z)(function*(t,e){const n=re(t),r=e.batch.batchId;try{const i=yield function dG(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,d,p){const g=d.batch,_=g.keys();let v=N.resolve();return _.forEach(E=>{v=v.next(()=>p.getEntry(c,E)).next(w=>{const C=d.docVersions.get(E);Ie(null!==C),w.version.compareTo(C)<0&&(g.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),p.addEntry(w)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ue();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);yD(n,r,null),_D(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield no(n,i)}catch(i){yield qo(i)}}),pD.apply(this,arguments)}function KG(t,e,n){return gD.apply(this,arguments)}function gD(){return gD=(0,z.Z)(function*(t,e,n){const r=re(t);try{const i=yield function(o,a){const c=re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return c.mutationQueue.lookupMutationBatch(d,a).next(g=>(Ie(null!==g),p=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,p,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>c.localDocuments.getDocuments(d,p))})}(r.localStore,e);yD(r,e,n),_D(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield no(r,i)}catch(i){yield qo(i)}}),gD.apply(this,arguments)}function mD(){return mD=(0,z.Z)(function*(t,e){const n=re(t);ra(n.remoteStore)||J("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=re(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=Bl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),mD.apply(this,arguments)}function _D(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function yD(t,e,n){const r=re(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function Hl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||bO(t,r)})}function bO(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Hf(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),ID(t))}function vD(t,e,n){for(const r of n)r instanceof wO?(t.wa.addReference(r.key,e),YG(t,r)):r instanceof TO?(J("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||bO(t,r.key)):he()}function YG(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(J("SyncEngine","New document in limbo: "+n),t.ga.add(r),ID(t))}function ID(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new oe(it.fromString(e)),r=t.Da.next();t.ya.set(r,new HG(n)),t.pa=t.pa.insert(n,r),G_(t.remoteStore,new to(Cr(El(n.path)),r,"TargetPurposeLimboResolution",Yr._e))}}function no(t,e,n){return ED.apply(this,arguments)}function ED(){return ED=(0,z.Z)(function*(t,e,n){const r=re(t),i=[],s=[],o=[];var a;r.ma.isEmpty()||(r.ma.forEach((a,c)=>{o.push(r.va(c,e,n).then(d=>{if((d||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,d?.fromCache?"not-current":"current"),d){i.push(d);const p=AT.Qi(c.targetId,d);s.push(p)}}))}),yield Promise.all(o),r.Va.a_(i),yield(a=(0,z.Z)(function*(d,p){const g=re(d);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>N.forEach(p,v=>N.forEach(v.ki,E=>g.persistence.referenceDelegate.addReference(_,v.targetId,E)).next(()=>N.forEach(v.qi,E=>g.persistence.referenceDelegate.removeReference(_,v.targetId,E)))))}catch(_){if(!zo(_))throw _;J("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of p){const v=_.targetId;if(!_.fromCache){const E=g.ts.get(v),C=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);g.ts=g.ts.insert(v,C)}}}),function c(d,p){return a.apply(this,arguments)})(r.localStore,s))}),ED.apply(this,arguments)}function JG(t,e){return wD.apply(this,arguments)}function wD(){return wD=(0,z.Z)(function*(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=yield tO(n.localStore,e);n.currentUser=e,(s=n).ba.forEach(a=>{a.forEach(c=>{c.reject(new Q(L.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ba.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield no(n,r._s)}var s}),wD.apply(this,arguments)}function XG(t,e){const n=re(t),r=n.ya.get(e);if(r&&r.Ra)return Ue().add(r.key);{let i=Ue();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function e6(t,e){return TD.apply(this,arguments)}function TD(){return TD=(0,z.Z)(function*(t,e){const n=re(t),r=yield j_(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&vD(n,e.targetId,i.Ta),i}),TD.apply(this,arguments)}function t6(t,e){return DD.apply(this,arguments)}function DD(){return DD=(0,z.Z)(function*(t,e){const n=re(t);return sO(n.localStore,e).then(r=>no(n,r))}),DD.apply(this,arguments)}function n6(t,e,n,r){return AD.apply(this,arguments)}function AD(){return AD=(0,z.Z)(function*(t,e,n,r){const i=re(t),s=yield function(a,c){const d=re(a),p=re(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",g=>p.Cn(g,c).next(_=>_?d.localDocuments.getDocuments(g,_):N.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===n?yield Fl(i.remoteStore):"acknowledged"===n||"rejected"===n?(yD(i,e,r||null),_D(i,e),c=e,re(re(i.localStore).mutationQueue).Fn(c)):he(),yield no(i,s)):J("SyncEngine","Cannot apply mutation batch with id: "+e)}),AD.apply(this,arguments)}function CD(){return CD=(0,z.Z)(function*(t,e){const n=re(t);if(PD(n),ND(n),!0===e&&!0!==n.Ca){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield SO(n,r.toArray());n.Ca=!0,yield JT(n.remoteStore,!0);for(const s of i)G_(n.remoteStore,s)}else if(!1===e&&!1!==n.Ca){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Hl(n,o),Ol(n.localStore,o,!0))),Hf(n.remoteStore,o)}),yield i,yield SO(n,r),function(o){const a=re(o);a.ya.forEach((c,d)=>{Hf(a.remoteStore,d)}),a.wa.Vr(),a.ya=new Map,a.pa=new Nt(oe.comparator)}(n),n.Ca=!1,yield JT(n.remoteStore,!1)}}),CD.apply(this,arguments)}function SO(t,e,n){return bD.apply(this,arguments)}function bD(){return bD=(0,z.Z)(function*(t,e,n){const r=re(t),i=[],s=[];for(const o of e){let a;const c=r.fa.get(o);if(c&&0!==c.length){a=yield kl(r.localStore,Cr(c[0]));for(const d of c){const p=r.ma.get(d),g=yield e6(r,p);g.snapshot&&s.push(g.snapshot)}}else{const d=yield iO(r.localStore,o);a=yield kl(r.localStore,d),yield uD(r,RO(d),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}),bD.apply(this,arguments)}function RO(t){return kM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function i6(t){return n=re(t).localStore,re(re(n).persistence).Bi();var n}function s6(t,e,n,r){return SD.apply(this,arguments)}function SD(){return SD=(0,z.Z)(function*(t,e,n,r){const i=re(t);if(i.Ca)return void J("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield sO(i.localStore,VM(s[0])),a=Sf.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Pn.EMPTY_BYTE_STRING);yield no(i,o,a);break}case"rejected":yield Ol(i.localStore,e,!0),Hl(i,e,r);break;default:he()}}),SD.apply(this,arguments)}function o6(t,e,n){return RD.apply(this,arguments)}function RD(){return RD=(0,z.Z)(function*(t,e,n){const r=PD(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){J("SyncEngine","Adding an already active target "+i);continue}const s=yield iO(r.localStore,i),o=yield kl(r.localStore,s);yield uD(r,RO(s),o.targetId,!1,o.resumeToken),G_(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&(yield Ol(r.localStore,i,!1).then(()=>{Hf(r.remoteStore,i),Hl(r,i)}).catch(qo))}}),RD.apply(this,arguments)}function PD(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WG.bind(null,e),e.Va.a_=FG.bind(null,e.eventManager),e.Va.Fa=VG.bind(null,e.eventManager),e}function ND(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KG.bind(null,e),e}class $f{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,z.Z)(function*(){n.serializer=Uf(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return eO(this.persistence,new Xk,e.initialUser,this.serializer)}createPersistence(e){return new ET(V_.jr,this.serializer)}createSharedClientState(e){return new cO}terminate(){var e=this;return(0,z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xD extends $f{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield n().call(r,e),yield r.xa.initialize(r,e),yield ND(r.xa.syncEngine),yield Fl(r.xa.remoteStore),yield r.persistence.mi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return eO(this.persistence,new Xk,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new qk(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new M9(n,this.persistence);return new x9(e.asyncQueue,r)}createPersistence(e){const n=DT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new TT(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,dO(),z_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new cO}}class PO extends xD{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield n().call(r,e);const i=r.xa.syncEngine;r.sharedClientState instanceof MT&&(r.sharedClientState.syncEngine={Ys:n6.bind(null,i),Zs:s6.bind(null,i),Xs:o6.bind(null,i),Bi:i6.bind(null,i),Js:t6.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.mi(function(){var s=(0,z.Z)(function*(o){yield function r6(t,e){return CD.apply(this,arguments)}(r.xa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=dO();if(!MT.D(n))throw new Q(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=DT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new MT(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class $l{initialize(e,n){var r=this;return(0,z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>CO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=JG.bind(null,r.syncEngine),yield JT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LG}createDatastore(e){const n=Uf(e.databaseInfo.databaseId),r=new vG(e.databaseInfo);return new wG(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>CO(this.syncEngine,n,0),a=lO.D()?new lO:new mG,new AG(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,c,d,p){const g=new $G(i,s,o,a,c,d);return p&&(g.Ca=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,z.Z)(function*(r){const i=re(r);J("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield Ll(i),i.F_.shutdown(),i.M_.set("Unknown")}),function n(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function NO(t,e=10240){let n=0;return{read:()=>(0,z.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,z.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Z_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):on("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class c6{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new Rn,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){var e=this;return(0,z.Z)(function*(){return e.metadata.promise})()}Ma(){var e=this;return(0,z.Z)(function*(){return yield e.getMetadata(),e.ka()})()}ka(){var e=this;return(0,z.Z)(function*(){const n=yield e.qa();if(null===n)return null;const r=e.La.decode(n),i=Number(r);isNaN(i)&&e.Qa(`length string (${r}) is not valid number`);const s=yield e.Ka(i);return new BG(JSON.parse(s),n.length+i)})()}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){var e=this;return(0,z.Z)(function*(){for(;e.$a()<0&&!(yield e.Ua()););if(0===e.buffer.length)return null;const n=e.$a();n<0&&e.Qa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Ka(e){var n=this;return(0,z.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ua())&&n.Qa("Reached the end of bundle when more is expected.");const r=n.La.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){var e=this;return(0,z.Z)(function*(){const n=yield e.Ba.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class l6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,z.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Q(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,z.Z)(function*(o,a){const c=re(o),d=Nf(c.serializer)+"/documents",p={documents:a.map(E=>Pf(c.serializer,E))},g=yield c.Co("BatchGetDocuments",d,p,a.length),_=new Map;g.forEach(E=>{const w=function N3(t,e){return"found"in e?function(r,i){Ie(!!i.found);const s=Es(r,i.found.name),o=an(i.found.updateTime),a=i.found.createTime?an(i.found.createTime):Ee.min(),c=new Kn({mapValue:{fields:i.found.fields}});return Ht.newFoundDocument(s,o,a,c)}(t,e):"missing"in e?function(r,i){Ie(!!i.missing),Ie(!!i.readTime);const s=Es(r,i.missing),o=an(i.readTime);return Ht.newNoDocument(s,o)}(t,e):he()}(c.serializer,E);_.set(w.key.toString(),w)});const v=[];return a.forEach(E=>{const w=_.get(E.toString());Ie(!!w),v.push(w)}),v}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new bl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=oe.fromPath(i);e.mutations.push(new rT(s,e.precondition(s)))}),yield(r=(0,z.Z)(function*(s,o){const a=re(s),c=Nf(a.serializer)+"/documents",d={writes:o.map(p=>xf(a.serializer,p))};yield a.wo("Commit",c,d)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw he();n=Ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Q(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ee.min())?Zt.exists(!1):Zt.updateTime(n):Zt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ee.min()))throw new Q(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zt.updateTime(n)}return Zt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class d6{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new OT(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){var e=this;this.zo.ko((0,z.Z)(function*(){const n=new l6(e.datastore),r=e.za(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ja(s)}))}).catch(i=>{e.ja(i)})}))}za(e){try{const n=this.updateFunction(e);return!ff(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!nk(n)}return!1}}class h6{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ln.UNAUTHENTICATED,this.clientId=Jx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,z.Z)(function*(a){J("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return(0,z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Bl(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function K_(t,e){return MD.apply(this,arguments)}function MD(){return MD=(0,z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,z.Z)(function*(s){r.isEqual(s)||(yield tO(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),MD.apply(this,arguments)}function kD(t,e){return OD.apply(this,arguments)}function OD(){return OD=(0,z.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield LD(t);J("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>yO(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>yO(e.remoteStore,s)),t._onlineComponents=e}),OD.apply(this,arguments)}function xO(t){return"FirebaseError"===t.name?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function LD(t){return FD.apply(this,arguments)}function FD(){return FD=(0,z.Z)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{yield K_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!xO(n))throw n;Fr("Error using user provided cache. Falling back to memory cache: "+n),yield K_(t,new $f)}}else J("FirestoreClient","Using default OfflineComponentProvider"),yield K_(t,new $f);return t._offlineComponents}),FD.apply(this,arguments)}function Q_(t){return VD.apply(this,arguments)}function VD(){return VD=(0,z.Z)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),yield kD(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),yield kD(t,new $l))),t._onlineComponents}),VD.apply(this,arguments)}function MO(t){return LD(t).then(e=>e.persistence)}function ql(t){return LD(t).then(e=>e.localStore)}function kO(t){return Q_(t).then(e=>e.remoteStore)}function BD(t){return Q_(t).then(e=>e.syncEngine)}function zl(t){return UD.apply(this,arguments)}function UD(){return UD=(0,z.Z)(function*(t){const e=yield Q_(t),n=e.eventManager;return n.onListen=qG.bind(null,e.syncEngine),n.onUnlisten=zG.bind(null,e.syncEngine),n}),UD.apply(this,arguments)}function LO(t,e,n={}){const r=new Rn;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(s,o,a,c,d){const p=new Z_({next:_=>{o.enqueueAndForget(()=>rD(s,g));const v=_.docs.has(a);!v&&_.fromCache?d.reject(new Q(L.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&c&&"server"===c.source?d.reject(new Q(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new oD(El(a.path),p,{includeMetadataChanges:!0,J_:!0});return tD(s,g)}(yield zl(t),t.asyncQueue,e,n,r)})),r.promise}function FO(t,e,n={}){const r=new Rn;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(s,o,a,c,d){const p=new Z_({next:_=>{o.enqueueAndForget(()=>rD(s,g)),_.fromCache&&"server"===c.source?d.reject(new Q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(_)},error:_=>d.reject(_)}),g=new oD(a,p,{includeMetadataChanges:!0,J_:!0});return tD(s,g)}(yield zl(t),t.asyncQueue,e,n,r)})),r.promise}function VO(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const BO=new Map;function jD(t,e,n){if(!n)throw new Q(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UO(t,e,n,r){if(!0===e&&!0===r)throw new Q(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jO(t){if(!oe.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HO(t){if(oe.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Y_(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":he()}function Xe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Y_(t);throw new Q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $O(t,e){if(e<=0)throw new Q(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class qO{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=VO(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qO(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new I9;switch(r.type){case"firstParty":return new D9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=BO.get(n);r&&(J("ComponentProvider","Removing Datastore"),BO.delete(n),r.terminate())}(this),Promise.resolve()}}class Qn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qn(this.firestore,e,this._query)}}class $t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}}class ws extends Qn{constructor(e,n,r){super(e,n,El(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new oe(e))}withConverter(e){return new ws(this.firestore,e,this._path)}}function GO(t,e,...n){if(t=(0,Dt.m9)(t),jD("collection","path",e),t instanceof qf){const r=it.fromString(e,...n);return HO(r),new ws(t,null,r)}{if(!(t instanceof $t||t instanceof ws))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return HO(r),new ws(t.firestore,null,r)}}function J_(t,e,...n){if(t=(0,Dt.m9)(t),1===arguments.length&&(e=Jx.newId()),jD("doc","path",e),t instanceof qf){const r=it.fromString(e,...n);return jO(r),new $t(t,null,new oe(r))}{if(!(t instanceof $t||t instanceof ws))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return jO(r),new $t(t.firestore,t instanceof ws?t.converter:null,new oe(r))}}function WO(t,e){return t=(0,Dt.m9)(t),e=(0,Dt.m9)(e),(t instanceof $t||t instanceof ws)&&(e instanceof $t||e instanceof ws)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function HD(t,e){return t=(0,Dt.m9)(t),e=(0,Dt.m9)(e),t instanceof Qn&&e instanceof Qn&&t.firestore===e.firestore&&Ef(t._query,e._query)&&t.converter===e.converter}class D6{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new OT(this,"async_queue_retry"),this.iu=()=>{const n=z_();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=z_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=z_();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Rn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){var e=this;return(0,z.Z)(function*(){if(0!==e.Ya.length){try{yield e.Ya[0](),e.Ya.shift(),e.zo.reset()}catch(n){if(!zo(n))throw n;J("AsyncQueue","Operation failed with retryable error: "+n)}e.Ya.length>0&&e.zo.ko(()=>e._u())}})()}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{throw this.eu=r,this.tu=!1,on("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=eD.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&he()}verifyOperationInProgress(){}uu(){var e=this;return(0,z.Z)(function*(){let n;do{n=e.Ja,yield n}while(n!==e.Ja)})()}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function $D(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class A6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xt extends qf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new D6,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZO(this),this._firestoreClient.terminate()}}function tn(t){return t._firestoreClient||ZO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ZO(t){var e,n,r;const i=t._freezeSettings(),s=(c=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new e3(t._databaseId,c,t._persistenceKey,(p=i).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,VO(p.experimentalLongPollingOptions),p.useFetchStreams));var c,p;t._firestoreClient=new h6(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function KO(t,e,n){const r=new Rn;return t.asyncQueue.enqueue((0,z.Z)(function*(){try{yield K_(t,n),yield kD(t,e),r.resolve()}catch(i){const s=i;if(!xO(s))throw s;Fr("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function QO(t){if(t._initialized||t._terminated)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ts(Pn.fromBase64String(e))}catch(n){throw new Q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ts(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ro{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tu{constructor(e){this._methodName=e}}class X_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}const L6=/^__.*__$/;class F6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new eo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cl(e,this.data,n,this.fieldTransforms)}}class YO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new eo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function JO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class ey{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new ey(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return ry(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(JO(this.Iu)&&L6.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class V6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uf(e)}pu(e,n,r,i=!1){return new ey({Iu:e,methodName:n,gu:r,path:jt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Du(t){const e=t._freezeSettings(),n=Uf(t._databaseId);return new V6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ty(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);WD("Data must be an object, but it was:",o,r);const a=t1(r,o);let c,d;if(s.merge)c=new Vr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const _=Wf(e,g,n);if(!o.contains(_))throw new Q(L.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);r1(p,_)||p.push(_)}c=new Vr(p),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new F6(new Kn(a),c,d)}class Gf extends Tu{_toFieldTransform(e){if(2!==e.Iu)throw e.mu(1===e.Iu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}function XO(t,e,n){return new ey({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class qD extends Tu{_toFieldTransform(e){return new Af(e.path,new Dl)}isEqual(e){return e instanceof qD}}class B6 extends Tu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=XO(this,e,!0),r=this.yu.map(s=>Au(s,n)),i=new pu(r);return new Af(e.path,i)}isEqual(e){return this===e}}class U6 extends Tu{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=XO(this,e,!0),r=this.yu.map(s=>Au(s,n)),i=new gu(r);return new Af(e.path,i)}isEqual(e){return this===e}}class j6 extends Tu{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Al(e.serializer,zM(e.serializer,this.wu));return new Af(e.path,n)}isEqual(e){return this===e}}function zD(t,e,n,r){const i=t.pu(1,e,n);WD("Data must be an object, but it was:",i,r);const s=[],o=Kn.empty();Go(r,(c,d)=>{const p=ny(e,c,n);d=(0,Dt.m9)(d);const g=i.Ru(p);if(d instanceof Gf)s.push(p);else{const _=Au(d,g);null!=_&&(s.push(p),o.set(p,_))}});const a=new Vr(s);return new YO(o,a,i.fieldTransforms)}function GD(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[Wf(e,r,n)],c=[i];if(s.length%2!=0)throw new Q(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(Wf(e,s[_])),c.push(s[_+1]);const d=[],p=Kn.empty();for(let _=a.length-1;_>=0;--_)if(!r1(d,a[_])){const v=a[_];let E=c[_];E=(0,Dt.m9)(E);const w=o.Ru(v);if(E instanceof Gf)d.push(v);else{const C=Au(E,w);null!=C&&(d.push(v),p.set(v,C))}}const g=new Vr(d);return new YO(p,g,o.fieldTransforms)}function e1(t,e,n,r=!1){return Au(n,t.pu(r?4:3,e))}function Au(t,e){if(n1(t=(0,Dt.m9)(t)))return WD("Unsupported field value:",e,t),t1(t,e);if(t instanceof Tu)return function(r,i){if(!JO(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Au(a,i.Vu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,Dt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return zM(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Ut.fromDate(r);return{timestampValue:Sl(i.serializer,s)}}if(r instanceof Ut){const s=new Ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sl(i.serializer,s)}}if(r instanceof X_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ts)return{bytesValue:hk(i.serializer,r._byteString)};if(r instanceof $t){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cT(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${Y_(r)}`)}(t,e)}function t1(t,e){const n={};return fM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Go(t,(r,i)=>{const s=Au(i,e.Eu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function n1(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ut||t instanceof X_||t instanceof Ts||t instanceof $t||t instanceof Tu)}function WD(t,e,n){if(!n1(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Y_(n);throw e.mu("an object"===r?t+" a custom object":t+" "+r)}var i}function Wf(t,e,n){if((e=(0,Dt.m9)(e))instanceof ro)return e._internalPath;if("string"==typeof e)return ny(t,e);throw ry("Field path arguments must be of type string or ",t,!1,void 0,n)}const H6=new RegExp("[~\\*/\\[\\]]");function ny(t,e,n){if(e.search(H6)>=0)throw ry(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ro(...e.split("."))._internalPath}catch{throw ry(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ry(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Q(L.INVALID_ARGUMENT,a+t+c)}function r1(t,e){return t.some(n=>n.isEqual(e))}class Zf{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(iy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class $6 extends Zf{data(){return super.data()}}function iy(t,e){return"string"==typeof e?ny(t,e):e instanceof ro?e._internalPath:e._delegate._internalPath}function i1(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZD{}class Kf extends ZD{}function sa(t,e,...n){let r=[];e instanceof ZD&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof Gl).length,a=s.filter(c=>c instanceof Qf).length;if(o>1||o>0&&a>0)throw new Q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qf extends Kf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qf(e,n,r)}_apply(e){const n=this._parse(e);return u1(e._query,n),new Qn(e.firestore,e.converter,tT(e._query,n))}_parse(e){const n=Du(e.firestore);return function(s,o,a,c,d,p,g){let _;if(d.isKeyField()){if("array-contains"===p||"array-contains-any"===p)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if("in"===p||"not-in"===p){a1(g,p);const v=[];for(const E of g)v.push(o1(c,s,E));_={arrayValue:{values:v}}}else _=o1(c,s,g)}else"in"!==p&&"not-in"!==p&&"array-contains-any"!==p||a1(g,p),_=e1(a,"where",g,"in"===p||"not-in"===p);return et.create(d,p,_)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Gl extends ZD{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gl(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:_t.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)u1(o,c),o=tT(o,c)}(e._query,n),new Qn(e.firestore,e.converter,tT(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class KD extends Kf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new KD(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vf(s,o)}(e._query,this._field,this._direction);return new Qn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Js(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class sy extends Kf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new sy(e,n,r)}_apply(e){return new Qn(e.firestore,e.converter,A_(e._query,this._limit,this._limitType))}}class oy extends Kf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new oy(e,n,r)}_apply(e){const n=s1(e,this.type,this._docOrFields,this._inclusive);return new Qn(e.firestore,e.converter,(s=n,new Js((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class ay extends Kf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new ay(e,n,r)}_apply(e){const n=s1(e,this.type,this._docOrFields,this._inclusive);return new Qn(e.firestore,e.converter,(s=n,new Js((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function s1(t,e,n,r){if(n[0]=(0,Dt.m9)(n[0]),n[0]instanceof Zf)return function(s,o,a,c,d){if(!c)throw new Q(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const p=[];for(const g of wl(s))if(g.field.isKeyField())p.push(hu(o,c.key));else{const _=c.data.field(g.field);if(y_(_))throw new Q(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const v=g.field.canonicalString();throw new Q(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}p.push(_)}return new Jo(p,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Du(t.firestore);return function(o,a,c,d,p,g){const _=o.explicitOrderBy;if(p.length>_.length)throw new Q(L.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let E=0;E<p.length;E++){const w=p[E];if(_[E].field.isKeyField()){if("string"!=typeof w)throw new Q(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof w}`);if(!eT(o)&&-1!==w.indexOf("/"))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${w}' contains a slash.`);const C=o.path.child(it.fromString(w));if(!oe.isDocumentKey(C))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const k=new oe(C);v.push(hu(a,k))}else{const C=e1(c,d,w);v.push(C)}}return new Jo(v,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function o1(t,e,n){if("string"==typeof(n=(0,Dt.m9)(n))){if(""===n)throw new Q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eT(e)&&-1!==n.indexOf("/"))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!oe.isDocumentKey(r))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hu(t,new oe(r))}if(n instanceof $t)return hu(t,n._key);throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Y_(n)}.`)}function a1(t,e){if(!Array.isArray(t)||0===t.length)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function u1(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Q(L.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class QD{convertValue(e,n="none"){switch(Qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return en(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw he()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Go(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new X_(en(e.latitude),en(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=v_(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gf(e));default:return null}}convertTimestamp(e){const n=Wo(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);Ie(wk(r));const i=new Zo(r.get(1),r.get(3)),s=new oe(r.popFirst(5));return i.isEqual(n)||on(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function uy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class J6 extends QD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}}class Cu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class io extends Zf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(iy("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yf extends io{data(e={}){return super.data(e)}}class oa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Cu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yf(this._firestore,this._userDataWriter,r.key,r,new Cu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Yf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new Yf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,p=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),p=o.indexOf(a.doc.key)),{type:e5(a.type),doc:c,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function e5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}function l1(t,e){return t instanceof io&&e instanceof io?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof oa&&e instanceof oa&&t._firestore===e._firestore&&HD(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class aa extends QD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}}function d1(t,e,n){t=Xe(t,$t);const r=Xe(t.firestore,xt),i=uy(t.converter,e,n);return Wl(r,[ty(Du(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Zt.none())])}function h1(t,e,n,...r){t=Xe(t,$t);const i=Xe(t.firestore,xt),s=Du(i);let o;return o="string"==typeof(e=(0,Dt.m9)(e))||e instanceof ro?GD(s,"updateDoc",t._key,e,n,r):zD(s,"updateDoc",t._key,e),Wl(i,[o.toMutation(t._key,Zt.exists(!0))])}function f1(t,...e){var n,r,i;t=(0,Dt.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||$D(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if($D(e[o])){const g=e[o];e[o]=null===(n=g.next)||void 0===n?void 0:n.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let c,d,p;if(t instanceof $t)d=Xe(t.firestore,xt),p=El(t._key.path),c={next:g=>{e[o]&&e[o](YD(d,t,g))},error:e[o+1],complete:e[o+2]};else{const g=Xe(t,Qn);d=Xe(g.firestore,xt),p=g._query;const _=new aa(d);c={next:v=>{e[o]&&e[o](new oa(d,_,g,v))},error:e[o+1],complete:e[o+2]},i1(t._query)}return function(_,v,E,w){const C=new Z_(w),k=new oD(v,C,E);return _.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return tD(yield zl(_),k)})),()=>{C.Na(),_.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return rD(yield zl(_),k)}))}}(tn(d),p,a,c)}function Wl(t,e){return function(r,i){const s=new Rn;return r.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function GG(t,e,n){return dD.apply(this,arguments)}(yield BD(r),i,s)})),s.promise}(tn(t),e)}function YD(t,e,n){const r=n.docs.get(e._key),i=new aa(t);return new io(t,i,e._key,r,new Cu(n.hasPendingWrites,n.fromCache),e.converter)}const y5={maxAttempts:5};class p1{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Du(e)}set(e,n,r){this._verifyNotCommitted();const i=ua(e,this._firestore),s=uy(i.converter,n,r),o=ty(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Zt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=ua(e,this._firestore);let o;return o="string"==typeof(n=(0,Dt.m9)(n))||n instanceof ro?GD(this._dataReader,"WriteBatch.update",s._key,n,r,i):zD(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ua(e,this._firestore);return this._mutations=this._mutations.concat(new bl(n._key,Zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Q(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ua(t,e){if((t=(0,Dt.m9)(t)).firestore!==e)throw new Q(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class v5 extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Du(n)}get(n){const r=ua(n,this._firestore),i=new J6(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return he();const o=s[0];if(o.isFoundDocument())return new Zf(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Zf(this._firestore,i,r._key,null,r.converter);throw he()})}set(n,r,i){const s=ua(n,this._firestore),o=uy(s.converter,r,i),a=ty(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=ua(n,this._firestore);let a;return a="string"==typeof(r=(0,Dt.m9)(r))||r instanceof ro?GD(this._dataReader,"Transaction.update",o._key,r,i,s):zD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=ua(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ua(e,this._firestore),r=new aa(this._firestore);return super.get(e).then(i=>new io(this._firestore,r,n._key,i._document,new Cu(!1,!1),n.converter))}}function XD(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Q("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function y1(){if(typeof Uint8Array>"u")throw new Q("unimplemented","Uint8Arrays are not available in this environment.")}function v1(){if(!function J9(){return typeof atob<"u"}())throw new Q("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){fl=rl.SDK_VERSION,(0,rl._registerComponent)(new NN.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new xt(new w9(r.getProvider("auth-internal")),new A9(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zo(d.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,rl.registerVersion)(Kx,"4.4.0",e),(0,rl.registerVersion)(Kx,"4.4.0","esm2017")}();class Jf{constructor(e){this._delegate=e}static fromBase64String(e){return v1(),new Jf(Ts.fromBase64String(e))}static fromUint8Array(e){return y1(),new Jf(Ts.fromUint8Array(e))}toBase64(){return v1(),this._delegate.toBase64()}toUint8Array(){return y1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function e0(t){return function R5(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class P5{enableIndexedDbPersistence(e,n){return function b6(t,e){QO(t=Xe(t,xt));const n=tn(t);if(n._uninitializedComponentsProvider)throw new Q(L.FAILED_PRECONDITION,"SDK cache is already specified.");Fr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new $l;return KO(n,i,new xD(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function S6(t){QO(t=Xe(t,xt));const e=tn(t);if(e._uninitializedComponentsProvider)throw new Q(L.FAILED_PRECONDITION,"SDK cache is already specified.");Fr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new $l;return KO(e,r,new PO(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function R6(t){if(t._initialized&&!t._terminated)throw new Q(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rn;return t._queue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{yield(n=(0,z.Z)(function*(i){if(!Bi.D())return Promise.resolve();const s=i+"main";yield Bi.delete(s)}),function r(i){return n.apply(this,arguments)})(DT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class I1{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Fr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function zO(t,e,n,r={}){var i;const s=(t=Xe(t,qf))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=Ln.MOCK_USER;else{a=(0,Dt.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ln(d)}t._authCredentials=new E9(new Qx(a,c))}}(this._delegate,e,n,r)}enableNetwork(){return function N6(t){return function f6(t){return t.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield MO(t),n=yield kO(t);return e.setNetworkEnabled(!0),function(i){const s=re(i);return s.C_.delete(0),jf(s)}(n)}))}(tn(t=Xe(t,xt)))}(this._delegate)}disableNetwork(){return function x6(t){return function p6(t){return t.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield MO(t),n=yield kO(t);return e.setNetworkEnabled(!1),(r=(0,z.Z)(function*(s){const o=re(s);o.C_.add(0),yield Ll(o),o.M_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(tn(t=Xe(t,xt)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,UO("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function P6(t){return function(n){const r=new Rn;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function QG(t,e){return mD.apply(this,arguments)}(yield BD(n),r)})),r.promise}(tn(t=Xe(t,xt)))}(this._delegate)}onSnapshotsInSync(e){return function c5(t,e){return function _6(t,e){const n=new Z_(e);return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return i=yield zl(t),s=n,re(i).q_.add(s),void s.next();var i,s})),()=>{n.Na(),t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return i=yield zl(t),s=n,void re(i).q_.delete(s);var i,s}))}}(tn(t=Xe(t,xt)),$D(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zl(this,GO(this._delegate,e))}catch(n){throw br(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ii(this,J_(this._delegate,e))}catch(n){throw br(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Sr(this,function T6(t,e){if(t=Xe(t,qf),jD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qn(t,null,(r=e,new Js(it.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw br(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function I5(t,e,n){t=Xe(t,xt);const r=Object.assign(Object.assign({},y5),n);return function(s){if(s.maxAttempts<1)throw new Q(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new Rn;return s.asyncQueue.enqueueAndForget((0,z.Z)(function*(){const d=yield function OO(t){return Q_(t).then(e=>e.datastore)}(s);new d6(s.asyncQueue,d,a,o,c).run()})),c.promise}(tn(t),i=>e(new v5(t,i)),r)}(this._delegate,n=>e(new E1(this,n)))}batch(){return tn(this._delegate),new w1(new p1(this._delegate,e=>Wl(this._delegate,e)))}loadBundle(e){return function M6(t,e){const n=tn(t=Xe(t,xt)),r=new A6;return function y6(t,e,n,r){const i=function(o,a){let c;return c="string"==typeof o?ik().encode(o):o,p=function(p,g){if(p instanceof Uint8Array)return NO(p,g);if(p instanceof ArrayBuffer)return NO(new Uint8Array(p),g);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new c6(p,a);var p}(n,Uf(e));t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){!function a6(t,e,n){const r=re(t);var i;(i=(0,z.Z)(function*(o,a,c){try{const d=yield a.getMetadata();if(yield function(E,w){const C=re(E),k=an(w.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",R=>C.Kr.getBundleMetadata(R,w.id)).then(R=>!!R&&R.createTime.compareTo(k)>=0)}(o.localStore,d))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(E=d).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);c._updateProgress(EO(d));const p=new UG(d,o.localStore,a.serializer);let g=yield a.Ma();for(;g;){const v=yield p.ea(g);v&&c._updateProgress(v),g=yield a.Ma()}const _=yield p.complete();return yield no(o,_.ra,void 0),yield function(E,w){const C=re(E);return C.persistence.runTransaction("Save bundle","readwrite",k=>C.Kr.saveBundleMetadata(k,w))}(o.localStore,d),c._completeWith(_.progress),Promise.resolve(_.na)}catch(d){return Fr("SyncEngine",`Loading bundle failed with ${d}`),c._failWith(d),Promise.resolve(new Set)}var E}),function s(o,a,c){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield BD(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function k6(t,e){return function v6(t,e){return t.asyncQueue.enqueue((0,z.Z)(function*(){return function(r,i){const s=re(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(yield ql(t),e)}))}(tn(t=Xe(t,xt)),e).then(n=>n?new Qn(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Sr(this,n):null)}}class ly extends QD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jf(new Ts(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ii.forKey(n,this.firestore,null)}}class E1{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new ly(e)}get(e){const n=Su(e);return this._delegate.get(n).then(r=>new Xf(this._firestore,new io(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Su(e);return r?(XD("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Su(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Su(e);return this._delegate.delete(n),this}}class w1{constructor(e){this._delegate=e}set(e,n,r){const i=Su(e);return r?(XD("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Su(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Su(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class bu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Yf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ep(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=bu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new bu(e,new ly(e),n),i.set(n,s)),s}}bu.INSTANCES=new WeakMap;class Ii{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ly(e)}static forPath(e,n,r){if(e.length%2!=0)throw new Q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ii(n,new $t(n._delegate,r,new oe(e)))}static forKey(e,n,r){return new Ii(n,new $t(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zl(this.firestore,GO(this._delegate,e))}catch(n){throw br(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Dt.m9)(e))instanceof $t&&WO(this._delegate,e)}set(e,n){n=XD("DocumentReference.set",n);try{return n?d1(this._delegate,e,n):d1(this._delegate,e)}catch(r){throw br(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?h1(this._delegate,e):h1(this._delegate,e,n,...r)}catch(i){throw br(i,"updateDoc()","DocumentReference.update()")}}delete(){return function a5(t){return Wl(Xe(t.firestore,xt),[new bl(t._key,Zt.none())])}(this._delegate)}onSnapshot(...e){const n=T1(e),r=D1(e,i=>new Xf(this.firestore,new io(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return f1(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function n5(t){t=Xe(t,$t);const e=Xe(t.firestore,xt),n=tn(e),r=new aa(e);return function g6(t,e){const n=new Rn;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(s,o,a){try{const c=yield function(p,g){const _=re(p);return _.persistence.runTransaction("read document","readonly",v=>_.localDocuments.getDocument(v,g))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new Q(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const d=Bl(c,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield ql(t),e,n);var r})),n.promise}(n,t._key).then(i=>new io(e,r,t._key,i,new Cu(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function r5(t){t=Xe(t,$t);const e=Xe(t.firestore,xt);return LO(tn(e),t._key,{source:"server"}).then(n=>YD(e,t,n))}(this._delegate):function t5(t){t=Xe(t,$t);const e=Xe(t.firestore,xt);return LO(tn(e),t._key).then(n=>YD(e,t,n))}(this._delegate),n.then(r=>new Xf(this.firestore,new io(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ii(this.firestore,this._delegate.withConverter(e?bu.getInstance(this.firestore,e):null))}}function br(t,e,n){return t.message=t.message.replace(e,n),t}function T1(t){for(const e of t)if("object"==typeof e&&!e0(e))return e;return{}}function D1(t,e){var n,r;let i;return i=e0(t[0])?t[0]:e0(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Xf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ii(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return l1(this._delegate,e._delegate)}}class ep extends Xf{data(e){const n=this._delegate.data(e);return this._delegate._converter||function v9(t,e){t||he()}(void 0!==n),n}}class Sr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ly(e)}where(e,n,r){try{return new Sr(this.firestore,sa(this._delegate,function q6(t,e,n){const r=e,i=iy("where",t);return Qf._create(i,r,n)}(e,n,r)))}catch(i){throw br(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Sr(this.firestore,sa(this._delegate,function z6(t,e="asc"){const n=e,r=iy("orderBy",t);return KD._create(r,n)}(e,n)))}catch(r){throw br(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Sr(this.firestore,sa(this._delegate,function G6(t){return $O("limit",t),sy._create("limit",t,"F")}(e)))}catch(n){throw br(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Sr(this.firestore,sa(this._delegate,function W6(t){return $O("limitToLast",t),sy._create("limitToLast",t,"L")}(e)))}catch(n){throw br(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Sr(this.firestore,sa(this._delegate,function Z6(...t){return oy._create("startAt",t,!0)}(...e)))}catch(n){throw br(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Sr(this.firestore,sa(this._delegate,function K6(...t){return oy._create("startAfter",t,!1)}(...e)))}catch(n){throw br(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Sr(this.firestore,sa(this._delegate,function Q6(...t){return ay._create("endBefore",t,!1)}(...e)))}catch(n){throw br(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Sr(this.firestore,sa(this._delegate,function Y6(...t){return ay._create("endAt",t,!0)}(...e)))}catch(n){throw br(n,"endAt()","Query.endAt()")}}isEqual(e){return HD(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function s5(t){t=Xe(t,Qn);const e=Xe(t.firestore,xt),n=tn(e),r=new aa(e);return function m6(t,e){const n=new Rn;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(s,o,a){try{const c=yield j_(s,o,!0),d=new DO(o,c.ls),p=d.ca(c.documents),g=d.applyChanges(p,!1);a.resolve(g.snapshot)}catch(c){const d=Bl(c,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield ql(t),e,n);var r})),n.promise}(n,t._query).then(i=>new oa(e,r,t,i))}(this._delegate):"server"===e?.source?function o5(t){t=Xe(t,Qn);const e=Xe(t.firestore,xt),n=tn(e),r=new aa(e);return FO(n,t._query,{source:"server"}).then(i=>new oa(e,r,t,i))}(this._delegate):function i5(t){t=Xe(t,Qn);const e=Xe(t.firestore,xt),n=tn(e),r=new aa(e);return i1(t._query),FO(n,t._query).then(i=>new oa(e,r,t,i))}(this._delegate),n.then(r=>new t0(this.firestore,new oa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=T1(e),r=D1(e,i=>new t0(this.firestore,new oa(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return f1(this._delegate,n,r)}withConverter(e){return new Sr(this.firestore,this._delegate.withConverter(e?bu.getInstance(this.firestore,e):null))}}class x5{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ep(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class t0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Sr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ep(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new x5(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ep(this._firestore,r))})}isEqual(e){return l1(this._delegate,e._delegate)}}class Zl extends Sr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ii(this.firestore,e):null}doc(e){try{return new Ii(this.firestore,void 0===e?J_(this._delegate):J_(this._delegate,e))}catch(n){throw br(n,"doc()","CollectionReference.doc()")}}add(e){return function u5(t,e){const n=Xe(t.firestore,xt),r=J_(t),i=uy(t.converter,e);return Wl(n,[ty(Du(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Zt.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Ii(this.firestore,n))}isEqual(e){return WO(this._delegate,e._delegate)}withConverter(e){return new Zl(this.firestore,this._delegate.withConverter(e?bu.getInstance(this.firestore,e):null))}}function Su(t){return Xe(t,$t)}class n0{constructor(...e){this._delegate=new ro(...e)}static documentId(){return new n0(jt.keyField().canonicalString())}isEqual(e){return(e=(0,Dt.m9)(e))instanceof ro&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ru{constructor(e){this._delegate=e}static serverTimestamp(){const e=function w5(){return new qD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ru(e)}static delete(){const e=function E5(){return new Gf("deleteField")}();return e._methodName="FieldValue.delete",new Ru(e)}static arrayUnion(...e){const n=function T5(...t){return new B6("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Ru(n)}static arrayRemove(...e){const n=function D5(...t){return new U6("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Ru(n)}static increment(e){const n=function A5(t){return new j6("increment",t)}(e);return n._methodName="FieldValue.increment",new Ru(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const M5={Firestore:I1,GeoPoint:X_,Timestamp:Ut,Blob:Jf,Transaction:E1,WriteBatch:w1,DocumentReference:Ii,DocumentSnapshot:Xf,Query:Sr,QueryDocumentSnapshot:ep,QuerySnapshot:t0,CollectionReference:Zl,FieldPath:n0,FieldValue:Ru,setLogLevel:function N5(t){!function y9(t){$o.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function A1(t,e){return function L5(t,e=hN){return new lt(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function r0(t,e){return A1(t,e).pipe($e(n=>({payload:n,type:"query"})))}!function O5(t){(function k5(t,e){t.INTERNAL.registerComponent(new NN.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},M5)))})(t,(e,n)=>new I1(e,n,new P5)),t.registerVersion("@firebase/firestore-compat","0.3.23")}(Uo.Z);class C1{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=x1(r,n);return new R1(i,s,this.afs)}snapshotChanges(){return function F5(t,e){return A1(t,e).pipe(YE(void 0),JE(),$e(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Zr)}valueChanges(e={}){return this.snapshotChanges().pipe($e(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return S(this.ref.get(e)).pipe(Zr)}}function dy(t,e){return r0(t,e).pipe(YE(void 0),JE(),$e(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const d=s.find(g=>g.doc.ref.isEqual(a.ref)),p=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&p&&JSON.stringify(p.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function b1(t,e,n){return dy(t,n).pipe(XE((r,i)=>function V5(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function B5(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return s0(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return s0(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return s0(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),Ft(),$e(r=>r.map(i=>({type:i.type,payload:i}))))}function s0(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function S1(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class R1{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=dy(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe($e(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(YE(void 0),JE(),Fh(([r,i])=>i.length>0||!r),$e(([,r])=>r),Zr)}auditTrail(e){return this.stateChanges(e).pipe(XE((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=S1(e);return b1(this.query,n,this.afs.schedulers.outsideAngular).pipe(Zr)}valueChanges(e={}){return r0(this.query,this.afs.schedulers.outsideAngular).pipe($e(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Zr)}get(e){return S(this.query.get(e)).pipe(Zr)}add(e){return this.ref.add(e)}doc(e){return new C1(this.ref.doc(e),this.afs)}}class U5{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?dy(this.query,this.afs.schedulers.outsideAngular).pipe($e(n=>n.filter(r=>e.indexOf(r.type)>-1)),Fh(n=>n.length>0),Zr):dy(this.query,this.afs.schedulers.outsideAngular).pipe(Zr)}auditTrail(e){return this.stateChanges(e).pipe(XE((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=S1(e);return b1(this.query,n,this.afs.schedulers.outsideAngular).pipe(Zr)}valueChanges(e={}){return r0(this.query,this.afs.schedulers.outsideAngular).pipe($e(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Zr)}get(e){return S(this.query.get(e)).pipe(Zr)}}const P1=new le("angularfire2.enableFirestorePersistence"),N1=new le("angularfire2.firestore.persistenceSettings"),j5=new le("angularfire2.firestore.settings"),H5=new le("angularfire2.firestore.use-emulator");function x1(t,e=(n=>n)){return{query:e(t),ref:t}}let M1=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,c,d,p,g,_,v,E,w,C,k,R){this.schedulers=c;const M=QE(n,a,r),X=p;g&&SN(M,a,_,E,w,C,v,k),[this.firestore,this.persistenceEnabled$]=_N(`${M.name}.firestore`,"AngularFirestore",M.name,()=>{const ne=a.runOutsideAngular(()=>M.firestore());if(s&&ne.settings(s),X&&ne.useEmulator(...X),i&&!xm(o)){const Ae=()=>{try{return S(ne.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(ut){return typeof console<"u"&&console.warn(ut),ie(!1)}};return[ne,a.runOutsideAngular(Ae)]}return[ne,ie(!1)]},[s,X,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=x1(i,r),a=this.schedulers.ngZone.run(()=>s);return new R1(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new U5(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new C1(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(ue(jm),ue(Hm,8),ue(P1,8),ue(j5,8),ue(ss),ue(St),ue(gN),ue(N1,8),ue(H5,8),ue(RN,8),ue(wN,8),ue(TN,8),ue(DN,8),ue(AN,8),ue(CN,8),ue(bN,8),ue(fN,8))};static \u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),$5=(()=>{class t{constructor(){Uo.Z.registerVersion("angularfire",KE.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:P1,useValue:!0},{provide:N1,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=si({type:t});static \u0275inj=ti({providers:[M1]})}return t})(),o0=(()=>{class t{constructor(n){this.firestore=n,this.tasksCollection=this.firestore.collection("tasks",r=>r.orderBy("createdAt","asc"))}getTasks(){return this.tasksCollection.valueChanges()}createTask(n){const r=this.firestore.createId();return this.tasksCollection.doc(r).set({...n,taskId:r})}updateTask(n,r){return this.tasksCollection.doc(n).update(r)}deleteTask(n){return this.tasksCollection.doc(n).delete()}static#e=this.\u0275fac=function(r){return new(r||t)(ue(M1))};static#t=this.\u0275prov=Ye({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const q5=function(t){return{lineThroughComplete:t}};let z5=(()=>{class t{constructor(n){this.dataService=n}onTaskUpdated(){this.task.complete=!this.task.complete,this.dataService.updateTask(this.task.taskId,this.task)}onTaskDeleted(){this.dataService.deleteTask(this.task.taskId)}static#e=this.\u0275fac=function(r){return new(r||t)(Be(o0))};static#t=this.\u0275cmp=Ss({type:t,selectors:[["app-task"]],inputs:{task:"task"},decls:5,vars:6,consts:[[1,"item"],["type","checkbox","name","checkbox",3,"value","checked","change"],[3,"ngClass"],["src","assets/delete.svg","alt","delete",3,"click"]],template:function(r,i){1&r&&(xi(0,"div",0)(1,"input",1),Ih("change",function(){return i.onTaskUpdated()}),cs(),xi(2,"p",2),om(3),cs(),xi(4,"img",3),Ih("click",function(){return i.onTaskDeleted()}),cs()()),2&r&&(Lc(1),NI("value",i.task.taskId),Wc("checked",i.task.complete),Lc(1),Wc("ngClass",qS(4,q5,i.task.complete)),Lc(1),am(" ",i.task.taskDescription," "))},dependencies:[yP],styles:[".item[_ngcontent-%COMP%]{min-height:70px;display:flex;align-items:center;padding:5px}input[_ngcontent-%COMP%]:checked + p[_ngcontent-%COMP%]{text-decoration:line-through;text-decoration-color:#9653a2}input[type=checkbox][_ngcontent-%COMP%]{margin:20px}p[_ngcontent-%COMP%]{margin:0;padding:20px;font-size:20px;font-weight:200;color:#00204a}form.item[_ngcontent-%COMP%]{text-align:center;margin-left:20px}.item[_ngcontent-%COMP%]:last-child{border-bottom:0}img[_ngcontent-%COMP%]{width:40px;height:40px;margin-left:auto;margin-right:3%}.lineThroughComplete[_ngcontent-%COMP%]{text-decoration:line-through;text-decoration-color:#9653a2}.createdAt[_ngcontent-%COMP%]{font-size:15px}"]})}return t})(),G5=(()=>{class t{constructor(n){this.dataService=n}onTaskAdded(n){const r=n.value;n.value="";const i={taskId:"",taskDescription:r,complete:!1,createdAt:Ut.now()};this.dataService.createTask(i)}static#e=this.\u0275fac=function(r){return new(r||t)(Be(o0))};static#t=this.\u0275cmp=Ss({type:t,selectors:[["app-task-form"]],decls:5,vars:0,consts:[[1,"item"],["type","text","name","newItem","placeholder","New Item","autocomplete","off"],["TaskDescription",""],["name","list",3,"click"]],template:function(r,i){if(1&r){const s=function pb(){return K()}();xi(0,"div",0),Zc(1,"input",1,2),xi(3,"button",3),Ih("click",function(){!function Gp(t){return Te.lFrame.contextLView=t,t[Kt]}(s);const a=function lb(t){return function To(t,e){return t[e]}(function sc(){return Te.lFrame.contextLView}(),je+t)}(2);return function Wp(t){return Te.lFrame.contextLView=null,t}(i.onTaskAdded(a))}),om(4,"+"),cs()()}},styles:[".item[_ngcontent-%COMP%]{min-height:70px;display:flex;align-items:center;border-bottom:1px solid #f1f1f1}button[_ngcontent-%COMP%]{min-height:50px;width:50px;border-radius:50%;border-color:transparent;background-color:#9653a2;color:#fff;font-size:30px;padding-bottom:3px;border-width:0}input[type=text][_ngcontent-%COMP%]{text-align:center;height:60px;top:10px;border:none;background:transparent;font-size:20px;font-weight:200;width:313px}input[type=text][_ngcontent-%COMP%]:focus{outline:none;box-shadow:inset 0 -3px #9653a2}[_ngcontent-%COMP%]::placeholder{color:gray;opacity:1}"]})}return t})();function W5(t,e){if(1&t&&(xi(0,"div"),Zc(1,"app-task",1),cs()),2&t){const n=e.$implicit;Lc(1),Wc("task",n)}}let Z5=(()=>{class t{constructor(n){this.dataService=n,this.listTasks=[]}ngOnInit(){this.dataService.getTasks().subscribe(n=>{this.listTasks=n})}static#e=this.\u0275fac=function(r){return new(r||t)(Be(o0))};static#t=this.\u0275cmp=Ss({type:t,selectors:[["app-task-list"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"task"]],template:function(r,i){1&r&&(function ab(t,e,n,r,i,s,o,a){const c=K(),d=Ke(),p=t+je,g=d.firstCreatePass?function t2(t,e,n,r,i,s,o,a,c){const d=e.consts,p=Fc(e,t,4,o||null,Ji(d,a));gI(e,n,p,Ji(d,c)),uc(e,p);const g=p.tView=pI(2,p,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,p),g.queries=e.queries.embeddedTView(p)),p}(p,d,c,e,n,r,i,s,o):d.data[p];Mr(g,!1);const _=ub(d,c,g,t);ac()&&Rg(d,c,_,g),or(_,c),Kg(c,c[p]=RC(_,c,_,g)),Zu(g)&&hI(d,c,g),null!=o&&fI(c,g,a)}(0,W5,2,1,"div",0),Zc(1,"app-task-form")),2&r&&Wc("ngForOf",i.listTasks)},dependencies:[IP,z5,G5]})}return t})(),K5=(()=>{class t{constructor(){this.currentDate=(new Date).toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"long"})}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Ss({type:t,selectors:[["app-root"]],decls:5,vars:1,consts:[["id","heading",1,"box"],[1,"box"]],template:function(r,i){1&r&&(xi(0,"div",0)(1,"h1"),om(2),cs()(),xi(3,"div",1),Zc(4,"app-task-list"),cs()),2&r&&(Lc(2),FI(i.currentDate))},dependencies:[Z5],styles:["#heading[_ngcontent-%COMP%]{background-color:#9653a2;text-align:center}h1[_ngcontent-%COMP%]{color:#fff;padding:10px}.box[_ngcontent-%COMP%]{max-width:400px;margin:50px auto;background:#f5f5f5;border-radius:5px;box-shadow:5px 5px 15px -5px #0000004d}"]})}return t})();const Q5={apiKey:"AIzaSyBiIGnlnLU_09XT8HR7Rb8faPQqDEK6ziY",authDomain:"todolist-82b3e.firebaseapp.com",projectId:"todolist-82b3e",storageBucket:"todolist-82b3e.appspot.com",messagingSenderId:"468953761155",appId:"1:468953761155:web:556acbdc76c442ca83e2b6"};let Y5=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=si({type:t,bootstrap:[K5]});static#n=this.\u0275inj=ti({imports:[Q4,Sq,ez.initializeApp(Q5),$5]})}return t})();Z4().bootstrapModule(Y5).catch(t=>console.error(t))},106:(Ei,mn,xe)=>{xe.d(mn,{Z:()=>yn});var I=xe(58),De=xe(537),B=xe(534),Ce=xe(879);class ct{constructor(Re,Le){this._delegate=Re,this.firebase=Le,(0,B._addComponent)(Re,new De.wA("app-compat",()=>this,"PUBLIC")),this.container=Re.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this._delegate.automaticDataCollectionEnabled=Re}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Re=>{this._delegate.checkDestroyed(),Re()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(Re,Le=B._DEFAULT_ENTRY_NAME){var vn;this._delegate.checkDestroyed();const In=this._delegate.container.getProvider(Re);return!In.isInitialized()&&"EXPLICIT"===(null===(vn=In.getComponent())||void 0===vn?void 0:vn.instantiationMode)&&In.initialize(),In.getImmediate({identifier:Le})}_removeServiceInstance(Re,Le=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Re).clearInstance(Le)}_addComponent(Re){(0,B._addComponent)(this._delegate,Re)}_addOrOverwriteComponent(Re){(0,B._addOrOverwriteComponent)(this._delegate,Re)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const qt=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function Ge(){const ot=function _n(ot){const Re={},Le={__esModule:!0,initializeApp:function At(Fe,un={}){const G=B.initializeApp(Fe,un);if((0,I.r3)(Re,G.name))return Re[G.name];const kt=new ot(G,Le);return Re[G.name]=kt,kt},app:In,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function yt(Fe){const un=Fe.name,G=un.replace("-compat","");if(B._registerComponent(Fe)&&"PUBLIC"===Fe.type){const kt=(Ct=In())=>{if("function"!=typeof Ct[G])throw qt.create("invalid-app-argument",{appName:un});return Ct[G]()};void 0!==Fe.serviceProps&&(0,I.ZB)(kt,Fe.serviceProps),Le[G]=kt,ot.prototype[G]=function(...Ct){return this._getService.bind(this,un).apply(this,Fe.multipleInstances?Ct:[])}}return"PUBLIC"===Fe.type?Le[G]:null},removeApp:function vn(Fe){delete Re[Fe]},useAsService:function Yn(Fe,un){return"serverAuth"===un?null:un},modularAPIs:B}};function In(Fe){if(!(0,I.r3)(Re,Fe=Fe||B._DEFAULT_ENTRY_NAME))throw qt.create("no-app",{appName:Fe});return Re[Fe]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function at(){return Object.keys(Re).map(Fe=>Re[Fe])}}),In.App=ot,Le}(ct);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:Ge,extendNamespace:function Re(Le){(0,I.ZB)(ot,Le)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),ot}(),te=new Ce.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){te.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&te.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const yn=W;!function rt(ot){(0,B.registerVersion)("@firebase/app-compat","0.2.24",ot)}()},534:(Ei,mn,xe)=>{xe.r(mn),xe.d(mn,{FirebaseError:()=>Ce.ZR,SDK_VERSION:()=>ji,_DEFAULT_ENTRY_NAME:()=>Ur,_addComponent:()=>Ui,_addOrOverwriteComponent:()=>jn,_apps:()=>Xn,_clearComponents:()=>Hr,_components:()=>Di,_getProvider:()=>jr,_registerComponent:()=>As,_removeServiceInstance:()=>Cs,deleteApp:()=>Hn,getApp:()=>bs,getApps:()=>ao,initializeApp:()=>Pu,onLog:()=>uo,registerVersion:()=>Hi,setLogLevel:()=>Nu});var I=xe(861),De=xe(537),B=xe(879),Ce=xe(58);const ct=(V,b)=>b.some(Y=>V instanceof Y);let Mt,qt;const W=new WeakMap,te=new WeakMap,ye=new WeakMap,He=new WeakMap,rt=new WeakMap;let Re={get(V,b,Y){if(V instanceof IDBTransaction){if("done"===b)return te.get(V);if("objectStoreNames"===b)return V.objectStoreNames||ye.get(V);if("store"===b)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return At(V[b])},set:(V,b,Y)=>(V[b]=Y,!0),has:(V,b)=>V instanceof IDBTransaction&&("done"===b||"store"===b)||b in V};function In(V){return"function"==typeof V?function vn(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ge(){return qt||(qt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...b){return V.apply(at(this),b),At(W.get(this))}:function(...b){return At(V.apply(at(this),b))}:function(b,...Y){const pe=V.call(at(this),b,...Y);return ye.set(pe,b.sort?b.sort():[b]),At(pe)}}(V):(V instanceof IDBTransaction&&function ot(V){if(te.has(V))return;const b=new Promise((Y,pe)=>{const Pe=()=>{V.removeEventListener("complete",We),V.removeEventListener("error",ee),V.removeEventListener("abort",ee)},We=()=>{Y(),Pe()},ee=()=>{pe(V.error||new DOMException("AbortError","AbortError")),Pe()};V.addEventListener("complete",We),V.addEventListener("error",ee),V.addEventListener("abort",ee)});te.set(V,b)}(V),ct(V,function _n(){return Mt||(Mt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Re):V)}function At(V){if(V instanceof IDBRequest)return function yn(V){const b=new Promise((Y,pe)=>{const Pe=()=>{V.removeEventListener("success",We),V.removeEventListener("error",ee)},We=()=>{Y(At(V.result)),Pe()},ee=()=>{pe(V.error),Pe()};V.addEventListener("success",We),V.addEventListener("error",ee)});return b.then(Y=>{Y instanceof IDBCursor&&W.set(Y,V)}).catch(()=>{}),rt.set(b,V),b}(V);if(He.has(V))return He.get(V);const b=In(V);return b!==V&&(He.set(V,b),rt.set(b,V)),b}const at=V=>rt.get(V),Fe=["get","getKey","getAll","getAllKeys","count"],un=["put","add","delete","clear"],G=new Map;function kt(V,b){if(!(V instanceof IDBDatabase)||b in V||"string"!=typeof b)return;if(G.get(b))return G.get(b);const Y=b.replace(/FromIndex$/,""),pe=b!==Y,Pe=un.includes(Y);if(!(Y in(pe?IDBIndex:IDBObjectStore).prototype)||!Pe&&!Fe.includes(Y))return;const We=function(){var ee=(0,I.Z)(function*(zt,...ge){const qe=this.transaction(zt,Pe?"readwrite":"readonly");let lo=qe.store;return pe&&(lo=lo.index(ge.shift())),(yield Promise.all([lo[Y](...ge),Pe&&qe.done]))[0]});return function(ge){return ee.apply(this,arguments)}}();return G.set(b,We),We}!function Le(V){Re=V(Re)}(V=>({...V,get:(b,Y,pe)=>kt(b,Y)||V.get(b,Y,pe),has:(b,Y)=>!!kt(b,Y)||V.has(b,Y)}));class Ct{constructor(b){this.container=b}getPlatformInfoString(){return this.container.getProviders().map(Y=>{if(function Nn(V){const b=V.getComponent();return"VERSION"===b?.type}(Y)){const pe=Y.getImmediate();return`${pe.library}/${pe.version}`}return null}).filter(Y=>Y).join(" ")}}const wi="@firebase/app",lt=new B.Yd("@firebase/app"),Ur="[DEFAULT]",da={[wi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xn=new Map,Di=new Map;function Ui(V,b){try{V.container.addComponent(b)}catch(Y){lt.debug(`Component ${b.name} failed to register with FirebaseApp ${V.name}`,Y)}}function jn(V,b){V.container.addOrOverwriteComponent(b)}function As(V){const b=V.name;if(Di.has(b))return lt.debug(`There were multiple attempts to register component ${b}.`),!1;Di.set(b,V);for(const Y of Xn.values())Ui(Y,V);return!0}function jr(V,b){const Y=V.container.getProvider("heartbeat").getImmediate({optional:!0});return Y&&Y.triggerHeartbeat(),V.container.getProvider(b)}function Cs(V,b,Y=Ur){jr(V,b).clearInstance(Y)}function Hr(){Di.clear()}const Rr=new Ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Pr{constructor(b,Y,pe){this._isDeleted=!1,this._options=Object.assign({},b),this._config=Object.assign({},Y),this._name=Y.name,this._automaticDataCollectionEnabled=Y.automaticDataCollectionEnabled,this._container=pe,this.container.addComponent(new De.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(b){this.checkDestroyed(),this._automaticDataCollectionEnabled=b}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(b){this._isDeleted=b}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}const ji="10.7.0";function Pu(V,b={}){let Y=V;"object"!=typeof b&&(b={name:b});const pe=Object.assign({name:Ur,automaticDataCollectionEnabled:!1},b),Pe=pe.name;if("string"!=typeof Pe||!Pe)throw Rr.create("bad-app-name",{appName:String(Pe)});if(Y||(Y=(0,Ce.aH)()),!Y)throw Rr.create("no-options");const We=Xn.get(Pe);if(We){if((0,Ce.vZ)(Y,We.options)&&(0,Ce.vZ)(pe,We.config))return We;throw Rr.create("duplicate-app",{appName:Pe})}const ee=new De.H0(Pe);for(const ge of Di.values())ee.addComponent(ge);const zt=new Pr(Y,pe,ee);return Xn.set(Pe,zt),zt}function bs(V=Ur){const b=Xn.get(V);if(!b&&V===Ur&&(0,Ce.aH)())return Pu();if(!b)throw Rr.create("no-app",{appName:V});return b}function ao(){return Array.from(Xn.values())}function Hn(V){return er.apply(this,arguments)}function er(){return(er=(0,I.Z)(function*(V){const b=V.name;Xn.has(b)&&(Xn.delete(b),yield Promise.all(V.container.getProviders().map(Y=>Y.delete())),V.isDeleted=!0)})).apply(this,arguments)}function Hi(V,b,Y){var pe;let Pe=null!==(pe=da[V])&&void 0!==pe?pe:V;Y&&(Pe+=`-${Y}`);const We=Pe.match(/\s|\//),ee=b.match(/\s|\//);if(We||ee){const zt=[`Unable to register library "${Pe}" with version "${b}":`];return We&&zt.push(`library name "${Pe}" contains illegal characters (whitespace or "/")`),We&&ee&&zt.push("and"),ee&&zt.push(`version name "${b}" contains illegal characters (whitespace or "/")`),void lt.warn(zt.join(" "))}As(new De.wA(`${Pe}-version`,()=>({library:Pe,version:b}),"VERSION"))}function uo(V,b){if(null!==V&&"function"!=typeof V)throw Rr.create("invalid-log-argument");(0,B.Am)(V,b)}function Nu(V){(0,B.Ub)(V)}const ha="firebase-heartbeat-database",co=1,A="firebase-heartbeat-store";let D=null;function S(){return D||(D=function yt(V,b,{blocked:Y,upgrade:pe,blocking:Pe,terminated:We}={}){const ee=indexedDB.open(V,b),zt=At(ee);return pe&&ee.addEventListener("upgradeneeded",ge=>{pe(At(ee.result),ge.oldVersion,ge.newVersion,At(ee.transaction),ge)}),Y&&ee.addEventListener("blocked",ge=>Y(ge.oldVersion,ge.newVersion,ge)),zt.then(ge=>{We&&ge.addEventListener("close",()=>We()),Pe&&ge.addEventListener("versionchange",qe=>Pe(qe.oldVersion,qe.newVersion,qe))}).catch(()=>{}),zt}(ha,co,{upgrade:(V,b)=>{0===b&&V.createObjectStore(A)}}).catch(V=>{throw Rr.create("idb-open",{originalErrorMessage:V.message})})),D}function x(){return(x=(0,I.Z)(function*(V){try{return yield(yield S()).transaction(A).objectStore(A).get(Ve(V))}catch(b){if(b instanceof Ce.ZR)lt.warn(b.message);else{const Y=Rr.create("idb-get",{originalErrorMessage:b?.message});lt.warn(Y.message)}}})).apply(this,arguments)}function ie(V,b){return be.apply(this,arguments)}function be(){return(be=(0,I.Z)(function*(V,b){try{const pe=(yield S()).transaction(A,"readwrite");yield pe.objectStore(A).put(b,Ve(V)),yield pe.done}catch(Y){if(Y instanceof Ce.ZR)lt.warn(Y.message);else{const pe=Rr.create("idb-set",{originalErrorMessage:Y?.message});lt.warn(pe.message)}}})).apply(this,arguments)}function Ve(V){return`${V.name}!${V.options.appId}`}class ln{constructor(b){this.container=b,this._heartbeatsCache=null;const Y=this.container.getProvider("app").getImmediate();this._storage=new gt(Y),this._heartbeatsCachePromise=this._storage.read().then(pe=>(this._heartbeatsCache=pe,pe))}triggerHeartbeat(){var b=this;return(0,I.Z)(function*(){var Y,pe;const We=b.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ee=fe();if((null!=(null===(Y=b._heartbeatsCache)||void 0===Y?void 0:Y.heartbeats)||(b._heartbeatsCache=yield b._heartbeatsCachePromise,null!=(null===(pe=b._heartbeatsCache)||void 0===pe?void 0:pe.heartbeats)))&&b._heartbeatsCache.lastSentHeartbeatDate!==ee&&!b._heartbeatsCache.heartbeats.some(zt=>zt.date===ee))return b._heartbeatsCache.heartbeats.push({date:ee,agent:We}),b._heartbeatsCache.heartbeats=b._heartbeatsCache.heartbeats.filter(zt=>{const ge=new Date(zt.date).valueOf();return Date.now()-ge<=2592e6}),b._storage.overwrite(b._heartbeatsCache)})()}getHeartbeatsHeader(){var b=this;return(0,I.Z)(function*(){var Y;if(null===b._heartbeatsCache&&(yield b._heartbeatsCachePromise),null==(null===(Y=b._heartbeatsCache)||void 0===Y?void 0:Y.heartbeats)||0===b._heartbeatsCache.heartbeats.length)return"";const pe=fe(),{heartbeatsToSend:Pe,unsentEntries:We}=function En(V,b=1024){const Y=[];let pe=V.slice();for(const Pe of V){const We=Y.find(ee=>ee.agent===Pe.agent);if(We){if(We.dates.push(Pe.date),ei(Y)>b){We.dates.pop();break}}else if(Y.push({agent:Pe.agent,dates:[Pe.date]}),ei(Y)>b){Y.pop();break}pe=pe.slice(1)}return{heartbeatsToSend:Y,unsentEntries:pe}}(b._heartbeatsCache.heartbeats),ee=(0,Ce.L)(JSON.stringify({version:2,heartbeats:Pe}));return b._heartbeatsCache.lastSentHeartbeatDate=pe,We.length>0?(b._heartbeatsCache.heartbeats=We,yield b._storage.overwrite(b._heartbeatsCache)):(b._heartbeatsCache.heartbeats=[],b._storage.overwrite(b._heartbeatsCache)),ee})()}}function fe(){return(new Date).toISOString().substring(0,10)}class gt{constructor(b){this.app=b,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,Ce.hl)()&&(0,Ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var b=this;return(0,I.Z)(function*(){if(yield b._canUseIndexedDBPromise){const pe=yield function q(V){return x.apply(this,arguments)}(b.app);return pe?.heartbeats?pe:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(b){var Y=this;return(0,I.Z)(function*(){var pe;if(yield Y._canUseIndexedDBPromise){const We=yield Y.read();return ie(Y.app,{lastSentHeartbeatDate:null!==(pe=b.lastSentHeartbeatDate)&&void 0!==pe?pe:We.lastSentHeartbeatDate,heartbeats:b.heartbeats})}})()}add(b){var Y=this;return(0,I.Z)(function*(){var pe;if(yield Y._canUseIndexedDBPromise){const We=yield Y.read();return ie(Y.app,{lastSentHeartbeatDate:null!==(pe=b.lastSentHeartbeatDate)&&void 0!==pe?pe:We.lastSentHeartbeatDate,heartbeats:[...We.heartbeats,...b.heartbeats]})}})()}}function ei(V){return(0,Ce.L)(JSON.stringify({version:2,heartbeats:V})).length}!function xu(V){As(new De.wA("platform-logger",b=>new Ct(b),"PRIVATE")),As(new De.wA("heartbeat",b=>new ln(b),"PRIVATE")),Hi(wi,"0.9.24",V),Hi(wi,"0.9.24","esm2017"),Hi("fire-js","")}("")},537:(Ei,mn,xe)=>{xe.d(mn,{H0:()=>_n,wA:()=>B});var I=xe(861),De=xe(58);class B{constructor(W,te,ye){this.name=W,this.instanceFactory=te,this.type=ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const Ce="[DEFAULT]";class ct{constructor(W,te){this.name=W,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const te=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(te)){const ye=new De.BH;if(this.instancesDeferred.set(te,ye),this.isInitialized(te)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:te});He&&ye.resolve(He)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(W){var te;const ye=this.normalizeInstanceIdentifier(W?.identifier),He=null!==(te=W?.optional)&&void 0!==te&&te;if(!this.isInitialized(ye)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ye})}catch(rt){if(He)return null;throw rt}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function qt(Ge){return"EAGER"===Ge.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:Ce})}catch{}for(const[te,ye]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(te);try{const rt=this.getOrInitializeService({instanceIdentifier:He});ye.resolve(rt)}catch{}}}}clearInstance(W=Ce){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,I.Z)(function*(){const te=Array.from(W.instances.values());yield Promise.all([...te.filter(ye=>"INTERNAL"in ye).map(ye=>ye.INTERNAL.delete()),...te.filter(ye=>"_delete"in ye).map(ye=>ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=Ce){return this.instances.has(W)}getOptions(W=Ce){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:te={}}=W,ye=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ye))throw Error(`${this.name}(${ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:ye,options:te});for(const[rt,yn]of this.instancesDeferred.entries())ye===this.normalizeInstanceIdentifier(rt)&&yn.resolve(He);return He}onInit(W,te){var ye;const He=this.normalizeInstanceIdentifier(te),rt=null!==(ye=this.onInitCallbacks.get(He))&&void 0!==ye?ye:new Set;rt.add(W),this.onInitCallbacks.set(He,rt);const yn=this.instances.get(He);return yn&&W(yn,He),()=>{rt.delete(W)}}invokeOnInitCallbacks(W,te){const ye=this.onInitCallbacks.get(te);if(ye)for(const He of ye)try{He(W,te)}catch{}}getOrInitializeService({instanceIdentifier:W,options:te={}}){let ye=this.instances.get(W);if(!ye&&this.component&&(ye=this.component.instanceFactory(this.container,{instanceIdentifier:(Ge=W,Ge===Ce?void 0:Ge),options:te}),this.instances.set(W,ye),this.instancesOptions.set(W,te),this.invokeOnInitCallbacks(ye,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ye)}catch{}var Ge;return ye||null}normalizeInstanceIdentifier(W=Ce){return this.component?this.component.multipleInstances?W:Ce:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _n{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const te=this.getProvider(W.name);if(te.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);te.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const te=new ct(W,this);return this.providers.set(W,te),te}getProviders(){return Array.from(this.providers.values())}}},879:(Ei,mn,xe)=>{xe.d(mn,{Am:()=>Ge,Ub:()=>_n,Yd:()=>qt,in:()=>De});const I=[];var De=function(W){return W[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",W}(De||{});const B={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},Ce=De.INFO,ct={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},Mt=(W,te,...ye)=>{if(te<W.logLevel)return;const He=(new Date).toISOString(),rt=ct[te];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${te})`);console[rt](`[${He}]  ${W.name}:`,...ye)};class qt{constructor(te){this.name=te,this._logLevel=Ce,this._logHandler=Mt,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(te){if(!(te in De))throw new TypeError(`Invalid value "${te}" assigned to \`logLevel\``);this._logLevel=te}setLogLevel(te){this._logLevel="string"==typeof te?B[te]:te}get logHandler(){return this._logHandler}set logHandler(te){if("function"!=typeof te)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=te}get userLogHandler(){return this._userLogHandler}set userLogHandler(te){this._userLogHandler=te}debug(...te){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...te),this._logHandler(this,De.DEBUG,...te)}log(...te){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...te),this._logHandler(this,De.VERBOSE,...te)}info(...te){this._userLogHandler&&this._userLogHandler(this,De.INFO,...te),this._logHandler(this,De.INFO,...te)}warn(...te){this._userLogHandler&&this._userLogHandler(this,De.WARN,...te),this._logHandler(this,De.WARN,...te)}error(...te){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...te),this._logHandler(this,De.ERROR,...te)}}function _n(W){I.forEach(te=>{te.setLogLevel(W)})}function Ge(W,te){for(const ye of I){let He=null;te&&te.level&&(He=B[te.level]),ye.userLogHandler=null===W?null:(rt,yn,...ot)=>{const Re=ot.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch{return null}}).filter(Le=>Le).join(" ");yn>=(He??rt.logLevel)&&W({level:De[yn].toLowerCase(),message:Re,args:ot,type:rt.name})}}}},377:(Ei,mn,xe)=>{xe.r(mn);var I=xe(861),De=xe(106),B=xe(58),Ce=xe(534),ct=xe(879),Mt=xe(582),qt=xe(537);const Ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const yn=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ot=function rt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Re=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),vn=new ct.Yd("@firebase/auth");function At(h,...u){vn.logLevel<=ct.in.ERROR&&vn.error(`Auth (${Ce.SDK_VERSION}): ${h}`,...u)}function at(h,...u){throw un(h,...u)}function yt(h,...u){return un(h,...u)}function Yn(h,u,l){const f=Object.assign(Object.assign({},ot()),{[u]:l});return new B.LL("auth","Firebase",f).create(u,{appName:h.name})}function Fe(h,u,l){if(!(u instanceof l))throw l.name!==u.constructor.name&&at(h,"argument-error"),Yn(h,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function un(h,...u){if("string"!=typeof h){const l=u[0],f=[...u.slice(1)];return f[0]&&(f[0].appName=h.name),h._errorFactory.create(l,...f)}return Re.create(h,...u)}function G(h,u,...l){if(!h)throw un(u,...l)}function kt(h){const u="INTERNAL ASSERTION FAILED: "+h;throw At(u),new Error(u)}function Ct(h,u){h||kt(u)}function Nn(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function wi(){return"http:"===Jr()||"https:"===Jr()}function Jr(){var h;return typeof self<"u"&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}class Xr{constructor(u,l){this.shortDelay=u,this.longDelay=l,Ct(l>u,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function lt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wi()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function O(h,u){Ct(h.emulator,"Emulator should always be set here");const{url:l}=h.emulator;return u?`${l}${u.startsWith("/")?u.slice(1):u}`:l}class F{static initialize(u,l,f){this.fetchImpl=u,l&&(this.headersImpl=l),f&&(this.responseImpl=f)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},H=new Xr(3e4,6e4);function Z(h,u){return h.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:h.tenantId}):u}function U(h,u,l,f){return _e.apply(this,arguments)}function _e(){return(_e=(0,I.Z)(function*(h,u,l,f,m={}){return Qe(h,m,(0,I.Z)(function*(){let y={},T={};f&&("GET"===u?T=f:y={body:JSON.stringify(f)});const P=(0,B.xO)(Object.assign({key:h.config.apiKey},T)).slice(1),$=yield h._getAdditionalHeaders();return $["Content-Type"]="application/json",h.languageCode&&($["X-Firebase-Locale"]=h.languageCode),F.fetch()(Ot(h,h.config.apiHost,l,P),Object.assign({method:u,headers:$,referrerPolicy:"no-referrer"},y))}))})).apply(this,arguments)}function Qe(h,u,l){return $e.apply(this,arguments)}function $e(){return($e=(0,I.Z)(function*(h,u,l){h._canInitEmulator=!1;const f=Object.assign(Object.assign({},j),u);try{const m=new xn(h),y=yield Promise.race([l(),m.promise]);m.clearNetworkTimeout();const T=yield y.json();if("needConfirmation"in T)throw cn(h,"account-exists-with-different-credential",T);if(y.ok&&!("errorMessage"in T))return T;{const P=y.ok?T.errorMessage:T.error.message,[$,se]=P.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$)throw cn(h,"credential-already-in-use",T);if("EMAIL_EXISTS"===$)throw cn(h,"email-already-in-use",T);if("USER_DISABLED"===$)throw cn(h,"user-disabled",T);const de=f[$]||$.toLowerCase().replace(/[_\s]+/g,"-");if(se)throw Yn(h,de,se);at(h,de)}}catch(m){if(m instanceof B.ZR)throw m;at(h,"network-request-failed",{message:String(m)})}})).apply(this,arguments)}function ve(h,u,l,f){return tt.apply(this,arguments)}function tt(){return(tt=(0,I.Z)(function*(h,u,l,f,m={}){const y=yield U(h,u,l,f,m);return"mfaPendingCredential"in y&&at(h,"multi-factor-auth-required",{_serverResponse:y}),y})).apply(this,arguments)}function Ot(h,u,l,f){const m=`${u}${l}?${f}`;return h.config.emulator?O(h.config,m):`${h.config.apiScheme}://${m}`}function Et(h){switch(h){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xn{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((l,f)=>{this.timer=setTimeout(()=>f(yt(this.auth,"network-request-failed")),H.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cn(h,u,l){const f={appName:h.name};l.email&&(f.email=l.email),l.phoneNumber&&(f.phoneNumber=l.phoneNumber);const m=yt(h,u,f);return m.customData._tokenResponse=l,m}function Bn(h){return void 0!==h&&void 0!==h.getResponse}function Jn(h){return void 0!==h&&void 0!==h.enterprise}class fr{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===u)return Et(l.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Ti(){return(Ti=(0,I.Z)(function*(h){return(yield U(h,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Un(h,u){return so.apply(this,arguments)}function so(){return(so=(0,I.Z)(function*(h,u){return U(h,"GET","/v2/recaptchaConfig",Z(h,u))})).apply(this,arguments)}function Ur(){return(Ur=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function Xn(){return(Xn=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Ui(){return(Ui=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function jn(h){if(h)try{const u=new Date(Number(h));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function Cs(){return(Cs=(0,I.Z)(function*(h,u=!1){const l=(0,B.m9)(h),f=yield l.getIdToken(u),m=oo(f);G(m&&m.exp&&m.auth_time&&m.iat,l.auth,"internal-error");const y="object"==typeof m.firebase?m.firebase:void 0,T=y?.sign_in_provider;return{claims:m,token:f,authTime:jn(Hr(m.auth_time)),issuedAtTime:jn(Hr(m.iat)),expirationTime:jn(Hr(m.exp)),signInProvider:T||null,signInSecondFactor:y?.sign_in_second_factor||null}})).apply(this,arguments)}function Hr(h){return 1e3*Number(h)}function oo(h){const[u,l,f]=h.split(".");if(void 0===u||void 0===l||void 0===f)return At("JWT malformed, contained fewer than 3 sections"),null;try{const m=(0,B.tV)(l);return m?JSON.parse(m):(At("Failed to decode base64 JWT payload"),null)}catch(m){return At("Caught error parsing JWT payload as JSON",m?.toString()),null}}function Pr(h,u){return ji.apply(this,arguments)}function ji(){return(ji=(0,I.Z)(function*(h,u,l=!1){if(l)return u;try{return yield u}catch(f){throw f instanceof B.ZR&&function Pu({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(f)&&h.auth.currentUser===h&&(yield h.auth.signOut()),f}})).apply(this,arguments)}class bs{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var l;if(u){const f=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),f}{this.errorBackoff=3e4;const m=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,m)}}schedule(u=!1){var l=this;if(!this.isRunning)return;const f=this.getInterval(u);this.timerId=setTimeout((0,I.Z)(function*(){yield l.iteration()}),f)}iteration(){var u=this;return(0,I.Z)(function*(){try{yield u.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&u.schedule(!0))}u.schedule()})()}}class ao{constructor(u,l){this.createdAt=u,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=jn(this.lastLoginAt),this.creationTime=jn(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hn(h){return er.apply(this,arguments)}function er(){return er=(0,I.Z)(function*(h){var u;const l=h.auth,f=yield h.getIdToken(),m=yield Pr(h,function Di(h,u){return Ui.apply(this,arguments)}(l,{idToken:f}));G(m?.users.length,l,"internal-error");const y=m.users[0];h._notifyReloadListener(y);const T=null!==(u=y.providerUserInfo)&&void 0!==u&&u.length?function ha(h){return h.map(u=>{var{providerId:l}=u,f=(0,Mt._T)(u,["providerId"]);return{providerId:l,uid:f.rawId||"",displayName:f.displayName||null,email:f.email||null,phoneNumber:f.phoneNumber||null,photoURL:f.photoUrl||null}})}(y.providerUserInfo):[],P=function Nu(h,u){return[...h.filter(f=>!u.some(m=>m.providerId===f.providerId)),...u]}(h.providerData,T),de=!!h.isAnonymous&&!(h.email&&y.passwordHash||P?.length),me={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:P,metadata:new ao(y.createdAt,y.lastLoginAt),isAnonymous:de};Object.assign(h,me)}),er.apply(this,arguments)}function uo(){return(uo=(0,I.Z)(function*(h){const u=(0,B.m9)(h);yield Hn(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function A(){return(A=(0,I.Z)(function*(h,u){const l=yield Qe(h,{},(0,I.Z)(function*(){const f=(0,B.xO)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:m,apiKey:y}=h.config,T=Ot(h,m,"/v1/token",`key=${y}`),P=yield h._getAdditionalHeaders();return P["Content-Type"]="application/x-www-form-urlencoded",F.fetch()(T,{method:"POST",headers:P,body:f})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function S(){return(S=(0,I.Z)(function*(h,u){return U(h,"POST","/v2/accounts:revokeToken",Z(h,u))})).apply(this,arguments)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){G(u.idToken,"internal-error"),G(typeof u.idToken<"u","internal-error"),G(typeof u.refreshToken<"u","internal-error");const l="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):function Rr(h){const u=oo(h);return G(u,"internal-error"),G(typeof u.exp<"u","internal-error"),G(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,l)}getToken(u,l=!1){var f=this;return(0,I.Z)(function*(){return G(!f.accessToken||f.refreshToken,u,"user-token-expired"),l||!f.accessToken||f.isExpired?f.refreshToken?(yield f.refresh(u,f.refreshToken),f.accessToken):null:f.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,l){var f=this;return(0,I.Z)(function*(){const{accessToken:m,refreshToken:y,expiresIn:T}=yield function co(h,u){return A.apply(this,arguments)}(u,l);f.updateTokensAndExpiration(m,y,Number(T))})()}updateTokensAndExpiration(u,l,f){this.refreshToken=l||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*f}static fromJSON(u,l){const{refreshToken:f,accessToken:m,expirationTime:y}=l,T=new q;return f&&(G("string"==typeof f,"internal-error",{appName:u}),T.refreshToken=f),m&&(G("string"==typeof m,"internal-error",{appName:u}),T.accessToken=m),y&&(G("number"==typeof y,"internal-error",{appName:u}),T.expirationTime=y),T}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return kt("not implemented")}}function x(h,u){G("string"==typeof h||typeof h>"u","internal-error",{appName:u})}class ie{constructor(u){var{uid:l,auth:f,stsTokenManager:m}=u,y=(0,Mt._T)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=f,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=y.displayName||null,this.email=y.email||null,this.emailVerified=y.emailVerified||!1,this.phoneNumber=y.phoneNumber||null,this.photoURL=y.photoURL||null,this.isAnonymous=y.isAnonymous||!1,this.tenantId=y.tenantId||null,this.providerData=y.providerData?[...y.providerData]:[],this.metadata=new ao(y.createdAt||void 0,y.lastLoginAt||void 0)}getIdToken(u){var l=this;return(0,I.Z)(function*(){const f=yield Pr(l,l.stsTokenManager.getToken(l.auth,u));return G(f,l.auth,"internal-error"),l.accessToken!==f&&(l.accessToken=f,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),f})()}getIdTokenResult(u){return function jr(h){return Cs.apply(this,arguments)}(this,u)}reload(){return function Hi(h){return uo.apply(this,arguments)}(this)}_assign(u){this!==u&&(G(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(l=>Object.assign({},l)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const l=new ie(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(u){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,l=!1){var f=this;return(0,I.Z)(function*(){let m=!1;u.idToken&&u.idToken!==f.stsTokenManager.accessToken&&(f.stsTokenManager.updateFromServerResponse(u),m=!0),l&&(yield Hn(f)),yield f.auth._persistUserIfCurrent(f),m&&f.auth._notifyListenersIfCurrent(f)})()}delete(){var u=this;return(0,I.Z)(function*(){const l=yield u.getIdToken();return yield Pr(u,function la(h,u){return Ur.apply(this,arguments)}(u.auth,{idToken:l})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,l){var f,m,y,T,P,$,se,de;const me=null!==(f=l.displayName)&&void 0!==f?f:void 0,Wt=null!==(m=l.email)&&void 0!==m?m:void 0,zr=null!==(y=l.phoneNumber)&&void 0!==y?y:void 0,Ec=null!==(T=l.photoURL)&&void 0!==T?T:void 0,_g=null!==(P=l.tenantId)&&void 0!==P?P:void 0,No=null!==($=l._redirectEventId)&&void 0!==$?$:void 0,eh=null!==(se=l.createdAt)&&void 0!==se?se:void 0,yg=null!==(de=l.lastLoginAt)&&void 0!==de?de:void 0,{uid:wc,emailVerified:mv,isAnonymous:th,providerData:vg,stsTokenManager:Ig}=l;G(wc&&Ig,u,"internal-error");const _v=q.fromJSON(this.name,Ig);G("string"==typeof wc,u,"internal-error"),x(me,u.name),x(Wt,u.name),G("boolean"==typeof mv,u,"internal-error"),G("boolean"==typeof th,u,"internal-error"),x(zr,u.name),x(Ec,u.name),x(_g,u.name),x(No,u.name),x(eh,u.name),x(yg,u.name);const Ka=new ie({uid:wc,auth:u,email:Wt,emailVerified:mv,displayName:me,isAnonymous:th,photoURL:Ec,phoneNumber:zr,tenantId:_g,stsTokenManager:_v,createdAt:eh,lastLoginAt:yg});return vg&&Array.isArray(vg)&&(Ka.providerData=vg.map(z0=>Object.assign({},z0))),No&&(Ka._redirectEventId=No),Ka}static _fromIdTokenResponse(u,l,f=!1){return(0,I.Z)(function*(){const m=new q;m.updateFromServerResponse(l);const y=new ie({uid:l.localId,auth:u,stsTokenManager:m,isAnonymous:f});return yield Hn(y),y})()}}const be=new Map;function Ve(h){Ct(h instanceof Function,"Expected a class definition");let u=be.get(h);return u?(Ct(u instanceof h,"Instance stored in cache mismatched with class"),u):(u=new h,be.set(h,u),u)}const Ft=(()=>{class h{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(l,f){var m=this;return(0,I.Z)(function*(){m.storage[l]=f})()}_get(l){var f=this;return(0,I.Z)(function*(){const m=f.storage[l];return void 0===m?null:m})()}_remove(l){var f=this;return(0,I.Z)(function*(){delete f.storage[l]})()}_addListener(l,f){}_removeListener(l,f){}}return h.type="NONE",h})();function ln(h,u,l){return`firebase:${h}:${u}:${l}`}class fe{constructor(u,l,f){this.persistence=u,this.auth=l,this.userKey=f;const{config:m,name:y}=this.auth;this.fullUserKey=ln(this.userKey,m.apiKey,y),this.fullPersistenceKey=ln("persistence",m.apiKey,y),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,I.Z)(function*(){const l=yield u.persistence._get(u.fullUserKey);return l?ie._fromJSON(u.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var l=this;return(0,I.Z)(function*(){if(l.persistence===u)return;const f=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=u,f?l.setCurrentUser(f):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,l,f="authUser"){return(0,I.Z)(function*(){if(!l.length)return new fe(Ve(Ft),u,f);const m=(yield Promise.all(l.map(function(){var se=(0,I.Z)(function*(de){if(yield de._isAvailable())return de});return function(de){return se.apply(this,arguments)}}()))).filter(se=>se);let y=m[0]||Ve(Ft);const T=ln(f,u.config.apiKey,u.name);let P=null;for(const se of l)try{const de=yield se._get(T);if(de){const me=ie._fromJSON(u,de);se!==y&&(P=me),y=se;break}}catch{}const $=m.filter(se=>se._shouldAllowMigration);return y._shouldAllowMigration&&$.length?(y=$[0],P&&(yield y._set(T,P.toJSON())),yield Promise.all(l.map(function(){var se=(0,I.Z)(function*(de){if(de!==y)try{yield de._remove(T)}catch{}});return function(de){return se.apply(this,arguments)}}())),new fe(y,u,f)):new fe(y,u,f)})()}}function En(h){const u=h.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(V(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(gt(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(Y(u))return"Blackberry";if(pe(u))return"Webos";if(ei(u))return"Safari";if((u.includes("chrome/")||xu(u))&&!u.includes("edge/"))return"Chrome";if(b(u))return"Android";{const f=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===f?.length)return f[1]}return"Other"}function gt(h=(0,B.z$)()){return/firefox\//i.test(h)}function ei(h=(0,B.z$)()){const u=h.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function xu(h=(0,B.z$)()){return/crios\//i.test(h)}function V(h=(0,B.z$)()){return/iemobile/i.test(h)}function b(h=(0,B.z$)()){return/android/i.test(h)}function Y(h=(0,B.z$)()){return/blackberry/i.test(h)}function pe(h=(0,B.z$)()){return/webos/i.test(h)}function Pe(h=(0,B.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function ge(h=(0,B.z$)()){return Pe(h)||b(h)||pe(h)||Y(h)||/windows phone/i.test(h)||V(h)}function lo(h,u=[]){let l;switch(h){case"Browser":l=En((0,B.z$)());break;case"Worker":l=`${En((0,B.z$)())}-${h}`;break;default:l=h}const f=u.length?u.join(","):"FirebaseCore-web";return`${l}/JsCore/${Ce.SDK_VERSION}/${f}`}class a0{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,l){const f=y=>new Promise((T,P)=>{try{T(u(y))}catch($){P($)}});f.onAbort=l,this.queue.push(f);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}runMiddleware(u){var l=this;return(0,I.Z)(function*(){if(l.auth.currentUser===u)return;const f=[];try{for(const m of l.queue)yield m(u),m.onAbort&&f.push(m.onAbort)}catch(m){f.reverse();for(const y of f)try{y()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:m?.message})}})()}}function fa(){return(fa=(0,I.Z)(function*(h,u={}){return U(h,"GET","/v2/passwordPolicy",Z(h,u))})).apply(this,arguments)}class u0{constructor(u){var l,f,m,y;const T=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=T.minPasswordLength)&&void 0!==l?l:6,T.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=T.maxPasswordLength),void 0!==T.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=T.containsLowercaseCharacter),void 0!==T.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=T.containsUppercaseCharacter),void 0!==T.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=T.containsNumericCharacter),void 0!==T.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=T.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(m=null===(f=u.allowedNonAlphanumericCharacters)||void 0===f?void 0:f.join(""))&&void 0!==m?m:"",this.forceUpgradeOnSignin=null!==(y=u.forceUpgradeOnSignin)&&void 0!==y&&y,this.schemaVersion=u.schemaVersion}validatePassword(u){var l,f,m,y,T,P;const $={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,$),this.validatePasswordCharacterOptions(u,$),$.isValid&&($.isValid=null===(l=$.meetsMinPasswordLength)||void 0===l||l),$.isValid&&($.isValid=null===(f=$.meetsMaxPasswordLength)||void 0===f||f),$.isValid&&($.isValid=null===(m=$.containsLowercaseLetter)||void 0===m||m),$.isValid&&($.isValid=null===(y=$.containsUppercaseLetter)||void 0===y||y),$.isValid&&($.isValid=null===(T=$.containsNumericCharacter)||void 0===T||T),$.isValid&&($.isValid=null===(P=$.containsNonAlphanumericCharacter)||void 0===P||P),$}validatePasswordLengthOptions(u,l){const f=this.customStrengthOptions.minPasswordLength,m=this.customStrengthOptions.maxPasswordLength;f&&(l.meetsMinPasswordLength=u.length>=f),m&&(l.meetsMaxPasswordLength=u.length<=m)}validatePasswordCharacterOptions(u,l){let f;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let m=0;m<u.length;m++)f=u.charAt(m),this.updatePasswordCharacterOptionsStatuses(l,f>="a"&&f<="z",f>="A"&&f<="Z",f>="0"&&f<="9",this.allowedNonAlphanumericCharacters.includes(f))}updatePasswordCharacterOptionsStatuses(u,l,f,m,y){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=f)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=m)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=y))}}class py{constructor(u,l,f,m){this.app=u,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=f,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $i(this),this.idTokenSubscription=new $i(this),this.beforeStateQueue=new a0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Re,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(u,l){var f=this;return l&&(this._popupRedirectResolver=Ve(l)),this._initializationPromise=this.queue((0,I.Z)(function*(){var m,y;if(!f._deleted&&(f.persistenceManager=yield fe.create(f,u),!f._deleted)){if(null!==(m=f._popupRedirectResolver)&&void 0!==m&&m._shouldInitProactively)try{yield f._popupRedirectResolver._initialize(f)}catch{}yield f.initializeCurrentUser(l),f.lastNotifiedUid=(null===(y=f.currentUser)||void 0===y?void 0:y.uid)||null,!f._deleted&&(f._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,I.Z)(function*(){if(u._deleted)return;const l=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||l){if(u.currentUser&&l&&u.currentUser.uid===l.uid)return u._currentUser._assign(l),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(l,!0)}})()}initializeCurrentUser(u){var l=this;return(0,I.Z)(function*(){var f;const m=yield l.assertedPersistence.getCurrentUser();let y=m,T=!1;if(u&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const P=null===(f=l.redirectUser)||void 0===f?void 0:f._redirectEventId,$=y?._redirectEventId,se=yield l.tryRedirectSignIn(u);(!P||P===$)&&se?.user&&(y=se.user,T=!0)}if(!y)return l.directlySetCurrentUser(null);if(!y._redirectEventId){if(T)try{yield l.beforeStateQueue.runMiddleware(y)}catch(P){y=m,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(P))}return y?l.reloadAndSetCurrentUserOrClear(y):l.directlySetCurrentUser(null)}return G(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===y._redirectEventId?l.directlySetCurrentUser(y):l.reloadAndSetCurrentUserOrClear(y)})()}tryRedirectSignIn(u){var l=this;return(0,I.Z)(function*(){let f=null;try{f=yield l._popupRedirectResolver._completeRedirectFn(l,u,!0)}catch{yield l._setRedirectUser(null)}return f})()}reloadAndSetCurrentUserOrClear(u){var l=this;return(0,I.Z)(function*(){try{yield Hn(u)}catch(f){if("auth/network-request-failed"!==f?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function Ds(){if(typeof navigator>"u")return null;const h=navigator;return h.languages&&h.languages[0]||h.language||null}()}_delete(){var u=this;return(0,I.Z)(function*(){u._deleted=!0})()}updateCurrentUser(u){var l=this;return(0,I.Z)(function*(){const f=u?(0,B.m9)(u):null;return f&&G(f.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(f&&f._clone(l))})()}_updateCurrentUser(u,l=!1){var f=this;return(0,I.Z)(function*(){if(!f._deleted)return u&&G(f.tenantId===u.tenantId,f,"tenant-id-mismatch"),l||(yield f.beforeStateQueue.runMiddleware(u)),f.queue((0,I.Z)(function*(){yield f.directlySetCurrentUser(u),f.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,I.Z)(function*(){return yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0)})()}setPersistence(u){var l=this;return this.queue((0,I.Z)(function*(){yield l.assertedPersistence.setPersistence(Ve(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var l=this;return(0,I.Z)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const f=l._getPasswordPolicyInternal();return f.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):f.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,I.Z)(function*(){const l=yield function fy(h){return fa.apply(this,arguments)}(u),f=new u0(l);null===u.tenantId?u._projectPasswordPolicy=f:u._tenantPasswordPolicies[u.tenantId]=f})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new B.LL("auth","Firebase",u())}onAuthStateChanged(u,l,f){return this.registerStateListener(this.authStateSubscription,u,l,f)}beforeAuthStateChanged(u,l){return this.beforeStateQueue.pushCallback(u,l)}onIdTokenChanged(u,l,f){return this.registerStateListener(this.idTokenSubscription,u,l,f)}authStateReady(){return new Promise((u,l)=>{if(this.currentUser)u();else{const f=this.onAuthStateChanged(()=>{f(),u()},l)}})}revokeAccessToken(u){var l=this;return(0,I.Z)(function*(){if(l.currentUser){const f=yield l.currentUser.getIdToken(),m={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:f};null!=l.tenantId&&(m.tenantId=l.tenantId),yield function D(h,u){return S.apply(this,arguments)}(l,m)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,l){var f=this;return(0,I.Z)(function*(){const m=yield f.getOrInitRedirectPersistenceManager(l);return null===u?m.removeCurrentUser():m.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var l=this;return(0,I.Z)(function*(){if(!l.redirectPersistenceManager){const f=u&&Ve(u)||l._popupRedirectResolver;G(f,l,"argument-error"),l.redirectPersistenceManager=yield fe.create(l,[Ve(f._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(u){var l=this;return(0,I.Z)(function*(){var f,m;return l._isInitialized&&(yield l.queue((0,I.Z)(function*(){}))),(null===(f=l._currentUser)||void 0===f?void 0:f._redirectEventId)===u?l._currentUser:(null===(m=l.redirectUser)||void 0===m?void 0:m._redirectEventId)===u?l.redirectUser:null})()}_persistUserIfCurrent(u){var l=this;return(0,I.Z)(function*(){if(u===l.currentUser)return l.queue((0,I.Z)(function*(){return l.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const f=null!==(l=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==f&&(this.lastNotifiedUid=f,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,l,f,m){if(this._deleted)return()=>{};const y="function"==typeof l?l:l.next.bind(l);let T=!1;const P=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(P,this,"internal-error"),P.then(()=>{T||y(this.currentUser)}),"function"==typeof l){const $=u.addObserver(l,f,m);return()=>{T=!0,$()}}{const $=u.addObserver(l);return()=>{T=!0,$()}}}directlySetCurrentUser(u){var l=this;return(0,I.Z)(function*(){l.currentUser&&l.currentUser!==u&&l._currentUser._stopProactiveRefresh(),u&&l.isProactiveRefreshEnabled&&u._startProactiveRefresh(),l.currentUser=u,u?yield l.assertedPersistence.setCurrentUser(u):yield l.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=lo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,I.Z)(function*(){var l;const f={"X-Client-Version":u.clientVersion};u.app.options.appId&&(f["X-Firebase-gmpid"]=u.app.options.appId);const m=yield null===(l=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();m&&(f["X-Firebase-Client"]=m);const y=yield u._getAppCheckToken();return y&&(f["X-Firebase-AppCheck"]=y),f})()}_getAppCheckToken(){var u=this;return(0,I.Z)(function*(){var l;const f=yield null===(l=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return f?.error&&function In(h,...u){vn.logLevel<=ct.in.WARN&&vn.warn(`Auth (${Ce.SDK_VERSION}): ${h}`,...u)}(`Error while retrieving App Check token: ${f.error}`),f?.token})()}}function bt(h){return(0,B.m9)(h)}class $i{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,B.ne)(l=>this.observer=l)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function np(h){return new Promise((u,l)=>{const f=document.createElement("script");f.setAttribute("src",h),f.onload=u,f.onerror=m=>{const y=yt("internal-error");y.customData=m,l(y)},f.type="text/javascript",f.charset="UTF-8",function c0(){var h,u;return null!==(u=null===(h=document.getElementsByTagName("head"))||void 0===h?void 0:h[0])&&void 0!==u?u:document}().appendChild(f)})}function gy(h){return`__${h}${Math.floor(1e6*Math.random())}`}class rp{constructor(u){this.type="recaptcha-enterprise",this.auth=bt(u)}verify(u="verify",l=!1){var f=this;return(0,I.Z)(function*(){function y(){return y=(0,I.Z)(function*(P){if(!l){if(null==P.tenantId&&null!=P._agentRecaptchaConfig)return P._agentRecaptchaConfig.siteKey;if(null!=P.tenantId&&void 0!==P._tenantRecaptchaConfigs[P.tenantId])return P._tenantRecaptchaConfigs[P.tenantId].siteKey}return new Promise(function(){var $=(0,I.Z)(function*(se,de){Un(P,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(me=>{if(void 0!==me.recaptchaKey){const Wt=new fr(me);return null==P.tenantId?P._agentRecaptchaConfig=Wt:P._tenantRecaptchaConfigs[P.tenantId]=Wt,se(Wt.siteKey)}de(new Error("recaptcha Enterprise site key undefined"))}).catch(me=>{de(me)})});return function(se,de){return $.apply(this,arguments)}}())}),y.apply(this,arguments)}function T(P,$,se){const de=window.grecaptcha;Jn(de)?de.enterprise.ready(()=>{de.enterprise.execute(P,{action:u}).then(me=>{$(me)}).catch(()=>{$("NO_RECAPTCHA")})}):se(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((P,$)=>{(function m(P){return y.apply(this,arguments)})(f.auth).then(se=>{if(!l&&Jn(window.grecaptcha))T(se,P,$);else{if(typeof window>"u")return void $(new Error("RecaptchaVerifier is only supported in browser"));np("https://www.google.com/recaptcha/enterprise.js?render="+se).then(()=>{T(se,P,$)}).catch(de=>{$(de)})}}).catch(se=>{$(se)})})})()}}function _y(h,u,l){return tr.apply(this,arguments)}function tr(){return(tr=(0,I.Z)(function*(h,u,l,f=!1){const m=new rp(h);let y;try{y=yield m.verify(l)}catch{y=yield m.verify(l,!0)}const T=Object.assign({},u);return Object.assign(T,f?{captchaResp:y}:{captchaResponse:y}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T})).apply(this,arguments)}function we(h,u,l,f){return ip.apply(this,arguments)}function ip(){return ip=(0,I.Z)(function*(h,u,l,f){var m;if(null!==(m=h._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const y=yield _y(h,u,l,"getOobCode"===l);return f(h,y)}return f(h,u).catch(function(){var y=(0,I.Z)(function*(T){if("auth/missing-recaptcha-token"===T.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const P=yield _y(h,u,l,"getOobCode"===l);return f(h,P)}return Promise.reject(T)});return function(T){return y.apply(this,arguments)}}())}),ip.apply(this,arguments)}function pa(h){const u=h.indexOf(":");return u<0?"":h.substr(0,u+1)}function Kl(h){if(!h)return null;const u=Number(h);return isNaN(u)?null:u}class Ai{constructor(u,l){this.providerId=u,this.signInMethod=l}toJSON(){return kt("not implemented")}_getIdTokenResponse(u){return kt("not implemented")}_linkToIdToken(u,l){return kt("not implemented")}_getReauthenticationResolver(u){return kt("not implemented")}}function ga(h,u){return ma.apply(this,arguments)}function ma(){return(ma=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:resetPassword",Z(h,u))})).apply(this,arguments)}function Ql(){return(Ql=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Je(h,u){return _a.apply(this,arguments)}function _a(){return(_a=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function Mn(){return(Mn=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:update",Z(h,u))})).apply(this,arguments)}function up(h,u){return cp.apply(this,arguments)}function cp(){return(cp=(0,I.Z)(function*(h,u){return ve(h,"POST","/v1/accounts:signInWithPassword",Z(h,u))})).apply(this,arguments)}function dt(h,u){return lp.apply(this,arguments)}function lp(){return(lp=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:sendOobCode",Z(h,u))})).apply(this,arguments)}function le(){return(le=(0,I.Z)(function*(h,u){return dt(h,u)})).apply(this,arguments)}function Yl(h,u){return ya.apply(this,arguments)}function ya(){return(ya=(0,I.Z)(function*(h,u){return dt(h,u)})).apply(this,arguments)}function dp(h,u){return va.apply(this,arguments)}function va(){return(va=(0,I.Z)(function*(h,u){return dt(h,u)})).apply(this,arguments)}function Ia(){return(Ia=(0,I.Z)(function*(h,u){return dt(h,u)})).apply(this,arguments)}function hp(){return(hp=(0,I.Z)(function*(h,u){return ve(h,"POST","/v1/accounts:signInWithEmailLink",Z(h,u))})).apply(this,arguments)}function fp(){return(fp=(0,I.Z)(function*(h,u){return ve(h,"POST","/v1/accounts:signInWithEmailLink",Z(h,u))})).apply(this,arguments)}class Mu extends Ai{constructor(u,l,f,m=null){super("password",f),this._email=u,this._password=l,this._tenantId=m}static _fromEmailAndPassword(u,l){return new Mu(u,l,"password")}static _fromEmailAndCode(u,l,f=null){return new Mu(u,l,"emailLink",f)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const l="string"==typeof u?JSON.parse(u):u;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(u){var l=this;return(0,I.Z)(function*(){switch(l.signInMethod){case"password":return we(u,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",up);case"emailLink":return function m0(h,u){return hp.apply(this,arguments)}(u,{email:l._email,oobCode:l._password});default:at(u,"internal-error")}})()}_linkToIdToken(u,l){var f=this;return(0,I.Z)(function*(){switch(f.signInMethod){case"password":return we(u,{idToken:l,returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Je);case"emailLink":return function _0(h,u){return fp.apply(this,arguments)}(u,{idToken:l,email:f._email,oobCode:f._password});default:at(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function gr(h,u){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,I.Z)(function*(h,u){return ve(h,"POST","/v1/accounts:signInWithIdp",Z(h,u))})).apply(this,arguments)}class ni extends Ai{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const l=new ni(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(l.idToken=u.idToken),u.accessToken&&(l.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(l.nonce=u.nonce),u.pendingToken&&(l.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(l.accessToken=u.oauthToken,l.secret=u.oauthTokenSecret):at("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const l="string"==typeof u?JSON.parse(u):u,{providerId:f,signInMethod:m}=l,y=(0,Mt._T)(l,["providerId","signInMethod"]);if(!f||!m)return null;const T=new ni(f,m);return T.idToken=y.idToken||void 0,T.accessToken=y.accessToken||void 0,T.secret=y.secret,T.nonce=y.nonce,T.pendingToken=y.pendingToken||null,T}_getIdTokenResponse(u){return gr(u,this.buildRequest())}_linkToIdToken(u,l){const f=this.buildRequest();return f.idToken=l,gr(u,f)}_getReauthenticationResolver(u){const l=this.buildRequest();return l.autoCreate=!1,gr(u,l)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),u.postBody=(0,B.xO)(l)}return u}}function Jl(){return(Jl=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:sendVerificationCode",Z(h,u))})).apply(this,arguments)}function qi(){return(qi=(0,I.Z)(function*(h,u){return ve(h,"POST","/v1/accounts:signInWithPhoneNumber",Z(h,u))})).apply(this,arguments)}function ri(){return(ri=(0,I.Z)(function*(h,u){const l=yield ve(h,"POST","/v1/accounts:signInWithPhoneNumber",Z(h,u));if(l.temporaryProof)throw cn(h,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const wy={USER_NOT_FOUND:"user-not-found"};function Ou(){return(Ou=(0,I.Z)(function*(h,u){return ve(h,"POST","/v1/accounts:signInWithPhoneNumber",Z(h,Object.assign(Object.assign({},u),{operation:"REAUTH"})),wy)})).apply(this,arguments)}class ze extends Ai{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,l){return new ze({verificationId:u,verificationCode:l})}static _fromTokenResponse(u,l){return new ze({phoneNumber:u,temporaryProof:l})}_getIdTokenResponse(u){return function pp(h,u){return qi.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,l){return function Ey(h,u){return ri.apply(this,arguments)}(u,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function ue(h,u){return Ou.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:l,verificationId:f,verificationCode:m}=this.params;return u&&l?{temporaryProof:u,phoneNumber:l}:{sessionInfo:f,code:m}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:l,verificationCode:f,phoneNumber:m,temporaryProof:y}=u;return f||l||m||y?new ze({verificationId:l,verificationCode:f,phoneNumber:m,temporaryProof:y}):null}}class Ci{constructor(u){var l,f,m,y,T,P;const $=(0,B.zd)((0,B.pd)(u)),se=null!==(l=$.apiKey)&&void 0!==l?l:null,de=null!==(f=$.oobCode)&&void 0!==f?f:null,me=function Lu(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(m=$.mode)&&void 0!==m?m:null);G(se&&de&&me,"argument-error"),this.apiKey=se,this.operation=me,this.code=de,this.continueUrl=null!==(y=$.continueUrl)&&void 0!==y?y:null,this.languageCode=null!==(T=$.languageCode)&&void 0!==T?T:null,this.tenantId=null!==(P=$.tenantId)&&void 0!==P?P:null}static parseLink(u){const l=function Xl(h){const u=(0,B.zd)((0,B.pd)(h)).link,l=u?(0,B.zd)((0,B.pd)(u)).deep_link_id:null,f=(0,B.zd)((0,B.pd)(h)).deep_link_id;return(f?(0,B.zd)((0,B.pd)(f)).link:null)||f||l||u||h}(u);try{return new Ci(l)}catch{return null}}}let ed=(()=>{class h{constructor(){this.providerId=h.PROVIDER_ID}static credential(l,f){return Mu._fromEmailAndPassword(l,f)}static credentialWithLink(l,f){const m=Ci.parseLink(f);return G(m,"argument-error"),Mu._fromEmailAndCode(l,m.code,m.tenantId)}}return h.PROVIDER_ID="password",h.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h.EMAIL_LINK_SIGN_IN_METHOD="emailLink",h})();class bi{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class nr extends bi{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Si extends nr{static credentialFromJSON(u){const l="string"==typeof u?JSON.parse(u):u;return G("providerId"in l&&"signInMethod"in l,"argument-error"),ni._fromParams(l)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return G(u.idToken||u.accessToken,"argument-error"),ni._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Si.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Si.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:l,oauthAccessToken:f,oauthTokenSecret:m,pendingToken:y,nonce:T,providerId:P}=u;if(!f&&!m&&!l&&!y||!P)return null;try{return new Si(P)._credential({idToken:l,accessToken:f,nonce:T,pendingToken:y})}catch{return null}}}let Nr=(()=>{class h extends nr{constructor(){super("facebook.com")}static credential(l){return ni._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.FACEBOOK_SIGN_IN_METHOD="facebook.com",h.PROVIDER_ID="facebook.com",h})(),$r=(()=>{class h extends nr{constructor(){super("google.com"),this.addScope("profile")}static credential(l,f){return ni._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:f})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:f,oauthAccessToken:m}=l;if(!f&&!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.GOOGLE_SIGN_IN_METHOD="google.com",h.PROVIDER_ID="google.com",h})(),nt=(()=>{class h extends nr{constructor(){super("github.com")}static credential(l){return ni._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return h.credential(l.oauthAccessToken)}catch{return null}}}return h.GITHUB_SIGN_IN_METHOD="github.com",h.PROVIDER_ID="github.com",h})();class zi extends Ai{constructor(u,l){super(u,u),this.pendingToken=l}_getIdTokenResponse(u){return gr(u,this.buildRequest())}_linkToIdToken(u,l){const f=this.buildRequest();return f.idToken=l,gr(u,f)}_getReauthenticationResolver(u){const l=this.buildRequest();return l.autoCreate=!1,gr(u,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const l="string"==typeof u?JSON.parse(u):u,{providerId:f,signInMethod:m,pendingToken:y}=l;return f&&m&&y&&f===m?new zi(f,y):null}static _create(u,l){return new zi(u,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wa extends bi{constructor(u){G(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return wa.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return wa.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const l=zi.fromJSON(u);return G(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:l,providerId:f}=u;if(!l||!f)return null;try{return zi._create(f,l)}catch{return null}}}let ii=(()=>{class h extends nr{constructor(){super("twitter.com")}static credential(l,f){return ni._fromParams({providerId:h.PROVIDER_ID,signInMethod:h.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:f})}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:f,oauthTokenSecret:m}=l;if(!f||!m)return null;try{return h.credential(f,m)}catch{return null}}}return h.TWITTER_SIGN_IN_METHOD="twitter.com",h.PROVIDER_ID="twitter.com",h})();function ho(h,u){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,I.Z)(function*(h,u){return ve(h,"POST","/v1/accounts:signUp",Z(h,u))})).apply(this,arguments)}class mr{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,l,f,m=!1){return(0,I.Z)(function*(){const y=yield ie._fromIdTokenResponse(u,f,m),T=Bu(f);return new mr({user:y,providerId:T,_tokenResponse:f,operationType:l})})()}static _forOperation(u,l,f){return(0,I.Z)(function*(){yield u._updateTokensIfNecessary(f,!0);const m=Bu(f);return new mr({user:u,providerId:m,_tokenResponse:f,operationType:l})})()}}function Bu(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}function Uu(){return(Uu=(0,I.Z)(function*(h){var u;const l=bt(h);if(yield l._initializationPromise,null!==(u=l.currentUser)&&void 0!==u&&u.isAnonymous)return new mr({user:l.currentUser,providerId:null,operationType:"signIn"});const f=yield ho(l,{returnSecureToken:!0}),m=yield mr._fromIdTokenResponse(l,"signIn",f,!0);return yield l._updateCurrentUser(m.user),m})).apply(this,arguments)}class Gi extends B.ZR{constructor(u,l,f,m){var y;super(l.code,l.message),this.operationType=f,this.user=m,Object.setPrototypeOf(this,Gi.prototype),this.customData={appName:u.name,tenantId:null!==(y=u.tenantId)&&void 0!==y?y:void 0,_serverResponse:l.customData._serverResponse,operationType:f}}static _fromErrorAndOperation(u,l,f,m){return new Gi(u,l,f,m)}}function nd(h,u,l,f){return("reauthenticate"===u?l._getReauthenticationResolver(h):l._getIdTokenResponse(h)).catch(y=>{throw"auth/multi-factor-auth-required"===y.code?Gi._fromErrorAndOperation(h,y,u,f):y})}function rd(h){return new Set(h.map(({providerId:u})=>u).filter(u=>!!u))}function ju(){return ju=(0,I.Z)(function*(h,u){const l=(0,B.m9)(h);yield rr(!0,l,u);const{providerUserInfo:f}=yield function da(h,u){return Xn.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[u]}),m=rd(f||[]);return l.providerData=l.providerData.filter(y=>m.has(y.providerId)),m.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),ju.apply(this,arguments)}function id(h,u){return sd.apply(this,arguments)}function sd(){return(sd=(0,I.Z)(function*(h,u,l=!1){const f=yield Pr(h,u._linkToIdToken(h.auth,yield h.getIdToken()),l);return mr._forOperation(h,"link",f)})).apply(this,arguments)}function rr(h,u,l){return od.apply(this,arguments)}function od(){return(od=(0,I.Z)(function*(h,u,l){yield Hn(u);const m=!1===h?"provider-already-linked":"no-such-provider";G(rd(u.providerData).has(l)===h,u.auth,m)})).apply(this,arguments)}function ad(h,u){return ud.apply(this,arguments)}function ud(){return(ud=(0,I.Z)(function*(h,u,l=!1){const{auth:f}=h,m="reauthenticate";try{const y=yield Pr(h,nd(f,m,u,h),l);G(y.idToken,f,"internal-error");const T=oo(y.idToken);G(T,f,"internal-error");const{sub:P}=T;return G(h.uid===P,f,"user-mismatch"),mr._forOperation(h,m,y)}catch(y){throw"auth/user-not-found"===y?.code&&at(f,"user-mismatch"),y}})).apply(this,arguments)}function mp(h,u){return cd.apply(this,arguments)}function cd(){return(cd=(0,I.Z)(function*(h,u,l=!1){const f="signIn",m=yield nd(h,f,u),y=yield mr._fromIdTokenResponse(h,f,m);return l||(yield h._updateCurrentUser(y.user)),y})).apply(this,arguments)}function Hu(h,u){return $u.apply(this,arguments)}function $u(){return($u=(0,I.Z)(function*(h,u){return mp(bt(h),u)})).apply(this,arguments)}function _p(h,u){return ld.apply(this,arguments)}function ld(){return(ld=(0,I.Z)(function*(h,u){const l=(0,B.m9)(h);return yield rr(!1,l,u.providerId),id(l,u)})).apply(this,arguments)}function yp(h,u){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,I.Z)(function*(h,u){return ad((0,B.m9)(h),u)})).apply(this,arguments)}function dd(){return(dd=(0,I.Z)(function*(h,u){return ve(h,"POST","/v1/accounts:signInWithCustomToken",Z(h,u))})).apply(this,arguments)}function si(){return si=(0,I.Z)(function*(h,u){const l=bt(h),f=yield function Dy(h,u){return dd.apply(this,arguments)}(l,{token:u,returnSecureToken:!0}),m=yield mr._fromIdTokenResponse(l,"signIn",f);return yield l._updateCurrentUser(m.user),m}),si.apply(this,arguments)}class Ta{constructor(u,l){this.factorId=u,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(u,l){return"phoneInfo"in l?qu._fromServerResponse(u,l):"totpInfo"in l?ir._fromServerResponse(u,l):at(u,"internal-error")}}class qu extends Ta{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,l){return new qu(l)}}class ir extends Ta{constructor(u){super("totp",u)}static _fromServerResponse(u,l){return new ir(l)}}function wn(h,u,l){var f;G((null===(f=l.url)||void 0===f?void 0:f.length)>0,h,"invalid-continue-uri"),G(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,h,"invalid-dynamic-link-domain"),u.continueUrl=l.url,u.dynamicLinkDomain=l.dynamicLinkDomain,u.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(G(l.iOS.bundleId.length>0,h,"missing-ios-bundle-id"),u.iOSBundleId=l.iOS.bundleId),l.android&&(G(l.android.packageName.length>0,h,"missing-android-pkg-name"),u.androidInstallApp=l.android.installApp,u.androidMinimumVersionCode=l.android.minimumVersion,u.androidPackageName=l.android.packageName)}function Ze(h){return nn.apply(this,arguments)}function nn(){return(nn=(0,I.Z)(function*(h){const u=bt(h);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function Rs(){return(Rs=(0,I.Z)(function*(h,u,l){const f=bt(h),m={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};l&&wn(f,m,l),yield we(f,m,"getOobCode",Yl)})).apply(this,arguments)}function zu(){return zu=(0,I.Z)(function*(h,u,l){yield ga((0,B.m9)(h),{oobCode:u,newPassword:l}).catch(function(){var f=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&Ze(h),m});return function(m){return f.apply(this,arguments)}}())}),zu.apply(this,arguments)}function fo(){return fo=(0,I.Z)(function*(h,u){yield function ap(h,u){return Mn.apply(this,arguments)}((0,B.m9)(h),{oobCode:u})}),fo.apply(this,arguments)}function Ip(h,u){return hd.apply(this,arguments)}function hd(){return(hd=(0,I.Z)(function*(h,u){const l=(0,B.m9)(h),f=yield ga(l,{oobCode:u}),m=f.requestType;switch(G(m,l,"internal-error"),m){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(f.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(f.mfaInfo,l,"internal-error");default:G(f.email,l,"internal-error")}let y=null;return f.mfaInfo&&(y=Ta._fromServerResponse(bt(l),f.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.newEmail:f.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===f.requestType?f.email:f.newEmail)||null,multiFactorInfo:y},operation:m}})).apply(this,arguments)}function ae(){return(ae=(0,I.Z)(function*(h,u){const{data:l}=yield Ip((0,B.m9)(h),u);return l.email})).apply(this,arguments)}function vt(){return(vt=(0,I.Z)(function*(h,u,l){const f=bt(h),T=yield we(f,{returnSecureToken:!0,email:u,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ho).catch($=>{throw"auth/password-does-not-meet-requirements"===$.code&&Ze(h),$}),P=yield mr._fromIdTokenResponse(f,"signIn",T);return yield f._updateCurrentUser(P.user),P})).apply(this,arguments)}function dn(){return(dn=(0,I.Z)(function*(h,u,l){const f=bt(h),m={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function y(T,P){G(P.handleCodeInApp,f,"argument-error"),P&&wn(f,T,P)})(m,l),yield we(f,m,"getOobCode",dp)})).apply(this,arguments)}function oi(){return(oi=(0,I.Z)(function*(h,u,l){const f=(0,B.m9)(h),m=ed.credentialWithLink(u,l||Nn());return G(m._tenantId===(f.tenantId||null),f,"tenant-id-mismatch"),Hu(f,m)})).apply(this,arguments)}function Se(){return(Se=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:createAuthUri",Z(h,u))})).apply(this,arguments)}function Gu(){return Gu=(0,I.Z)(function*(h,u){const f={identifier:u,continueUri:wi()?Nn():"http://localhost"},{signinMethods:m}=yield function go(h,u){return Se.apply(this,arguments)}((0,B.m9)(h),f);return m||[]}),Gu.apply(this,arguments)}function Vt(){return Vt=(0,I.Z)(function*(h,u){const l=(0,B.m9)(h),m={requestType:"VERIFY_EMAIL",idToken:yield h.getIdToken()};u&&wn(l.auth,m,u);const{email:y}=yield function g0(h,u){return le.apply(this,arguments)}(l.auth,m);y!==h.email&&(yield h.reload())}),Vt.apply(this,arguments)}function Wi(){return Wi=(0,I.Z)(function*(h,u,l){const f=(0,B.m9)(h),y={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield h.getIdToken(),newEmail:u};l&&wn(f.auth,y,l);const{email:T}=yield function vy(h,u){return Ia.apply(this,arguments)}(f.auth,y);T!==h.email&&(yield h.reload())}),Wi.apply(this,arguments)}function Ps(){return(Ps=(0,I.Z)(function*(h,u){return U(h,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function ui(){return ui=(0,I.Z)(function*(h,{displayName:u,photoURL:l}){if(void 0===u&&void 0===l)return;const f=(0,B.m9)(h),y={idToken:yield f.getIdToken(),displayName:u,photoUrl:l,returnSecureToken:!0},T=yield Pr(f,function ai(h,u){return Ps.apply(this,arguments)}(f.auth,y));f.displayName=T.displayName||null,f.photoURL=T.photoUrl||null;const P=f.providerData.find(({providerId:$})=>"password"===$);P&&(P.displayName=f.displayName,P.photoURL=f.photoURL),yield f._updateTokensIfNecessary(T)}),ui.apply(this,arguments)}function _o(h,u,l){return je.apply(this,arguments)}function je(){return je=(0,I.Z)(function*(h,u,l){const{auth:f}=h,y={idToken:yield h.getIdToken(),returnSecureToken:!0};u&&(y.email=u),l&&(y.password=l);const T=yield Pr(h,function op(h,u){return Ql.apply(this,arguments)}(f,y));yield h._updateTokensIfNecessary(T,!0)}),je.apply(this,arguments)}class Zi{constructor(u,l,f={}){this.isNewUser=u,this.providerId=l,this.profile=f}}class fd extends Zi{constructor(u,l,f,m){super(u,l,f),this.username=m}}class ci extends Zi{constructor(u,l){super(u,"facebook.com",l)}}class Wu extends fd{constructor(u,l){super(u,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class yo extends Zi{constructor(u,l){super(u,"google.com",l)}}class Sa extends fd{constructor(u,l,f){super(u,"twitter.com",l,f)}}function Tn(h){const{user:u,_tokenResponse:l}=h;return u.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function v0(h){var u,l;if(!h)return null;const{providerId:f}=h,m=h.rawUserInfo?JSON.parse(h.rawUserInfo):{},y=h.isNewUser||"identitytoolkit#SignupNewUserResponse"===h.kind;if(!f&&h?.idToken){const T=null===(l=null===(u=oo(h.idToken))||void 0===u?void 0:u.firebase)||void 0===l?void 0:l.sign_in_provider;if(T)return new Zi(y,"anonymous"!==T&&"custom"!==T?T:null)}if(!f)return null;switch(f){case"facebook.com":return new ci(y,m);case"github.com":return new Wu(y,m);case"google.com":return new yo(y,m);case"twitter.com":return new Sa(y,m,h.screenName||null);case"custom":case"anonymous":return new Zi(y,null);default:return new Zi(y,f,m)}}(l)}class vo{constructor(u,l,f){this.type=u,this.credential=l,this.user=f}static _fromIdtoken(u,l){return new vo("enroll",u,l)}static _fromMfaPendingCredential(u){return new vo("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var l,f;if(u?.multiFactorSession){if(null!==(l=u.multiFactorSession)&&void 0!==l&&l.pendingCredential)return vo._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(f=u.multiFactorSession)&&void 0!==f&&f.idToken)return vo._fromIdtoken(u.multiFactorSession.idToken)}return null}}class Tp{constructor(u,l,f){this.session=u,this.hints=l,this.signInResolver=f}static _fromError(u,l){const f=bt(u),m=l.customData._serverResponse,y=(m.mfaInfo||[]).map(P=>Ta._fromServerResponse(f,P));G(m.mfaPendingCredential,f,"internal-error");const T=vo._fromMfaPendingCredential(m.mfaPendingCredential);return new Tp(T,y,function(){var P=(0,I.Z)(function*($){const se=yield $._process(f,T);delete m.mfaInfo,delete m.mfaPendingCredential;const de=Object.assign(Object.assign({},m),{idToken:se.idToken,refreshToken:se.refreshToken});switch(l.operationType){case"signIn":const me=yield mr._fromIdTokenResponse(f,l.operationType,de);return yield f._updateCurrentUser(me.user),me;case"reauthenticate":return G(l.user,f,"internal-error"),mr._forOperation(l.user,l.operationType,de);default:at(f,"internal-error")}});return function($){return P.apply(this,arguments)}}())}resolveSignIn(u){var l=this;return(0,I.Z)(function*(){return l.signInResolver(u)})()}}class Dp{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(f=>Ta._fromServerResponse(u.auth,f)))})}static _fromUser(u){return new Dp(u)}getSession(){var u=this;return(0,I.Z)(function*(){return vo._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,l){var f=this;return(0,I.Z)(function*(){const m=u,y=yield f.getSession(),T=yield Pr(f.user,m._process(f.user.auth,y,l));return yield f.user._updateTokensIfNecessary(T),f.user.reload()})()}unenroll(u){var l=this;return(0,I.Z)(function*(){const f="string"==typeof u?u:u.uid,m=yield l.user.getIdToken();try{const y=yield Pr(l.user,function b0(h,u){return U(h,"POST","/v2/accounts/mfaEnrollment:withdraw",Z(h,u))}(l.user.auth,{idToken:m,mfaEnrollmentId:f}));l.enrolledFactors=l.enrolledFactors.filter(({uid:T})=>T!==f),yield l.user._updateTokensIfNecessary(y),yield l.user.reload()}catch(y){throw y}})()}}const Ap=new WeakMap,gd="__sak";class md{constructor(u,l){this.storageRetriever=u,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(gd,"1"),this.storage.removeItem(gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,l){return this.storage.setItem(u,JSON.stringify(l)),Promise.resolve()}_get(u){const l=this.storage.getItem(u);return Promise.resolve(l?JSON.parse(l):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const di=(()=>{class h extends md{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,f)=>this.onStorageEvent(l,f),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cp(){const h=(0,B.z$)();return ei(h)||Pe(h)}()&&function qe(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ge(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const f of Object.keys(this.listeners)){const m=this.storage.getItem(f),y=this.localCache[f];m!==y&&l(f,y,m)}}onStorageEvent(l,f=!1){if(!l.key)return void this.forAllChangedKeys((P,$,se)=>{this.notifyListeners(P,se)});const m=l.key;if(f?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const P=this.storage.getItem(m);if(l.newValue!==P)null!==l.newValue?this.storage.setItem(m,l.newValue):this.storage.removeItem(m);else if(this.localCache[m]===l.newValue&&!f)return}const y=()=>{const P=this.storage.getItem(m);!f&&this.localCache[m]===P||this.notifyListeners(m,P)},T=this.storage.getItem(m);!function zt(){return(0,B.w1)()&&10===document.documentMode}()||T===l.newValue||l.newValue===l.oldValue?y():setTimeout(y,10)}notifyListeners(l,f){this.localCache[l]=f;const m=this.listeners[l];if(m)for(const y of Array.from(m))y(f&&JSON.parse(f))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,f,m)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:f,newValue:m}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,f){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(f)}_removeListener(l,f){this.listeners[l]&&(this.listeners[l].delete(f),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,f){var m=()=>super._set,y=this;return(0,I.Z)(function*(){yield m().call(y,l,f),y.localCache[l]=JSON.stringify(f)})()}_get(l){var f=()=>super._get,m=this;return(0,I.Z)(function*(){const y=yield f().call(m,l);return m.localCache[l]=JSON.stringify(y),y})()}_remove(l){var f=()=>super._remove,m=this;return(0,I.Z)(function*(){yield f().call(m,l),delete m.localCache[l]})()}}return h.type="LOCAL",h})(),Ms=(()=>{class h extends md{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,f){}_removeListener(l,f){}}return h.type="SESSION",h})();let Dn=(()=>{class h{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const f=this.receivers.find(y=>y.isListeningto(l));if(f)return f;const m=new h(l);return this.receivers.push(m),m}isListeningto(l){return this.eventTarget===l}handleEvent(l){var f=this;return(0,I.Z)(function*(){const m=l,{eventId:y,eventType:T,data:P}=m.data,$=f.handlersMap[T];if(!$?.size)return;m.ports[0].postMessage({status:"ack",eventId:y,eventType:T});const se=Array.from($).map(function(){var me=(0,I.Z)(function*(Wt){return Wt(m.origin,P)});return function(Wt){return me.apply(this,arguments)}}()),de=yield function N0(h){return Promise.all(h.map(function(){var u=(0,I.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(f){return{fulfilled:!1,reason:f}}});return function(l){return u.apply(this,arguments)}}()))}(se);m.ports[0].postMessage({status:"done",eventId:y,eventType:T,response:de})})()}_subscribe(l,f){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(f)}_unsubscribe(l,f){this.handlersMap[l]&&f&&this.handlersMap[l].delete(f),(!f||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return h.receivers=[],h})();function Ki(h="",u=10){let l="";for(let f=0;f<u;f++)l+=Math.floor(10*Math.random());return h+l}class xr{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,l,f=50){var m=this;return(0,I.Z)(function*(){const y=typeof MessageChannel<"u"?new MessageChannel:null;if(!y)throw new Error("connection_unavailable");let T,P;return new Promise(($,se)=>{const de=Ki("",20);y.port1.start();const me=setTimeout(()=>{se(new Error("unsupported_event"))},f);P={messageChannel:y,onMessage(Wt){const zr=Wt;if(zr.data.eventId===de)switch(zr.data.status){case"ack":clearTimeout(me),T=setTimeout(()=>{se(new Error("timeout"))},3e3);break;case"done":clearTimeout(T),$(zr.data.response);break;default:clearTimeout(me),clearTimeout(T),se(new Error("invalid_response"))}}},m.handlers.add(P),y.port1.addEventListener("message",P.onMessage),m.target.postMessage({eventType:u,eventId:de,data:l},[y.port2])}).finally(()=>{P&&m.removeMessageHandler(P)})})()}}function Qt(){return window}function Ku(){return typeof Qt().WorkerGlobalScope<"u"&&"function"==typeof Qt().importScripts}function Pa(){return(Pa=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Qu="firebaseLocalStorageDb",Na="firebaseLocalStorage",yd="fbase_key";class Qi{constructor(u){this.request=u}toPromise(){return new Promise((u,l)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Yi(h,u){return h.transaction([Na],u?"readwrite":"readonly").objectStore(Na)}function Yu(){const h=indexedDB.open(Qu,1);return new Promise((u,l)=>{h.addEventListener("error",()=>{l(h.error)}),h.addEventListener("upgradeneeded",()=>{const f=h.result;try{f.createObjectStore(Na,{keyPath:yd})}catch(m){l(m)}}),h.addEventListener("success",(0,I.Z)(function*(){const f=h.result;f.objectStoreNames.contains(Na)?u(f):(f.close(),yield function Io(){const h=indexedDB.deleteDatabase(Qu);return new Qi(h).toPromise()}(),u(yield Yu()))}))})}function Cy(h,u,l){return Np.apply(this,arguments)}function Np(){return(Np=(0,I.Z)(function*(h,u,l){const f=Yi(h,!0).put({[yd]:u,value:l});return new Qi(f).toPromise()})).apply(this,arguments)}function vd(){return(vd=(0,I.Z)(function*(h,u){const l=Yi(h,!1).get(u),f=yield new Qi(l).toPromise();return void 0===f?null:f.value})).apply(this,arguments)}function xp(h,u){const l=Yi(h,!0).delete(u);return new Qi(l).toPromise()}const Eo=(()=>{class h{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,I.Z)(function*(){return l.db||(l.db=yield Yu()),l.db})()}_withRetries(l){var f=this;return(0,I.Z)(function*(){let m=0;for(;;)try{const y=yield f._openDb();return yield l(y)}catch(y){if(m++>3)throw y;f.db&&(f.db.close(),f.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,I.Z)(function*(){return Ku()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,I.Z)(function*(){l.receiver=Dn._getInstance(function _d(){return Ku()?self:null}()),l.receiver._subscribe("keyChanged",function(){var f=(0,I.Z)(function*(m,y){return{keyProcessed:(yield l._poll()).includes(y.key)}});return function(m,y){return f.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var f=(0,I.Z)(function*(m,y){return["keyChanged"]});return function(m,y){return f.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,I.Z)(function*(){var f,m;if(l.activeServiceWorker=yield function Sp(){return Pa.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new xr(l.activeServiceWorker);const y=yield l.sender._send("ping",{},800);y&&null!==(f=y[0])&&void 0!==f&&f.fulfilled&&null!==(m=y[0])&&void 0!==m&&m.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var f=this;return(0,I.Z)(function*(){if(f.sender&&f.activeServiceWorker&&function Rp(){var h;return(null===(h=navigator?.serviceWorker)||void 0===h?void 0:h.controller)||null}()===f.activeServiceWorker)try{yield f.sender._send("keyChanged",{key:l},f.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const l=yield Yu();return yield Cy(l,gd,"1"),yield xp(l,gd),!0}catch{}return!1})()}_withPendingWrite(l){var f=this;return(0,I.Z)(function*(){f.pendingWrites++;try{yield l()}finally{f.pendingWrites--}})()}_set(l,f){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(y=>Cy(y,l,f)),m.localCache[l]=f,m.notifyServiceWorker(l)}))})()}_get(l){var f=this;return(0,I.Z)(function*(){const m=yield f._withRetries(y=>function x0(h,u){return vd.apply(this,arguments)}(y,l));return f.localCache[l]=m,m})()}_remove(l){var f=this;return(0,I.Z)(function*(){return f._withPendingWrite((0,I.Z)(function*(){return yield f._withRetries(m=>xp(m,l)),delete f.localCache[l],f.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,I.Z)(function*(){const f=yield l._withRetries(T=>{const P=Yi(T,!1).getAll();return new Qi(P).toPromise()});if(!f)return[];if(0!==l.pendingWrites)return[];const m=[],y=new Set;for(const{fbase_key:T,value:P}of f)y.add(T),JSON.stringify(l.localCache[T])!==JSON.stringify(P)&&(l.notifyListeners(T,P),m.push(T));for(const T of Object.keys(l.localCache))l.localCache[T]&&!y.has(T)&&(l.notifyListeners(T,null),m.push(T));return m})()}notifyListeners(l,f){this.localCache[l]=f;const m=this.listeners[l];if(m)for(const y of Array.from(m))y(f)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,f){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(f)}_removeListener(l,f){this.listeners[l]&&(this.listeners[l].delete(f),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return h.type="LOCAL",h})(),xa=1e12;class Sy{constructor(u){this.auth=u,this.counter=xa,this._widgets=new Map}render(u,l){const f=this.counter;return this._widgets.set(f,new Ry(u,this.auth.name,l||{})),this.counter++,f}reset(u){var l;const f=u||xa;null===(l=this._widgets.get(f))||void 0===l||l.delete(),this._widgets.delete(f)}getResponse(u){var l;return(null===(l=this._widgets.get(u||xa))||void 0===l?void 0:l.getResponse())||""}execute(u){var l=this;return(0,I.Z)(function*(){var f;return null===(f=l._widgets.get(u||xa))||void 0===f||f.execute(),""})()}}class Ry{constructor(u,l,f){this.params=f,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const m="string"==typeof u?document.getElementById(u):u;G(m,"argument-error",{appName:l}),this.container=m,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Py(h){const u=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<h;f++)u.push(l.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":l}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ju=gy("rcb"),Ny=new Xr(3e4,6e4);class xy{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Qt().grecaptcha)||void 0===u||!u.render)}load(u,l=""){return G(function L0(h){return h.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(h)}(l),u,"argument-error"),this.shouldResolveImmediately(l)&&Bn(Qt().grecaptcha)?Promise.resolve(Qt().grecaptcha):new Promise((f,m)=>{const y=Qt().setTimeout(()=>{m(yt(u,"network-request-failed"))},Ny.get());Qt()[Ju]=()=>{Qt().clearTimeout(y),delete Qt()[Ju];const P=Qt().grecaptcha;if(!P||!Bn(P))return void m(yt(u,"internal-error"));const $=P.render;P.render=(se,de)=>{const me=$(se,de);return this.counter++,me},this.hostLanguage=l,f(P)},np(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Ju,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(y),m(yt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var l;return!(null===(l=Qt().grecaptcha)||void 0===l||!l.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class My{load(u){return(0,I.Z)(function*(){return new Sy(u)})()}clearedOneInstance(){}}const Ma="recaptcha",Fp={theme:"light",type:"image"};class ky{constructor(u,l,f=Object.assign({},Fp)){this.parameters=f,this.type=Ma,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bt(u),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const m="string"==typeof l?document.getElementById(l):l;G(m,this.auth,"argument-error"),this.container=m,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new My:new xy,this.validateStartingState()}verify(){var u=this;return(0,I.Z)(function*(){u.assertNotDestroyed();const l=yield u.render(),f=u.getAssertedRecaptcha();return f.getResponse(l)||new Promise(y=>{const T=P=>{P&&(u.tokenChangeListeners.delete(T),y(P))};u.tokenChangeListeners.add(T),u.isInvisible&&f.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return l=>{if(this.tokenChangeListeners.forEach(f=>f(l)),"function"==typeof u)u(l);else if("string"==typeof u){const f=Qt()[u];"function"==typeof f&&f(l)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,I.Z)(function*(){if(yield u.init(),!u.widgetId){let l=u.container;if(!u.isInvisible){const f=document.createElement("div");l.appendChild(f),l=f}u.widgetId=u.getAssertedRecaptcha().render(l,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,I.Z)(function*(){G(wi()&&!Ku(),u.auth,"internal-error"),yield function Oy(){let h=null;return new Promise(u=>{"complete"!==document.readyState?(h=()=>u(),window.addEventListener("load",h)):u()}).catch(u=>{throw h&&window.removeEventListener("load",h),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const l=yield function ca(h){return Ti.apply(this,arguments)}(u.auth);G(l,u.auth,"internal-error"),u.parameters.sitekey=l})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xu{constructor(u,l){this.verificationId=u,this.onConfirmation=l}confirm(u){const l=ze._fromVerification(this.verificationId,u);return this.onConfirmation(l)}}function Ed(){return(Ed=(0,I.Z)(function*(h,u,l){const f=bt(h),m=yield ka(f,u,(0,B.m9)(l));return new Xu(m,y=>Hu(f,y))})).apply(this,arguments)}function Td(){return(Td=(0,I.Z)(function*(h,u,l){const f=(0,B.m9)(h);yield rr(!1,f,"phone");const m=yield ka(f.auth,u,(0,B.m9)(l));return new Xu(m,y=>_p(f,y))})).apply(this,arguments)}function ec(){return(ec=(0,I.Z)(function*(h,u,l){const f=(0,B.m9)(h),m=yield ka(f.auth,u,(0,B.m9)(l));return new Xu(m,y=>yp(f,y))})).apply(this,arguments)}function ka(h,u,l){return pt.apply(this,arguments)}function pt(){return pt=(0,I.Z)(function*(h,u,l){var f;const m=yield l.verify();try{let y;if(G("string"==typeof m,h,"argument-error"),G(l.type===Ma,h,"argument-error"),y="string"==typeof u?{phoneNumber:u}:u,"session"in y){const T=y.session;if("phoneNumber"in y)return G("enroll"===T.type,h,"internal-error"),(yield function D0(h,u){return U(h,"POST","/v2/accounts/mfaEnrollment:start",Z(h,u))}(h,{idToken:T.credential,phoneEnrollmentInfo:{phoneNumber:y.phoneNumber,recaptchaToken:m}})).phoneSessionInfo.sessionInfo;{G("signin"===T.type,h,"internal-error");const P=(null===(f=y.multiFactorHint)||void 0===f?void 0:f.uid)||y.multiFactorUid;return G(P,h,"missing-multi-factor-info"),(yield function Id(h,u){return U(h,"POST","/v2/accounts/mfaSignIn:start",Z(h,u))}(h,{mfaPendingCredential:T.credential,mfaEnrollmentId:P,phoneSignInInfo:{recaptchaToken:m}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:T}=yield function Iy(h,u){return Jl.apply(this,arguments)}(h,{phoneNumber:y.phoneNumber,recaptchaToken:m});return T}}finally{l._reset()}}),pt.apply(this,arguments)}function wo(){return(wo=(0,I.Z)(function*(h,u){yield id((0,B.m9)(h),u)})).apply(this,arguments)}let hn=(()=>{class h{constructor(l){this.providerId=h.PROVIDER_ID,this.auth=bt(l)}verifyPhoneNumber(l,f){return ka(this.auth,l,(0,B.m9)(f))}static credential(l,f){return ze._fromVerification(l,f)}static credentialFromResult(l){return h.credentialFromTaggedObject(l)}static credentialFromError(l){return h.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:f,temporaryProof:m}=l;return f&&m?ze._fromTokenResponse(f,m):null}}return h.PROVIDER_ID="phone",h.PHONE_SIGN_IN_METHOD="phone",h})();function ks(h,u){return u?Ve(u):(G(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}class tc extends Ai{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return gr(u,this._buildIdpRequest())}_linkToIdToken(u,l){return gr(u,this._buildIdpRequest(l))}_getReauthenticationResolver(u){return gr(u,this._buildIdpRequest())}_buildIdpRequest(u){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(l.idToken=u),l}}function To(h){return mp(h.auth,new tc(h),h.bypassAuthState)}function vr(h){const{auth:u,user:l}=h;return G(l,u,"internal-error"),ad(l,new tc(h),h.bypassAuthState)}function Ly(h){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,I.Z)(function*(h){const{auth:u,user:l}=h;return G(l,u,"internal-error"),id(l,new tc(h),h.bypassAuthState)})).apply(this,arguments)}class Bp{constructor(u,l,f,m,y=!1){this.auth=u,this.resolver=f,this.user=m,this.bypassAuthState=y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var u=this;return new Promise(function(){var l=(0,I.Z)(function*(f,m){u.pendingPromise={resolve:f,reject:m};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(y){u.reject(y)}});return function(f,m){return l.apply(this,arguments)}}())}onAuthEvent(u){var l=this;return(0,I.Z)(function*(){const{urlResponse:f,sessionId:m,postBody:y,tenantId:T,error:P,type:$}=u;if(P)return void l.reject(P);const se={auth:l.auth,requestUri:f,sessionId:m,tenantId:T||void 0,postBody:y||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask($)(se))}catch(de){l.reject(de)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return To;case"linkViaPopup":case"linkViaRedirect":return Ly;case"reauthViaPopup":case"reauthViaRedirect":return vr;default:at(this.auth,"internal-error")}}resolve(u){Ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){Ct(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ji=new Xr(2e3,1e4);function Cd(){return(Cd=(0,I.Z)(function*(h,u,l){const f=bt(h);Fe(h,u,bi);const m=ks(f,l);return new Te(f,"signInViaPopup",u,m).executeNotNull()})).apply(this,arguments)}function nc(){return(nc=(0,I.Z)(function*(h,u,l){const f=(0,B.m9)(h);Fe(f.auth,u,bi);const m=ks(f.auth,l);return new Te(f.auth,"reauthViaPopup",u,m,f).executeNotNull()})).apply(this,arguments)}function bd(){return(bd=(0,I.Z)(function*(h,u,l){const f=(0,B.m9)(h);Fe(f.auth,u,bi);const m=ks(f.auth,l);return new Te(f.auth,"linkViaPopup",u,m,f).executeNotNull()})).apply(this,arguments)}let Te=(()=>{class h extends Bp{constructor(l,f,m,y,T){super(l,f,y,T),this.provider=m,this.authWindow=null,this.pollId=null,h.currentPopupAction&&h.currentPopupAction.cancel(),h.currentPopupAction=this}executeNotNull(){var l=this;return(0,I.Z)(function*(){const f=yield l.execute();return G(f,l.auth,"internal-error"),f})()}onExecution(){var l=this;return(0,I.Z)(function*(){Ct(1===l.filter.length,"Popup operations only handle one event");const f=Ki();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],f),l.authWindow.associatedEvent=f,l.resolver._originValidation(l.auth).catch(m=>{l.reject(m)}),l.resolver._isIframeWebStorageSupported(l.auth,m=>{m||l.reject(yt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(yt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h.currentPopupAction=null}pollUserCancellation(){const l=()=>{var f,m;this.pollId=null!==(m=null===(f=this.authWindow)||void 0===f?void 0:f.window)&&void 0!==m&&m.closed?window.setTimeout(()=>{this.pollId=null,this.reject(yt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,Ji.get())};l()}}return h.currentPopupAction=null,h})();const $p="pendingRedirect",rc=new Map;class Fy extends Bp{constructor(u,l,f=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,f),this.eventId=null}execute(){var u=()=>super.execute,l=this;return(0,I.Z)(function*(){let f=rc.get(l.auth._key());if(!f){try{const y=(yield function Vy(h,u){return Sd.apply(this,arguments)}(l.resolver,l.auth))?yield u().call(l):null;f=()=>Promise.resolve(y)}catch(m){f=()=>Promise.reject(m)}rc.set(l.auth._key(),f)}return l.bypassAuthState||rc.set(l.auth._key(),()=>Promise.resolve(null)),f()})()}onAuthEvent(u){var l=()=>super.onAuthEvent,f=this;return(0,I.Z)(function*(){if("signInViaRedirect"===u.type)return l().call(f,u);if("unknown"!==u.type){if(u.eventId){const m=yield f.auth._redirectUserForId(u.eventId);if(m)return f.user=m,l().call(f,u);f.resolve(null)}}else f.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function Sd(){return(Sd=(0,I.Z)(function*(h,u){const l=zp(u),f=qp(h);if(!(yield f._isAvailable()))return!1;const m="true"===(yield f._get(l));return yield f._remove(l),m})).apply(this,arguments)}function ic(h,u){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,I.Z)(function*(h,u){return qp(h)._set(zp(u),"true")})).apply(this,arguments)}function Rd(h,u){rc.set(h._key(),u)}function qp(h){return Ve(h._redirectPersistence)}function zp(h){return ln($p,h.config.apiKey,h.name)}function Uy(h,u,l){return function K(h,u,l){return Ke.apply(this,arguments)}(h,u,l)}function Ke(){return(Ke=(0,I.Z)(function*(h,u,l){const f=bt(h);Fe(h,u,bi),yield f._initializationPromise;const m=ks(f,l);return yield ic(m,f),m._openRedirect(f,u,"signInViaRedirect")})).apply(this,arguments)}function Gp(h,u,l){return function Wp(h,u,l){return rn.apply(this,arguments)}(h,u,l)}function rn(){return(rn=(0,I.Z)(function*(h,u,l){const f=(0,B.m9)(h);Fe(f.auth,u,bi),yield f.auth._initializationPromise;const m=ks(f.auth,l);yield ic(m,f.auth);const y=yield Nd(f);return m._openRedirect(f.auth,u,"reauthViaRedirect",y)})).apply(this,arguments)}function Zp(h,u,l){return function Oa(h,u,l){return Mr.apply(this,arguments)}(h,u,l)}function Mr(){return(Mr=(0,I.Z)(function*(h,u,l){const f=(0,B.m9)(h);Fe(f.auth,u,bi),yield f.auth._initializationPromise;const m=ks(f.auth,l);yield rr(!1,f,u.providerId),yield ic(m,f.auth);const y=yield Nd(f);return m._openRedirect(f.auth,u,"linkViaRedirect",y)})).apply(this,arguments)}function La(){return(La=(0,I.Z)(function*(h,u){return yield bt(h)._initializationPromise,sc(h,u,!1)})).apply(this,arguments)}function sc(h,u){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,I.Z)(function*(h,u,l=!1){const f=bt(h),m=ks(f,u),T=yield new Fy(f,m,l).execute();return T&&!l&&(delete T.user._redirectEventId,yield f._persistUserIfCurrent(T.user),yield f._setRedirectUser(null,u)),T})).apply(this,arguments)}function Nd(h){return An.apply(this,arguments)}function An(){return(An=(0,I.Z)(function*(h){const u=Ki(`${h.uid}:::`);return h._redirectEventId=u,yield h.auth._setRedirectUser(h),yield h.auth._persistUserIfCurrent(h),u})).apply(this,arguments)}class xd{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let l=!1;return this.consumers.forEach(f=>{this.isEventForConsumer(u,f)&&(l=!0,this.sendToConsumer(u,f),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function jy(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fi(h);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=u,l=!0)),l}sendToConsumer(u,l){var f;if(u.error&&!fi(u)){const m=(null===(f=u.error.code)||void 0===f?void 0:f.split("auth/")[1])||"internal-error";l.onError(yt(this.auth,m))}else l.onAuthEvent(u)}isEventForConsumer(u,l){const f=null===l.eventId||!!u.eventId&&u.eventId===l.eventId;return l.filter.includes(u.type)&&f}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Os(u))}saveEventToCache(u){this.cachedEventUids.add(Os(u)),this.lastProcessedEventTime=Date.now()}}function Os(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(u=>u).join("-")}function fi({type:h,error:u}){return"unknown"===h&&"auth/no-auth-event"===u?.code}function Md(h){return kd.apply(this,arguments)}function kd(){return(kd=(0,I.Z)(function*(h,u={}){return U(h,"GET","/v1/projects",u)})).apply(this,arguments)}const Hy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Od=/^https?/;function oc(){return(oc=(0,I.Z)(function*(h){if(h.config.emulator)return;const{authorizedDomains:u}=yield Md(h);for(const l of u)try{if(Fd(l))return}catch{}at(h,"unauthorized-domain")})).apply(this,arguments)}function Fd(h){const u=Nn(),{protocol:l,hostname:f}=new URL(u);if(h.startsWith("chrome-extension://")){const T=new URL(h);return""===T.hostname&&""===f?"chrome-extension:"===l&&h.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===l&&T.hostname===f}if(!Od.test(l))return!1;if(Hy.test(h))return f===h;const m=h.replace(/\./g,"\\.");return new RegExp("^(.+\\."+m+"|"+m+")$","i").test(f)}const $y=new Xr(3e4,6e4);function Vd(){const h=Qt().___jsl;if(h?.H)for(const u of Object.keys(h.H))if(h.H[u].r=h.H[u].r||[],h.H[u].L=h.H[u].L||[],h.H[u].r=[...h.H[u].L],h.CP)for(let l=0;l<h.CP.length;l++)h.CP[l]=null}let Fa=null;const Yp=new Xr(5e3,15e3),Jp="__/auth/iframe",Ud="emulator/auth/iframe",qy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qn(h){const u=h.config;G(u.authDomain,h,"auth-domain-config-required");const l=u.emulator?O(u,Ud):`https://${h.config.authDomain}/${Jp}`,f={apiKey:u.apiKey,appName:h.name,v:Ce.SDK_VERSION},m=zy.get(h.config.apiHost);m&&(f.eid=m);const y=h._getFrameworks();return y.length&&(f.fw=y.join(",")),`${l}?${(0,B.xO)(f).slice(1)}`}function wt(){return wt=(0,I.Z)(function*(h){const u=yield function Qp(h){return Fa=Fa||function Bd(h){return new Promise((u,l)=>{var f,m,y;function T(){Vd(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Vd(),l(yt(h,"network-request-failed"))},timeout:$y.get()})}if(null!==(m=null===(f=Qt().gapi)||void 0===f?void 0:f.iframes)&&void 0!==m&&m.Iframe)u(gapi.iframes.getContext());else{if(null===(y=Qt().gapi)||void 0===y||!y.load){const P=gy("iframefcb");return Qt()[P]=()=>{gapi.load?T():l(yt(h,"network-request-failed"))},np(`https://apis.google.com/js/api.js?onload=${P}`).catch($=>l($))}T()}}).catch(u=>{throw Fa=null,u})}(h),Fa}(h),l=Qt().gapi;return G(l,h,"internal-error"),u.open({where:document.body,url:qn(h),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qy,dontclear:!0},f=>new Promise(function(){var m=(0,I.Z)(function*(y,T){yield f.restyle({setHideOnLeave:!1});const P=yt(h,"network-request-failed"),$=Qt().setTimeout(()=>{T(P)},Yp.get());function se(){Qt().clearTimeout($),y(f)}f.ping(se).then(se,()=>{T(P)})});return function(y,T){return m.apply(this,arguments)}}()))}),wt.apply(this,arguments)}const Gy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class jd{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Qy="__/auth/handler",uc="emulator/auth/handler",cc=encodeURIComponent("fac");function Do(h,u,l,f,m,y){return Va.apply(this,arguments)}function Va(){return(Va=(0,I.Z)(function*(h,u,l,f,m,y){G(h.config.authDomain,h,"auth-domain-config-required"),G(h.config.apiKey,h,"invalid-api-key");const T={apiKey:h.config.apiKey,appName:h.name,authType:l,redirectUrl:f,v:Ce.SDK_VERSION,eventId:m};if(u instanceof bi){u.setDefaultLanguage(h.languageCode),T.providerId=u.providerId||"",(0,B.xb)(u.getCustomParameters())||(T.customParameters=JSON.stringify(u.getCustomParameters()));for(const[de,me]of Object.entries(y||{}))T[de]=me}if(u instanceof nr){const de=u.getScopes().filter(me=>""!==me);de.length>0&&(T.scopes=de.join(","))}h.tenantId&&(T.tid=h.tenantId);const P=T;for(const de of Object.keys(P))void 0===P[de]&&delete P[de];const $=yield h._getAppCheckToken(),se=$?`#${cc}=${encodeURIComponent($)}`:"";return`${function eg({config:h}){return h.emulator?O(h,uc):`https://${h.authDomain}/${Qy}`}(h)}?${(0,B.xO)(P).slice(1)}${se}`})).apply(this,arguments)}const lc="webStorageSupport",Fs=class Yy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ms,this._completeRedirectFn=sc,this._overrideRedirectResult=Rd}_openPopup(u,l,f,m){var y=this;return(0,I.Z)(function*(){var T;Ct(null===(T=y.eventManagers[u._key()])||void 0===T?void 0:T.manager,"_initialize() not called before _openPopup()");const P=yield Do(u,l,f,Nn(),m);return function ac(h,u,l,f=500,m=600){const y=Math.max((window.screen.availHeight-m)/2,0).toString(),T=Math.max((window.screen.availWidth-f)/2,0).toString();let P="";const $=Object.assign(Object.assign({},Gy),{width:f.toString(),height:m.toString(),top:y,left:T}),se=(0,B.z$)().toLowerCase();l&&(P=xu(se)?"_blank":l),gt(se)&&(u=u||"http://localhost",$.scrollbars="yes");const de=Object.entries($).reduce((Wt,[zr,Ec])=>`${Wt}${zr}=${Ec},`,"");if(function ee(h=(0,B.z$)()){var u;return Pe(h)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(se)&&"_self"!==P)return function es(h,u){const l=document.createElement("a");l.href=h,l.target=u;const f=document.createEvent("MouseEvent");f.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(f)}(u||"",P),new jd(null);const me=window.open(u||"",P,de);G(me,h,"popup-blocked");try{me.focus()}catch{}return new jd(me)}(u,P,Ki())})()}_openRedirect(u,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y._originValidation(u),function bp(h){Qt().location.href=h}(yield Do(u,l,f,Nn(),m)),new Promise(()=>{})})()}_initialize(u){const l=u._key();if(this.eventManagers[l]){const{manager:m,promise:y}=this.eventManagers[l];return m?Promise.resolve(m):(Ct(y,"If manager is not set, promise should be"),y)}const f=this.initAndGetManager(u);return this.eventManagers[l]={promise:f},f.catch(()=>{delete this.eventManagers[l]}),f}initAndGetManager(u){var l=this;return(0,I.Z)(function*(){const f=yield function Ls(h){return wt.apply(this,arguments)}(u),m=new xd(u);return f.register("authEvent",y=>(G(y?.authEvent,u,"invalid-auth-event"),{status:m.onEvent(y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[u._key()]={manager:m},l.iframes[u._key()]=f,m})()}_isIframeWebStorageSupported(u,l){this.iframes[u._key()].send(lc,{type:lc},m=>{var y;const T=null===(y=m?.[0])||void 0===y?void 0:y[lc];void 0!==T&&l(!!T),at(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const l=u._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Ld(h){return oc.apply(this,arguments)}(u)),this.originValidationPromises[l]}get _shouldInitProactively(){return ge()||ei()||Pe()}};class Ba{constructor(u){this.factorId=u}_process(u,l,f){switch(l.type){case"enroll":return this._finalizeEnroll(u,l.credential,f);case"signin":return this._finalizeSignIn(u,l.credential);default:return kt("unexpected MultiFactorSessionType")}}}class Hd extends Ba{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new Hd(u)}_finalizeEnroll(u,l,f){return function A0(h,u){return U(h,"POST","/v2/accounts/mfaEnrollment:finalize",Z(h,u))}(u,{idToken:l,displayName:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,l){return function k0(h,u){return U(h,"POST","/v2/accounts/mfaSignIn:finalize",Z(h,u))}(u,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let F0=(()=>{class h{constructor(){}static assertion(l){return Hd._fromCredential(l)}}return h.FACTOR_ID="phone",h})();var Jy="@firebase/auth";class $d{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var l=this;return(0,I.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const l=this.auth.onIdTokenChanged(f=>{u(f?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,l),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const l=this.internalListeners.get(u);l&&(this.internalListeners.delete(u),l(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ts(){return window}(0,B.Pz)("authIdTokenMaxAge"),function ev(h){(0,Ce._registerComponent)(new qt.wA("auth",(u,{options:l})=>{const f=u.getProvider("app").getImmediate(),m=u.getProvider("heartbeat"),y=u.getProvider("app-check-internal"),{apiKey:T,authDomain:P}=f.options;G(T&&!T.includes(":"),"invalid-api-key",{appName:f.name});const $={apiKey:T,authDomain:P,clientPlatform:h,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lo(h)},se=new py(f,m,y,$);return function f0(h,u){const l=u?.persistence||[],f=(Array.isArray(l)?l:[l]).map(Ve);u?.errorMap&&h._updateErrorMap(u.errorMap),h._initializeWithPersistence(f,u?.popupRedirectResolver)}(se,l),se},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,l,f)=>{u.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new qt.wA("auth-internal",u=>{const l=bt(u.getProvider("auth").getImmediate());return new $d(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(Jy,"1.5.0",function Ua(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(h)),(0,Ce.registerVersion)(Jy,"1.5.0","esm2017")}("Browser");function zd(){return zd=(0,I.Z)(function*(h,u,l){var f;const{BuildInfo:m}=ts();Ct(u.sessionId,"AuthEvent did not contain a session ID");const y=yield function sg(h){return pc.apply(this,arguments)}(u.sessionId),T={};return Pe()?T.ibi=m.packageName:b()?T.apn=m.packageName:at(h,"operation-not-supported-in-this-environment"),m.displayName&&(T.appDisplayName=m.displayName),T.sessionId=y,Do(h,l,u.type,void 0,null!==(f=u.eventId)&&void 0!==f?f:void 0,T)}),zd.apply(this,arguments)}function $a(){return($a=(0,I.Z)(function*(h){const{BuildInfo:u}=ts(),l={};Pe()?l.iosBundleId=u.packageName:b()?l.androidPackageName=u.packageName:at(h,"operation-not-supported-in-this-environment"),yield Md(h,l)})).apply(this,arguments)}function qa(){return(qa=(0,I.Z)(function*(h,u,l){const{cordova:f}=ts();let m=()=>{};try{yield new Promise((y,T)=>{let P=null;function $(){var me;y();const Wt=null===(me=f.plugins.browsertab)||void 0===me?void 0:me.close;"function"==typeof Wt&&Wt(),"function"==typeof l?.close&&l.close()}function se(){P||(P=window.setTimeout(()=>{T(yt(h,"redirect-cancelled-by-user"))},2e3))}function de(){"visible"===document?.visibilityState&&se()}u.addPassiveListener($),document.addEventListener("resume",se,!1),b()&&document.addEventListener("visibilitychange",de,!1),m=()=>{u.removePassiveListener($),document.removeEventListener("resume",se,!1),document.removeEventListener("visibilitychange",de,!1),P&&window.clearTimeout(P)}})}finally{m()}})).apply(this,arguments)}function pc(){return(pc=(0,I.Z)(function*(h){const u=function og(h){if(Ct(/[0-9a-zA-Z]+/.test(h),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(h);const u=new ArrayBuffer(h.length),l=new Uint8Array(u);for(let f=0;f<h.length;f++)l[f]=h.charCodeAt(f);return l}(h),l=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class iv extends xd{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInialized(),this.passiveListeners.forEach(l=>l(u)),super.onEvent(u)}initialized(){var u=this;return(0,I.Z)(function*(){yield u.initPromise})()}}function ug(h){return mc.apply(this,arguments)}function mc(){return(mc=(0,I.Z)(function*(h){const u=yield Gd()._get(Cn(h));return u&&(yield Gd()._remove(Cn(h))),u})).apply(this,arguments)}function za(){const h=[];for(let l=0;l<20;l++){const f=Math.floor(62*Math.random());h.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(f))}return h.join("")}function Gd(){return Ve(di)}function Cn(h){return ln("authEvent",h.config.apiKey,h.name)}function Ao(h){if(!h?.includes("?"))return{};const[u,...l]=h.split("?");return(0,B.zd)(l.join("?"))}const Wd=class lg{constructor(){this._redirectPersistence=Ms,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=sc,this._overrideRedirectResult=Rd}_initialize(u){var l=this;return(0,I.Z)(function*(){const f=u._key();let m=l.eventManagers.get(f);return m||(m=new iv(u),l.eventManagers.set(f,m),l.attachCallbackListeners(u,m)),m})()}_openPopup(u){at(u,"operation-not-supported-in-this-environment")}_openRedirect(u,l,f,m){var y=this;return(0,I.Z)(function*(){!function rv(h){var u,l,f,m,y,T,P,$,se,de;const me=ts();G("function"==typeof(null===(u=me?.universalLinks)||void 0===u?void 0:u.subscribe),h,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(l=me?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(y=null===(m=null===(f=me?.cordova)||void 0===f?void 0:f.plugins)||void 0===m?void 0:m.browsertab)||void 0===y?void 0:y.openUrl),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===($=null===(P=null===(T=me?.cordova)||void 0===T?void 0:T.plugins)||void 0===P?void 0:P.browsertab)||void 0===$?void 0:$.isAvailable),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(de=null===(se=me?.cordova)||void 0===se?void 0:se.InAppBrowser)||void 0===de?void 0:de.open),h,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const T=yield y._initialize(u);yield T.initialized(),T.resetRedirect(),function By(){rc.clear()}(),yield y._originValidation(u);const P=function gc(h,u,l=null){return{type:u,eventId:l,urlResponse:null,sessionId:za(),postBody:null,tenantId:h.tenantId,error:yt(h,"no-auth-event")}}(u,f,m);yield function Vs(h,u){return Gd()._set(Cn(h),u)}(u,P);const $=yield function pi(h,u,l){return zd.apply(this,arguments)}(u,P,l),se=yield function ig(h){const{cordova:u}=ts();return new Promise(l=>{u.plugins.browsertab.isAvailable(f=>{let m=null;f?u.plugins.browsertab.openUrl(h):m=u.InAppBrowser.open(h,function We(h=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(h)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(h)}()?"_blank":"_system","location=yes"),l(m)})})}($);return function fc(h,u,l){return qa.apply(this,arguments)}(u,T,se)})()}_isIframeWebStorageSupported(u,l){throw new Error("Method not implemented.")}_originValidation(u){const l=u._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function hc(h){return $a.apply(this,arguments)}(u)),this.originValidationPromises[l]}attachCallbackListeners(u,l){const{universalLinks:f,handleOpenURL:m,BuildInfo:y}=ts(),T=setTimeout((0,I.Z)(function*(){yield ug(u),l.onEvent(Bs())}),500),P=function(){var de=(0,I.Z)(function*(me){clearTimeout(T);const Wt=yield ug(u);let zr=null;Wt&&me?.url&&(zr=function cg(h,u){var l,f;const m=function ov(h){const u=Ao(h),l=u.link?decodeURIComponent(u.link):void 0,f=Ao(l).link,m=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return Ao(m).link||m||f||l||h}(u);if(m.includes("/__/auth/callback")){const y=Ao(m),T=y.firebaseError?function sv(h){try{return JSON.parse(h)}catch{return null}}(decodeURIComponent(y.firebaseError)):null,P=null===(f=null===(l=T?.code)||void 0===l?void 0:l.split("auth/"))||void 0===f?void 0:f[1],$=P?yt(P):null;return $?{type:h.type,eventId:h.eventId,tenantId:h.tenantId,error:$,urlResponse:null,sessionId:null,postBody:null}:{type:h.type,eventId:h.eventId,tenantId:h.tenantId,sessionId:h.sessionId,urlResponse:m,postBody:null}}return null}(Wt,me.url)),l.onEvent(zr||Bs())});return function(Wt){return de.apply(this,arguments)}}();typeof f<"u"&&"function"==typeof f.subscribe&&f.subscribe(null,P);const $=m,se=`${y.packageName.toLowerCase()}://`;ts().handleOpenURL=function(){var de=(0,I.Z)(function*(me){if(me.toLowerCase().startsWith(se)&&P({url:me}),"function"==typeof $)try{$(me)}catch(Wt){console.error(Wt)}});return function(me){return de.apply(this,arguments)}}()}};function Bs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yt("no-auth-event")}}function gi(){var h;return(null===(h=self?.location)||void 0===h?void 0:h.protocol)||null}function hg(h=(0,B.z$)()){return!("file:"!==gi()&&"ionic:"!==gi()&&"capacitor:"!==gi()||!h.toLowerCase().match(/iphone|ipad|ipod|android/))}function uv(){try{const h=self.localStorage,u=Ki();if(h)return h.setItem(u,"1"),h.removeItem(u),!function $0(h=(0,B.z$)()){return function j0(){return(0,B.w1)()&&11===document?.documentMode}()||function H0(h=(0,B.z$)()){return/Edge\/\d+/.test(h)}(h)}()||(0,B.hl)()}catch{return fg()&&(0,B.hl)()}return!1}function fg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ns(){return(function B0(){return"http:"===gi()||"https:"===gi()}()||(0,B.ru)()||hg())&&!function U0(){return(0,B.b$)()||(0,B.UG)()}()&&uv()&&!fg()}function pg(){return hg()&&typeof document<"u"}function Yt(){return(Yt=(0,I.Z)(function*(){return!!pg()&&new Promise(h=>{const u=setTimeout(()=>{h(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),h(!0)})})})).apply(this,arguments)}const bn={LOCAL:"local",NONE:"none",SESSION:"session"},Ga=G,Ir="persistence";function _c(h){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,I.Z)(function*(h){yield h._initializationPromise;const u=gg(),l=ln(Ir,h.config.apiKey,h.name);u&&u.setItem(l,h._getPersistence())})).apply(this,arguments)}function gg(){var h;try{return(null===(h=function lv(){return typeof window<"u"?window:null}())||void 0===h?void 0:h.sessionStorage)||null}catch{return null}}const q0=G;class rs{constructor(){this.browserResolver=Ve(Fs),this.cordovaResolver=Ve(Wd),this.underlyingResolver=null,this._redirectPersistence=Ms,this._completeRedirectFn=sc,this._overrideRedirectResult=Rd}_initialize(u){var l=this;return(0,I.Z)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._openPopup(u,l,f,m)})()}_openRedirect(u,l,f,m){var y=this;return(0,I.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._openRedirect(u,l,f,m)})()}_isIframeWebStorageSupported(u,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,l)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return pg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return q0(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,I.Z)(function*(){if(u.underlyingResolver)return;const l=yield function cv(){return Yt.apply(this,arguments)}();u.underlyingResolver=l?u.cordovaResolver:u.browserResolver})()}}function dv(h){return h.unwrap()}function Kd(h){return hv(h)}function hv(h){const{_tokenResponse:u}=h instanceof B.ZR?h.customData:h;if(!u)return null;if(!(h instanceof B.ZR)&&"temporaryProof"in u&&"phoneNumber"in u)return hn.credentialFromResult(h);const l=u.providerId;if(!l||l===Ge.PASSWORD)return null;let f;switch(l){case Ge.GOOGLE:f=$r;break;case Ge.FACEBOOK:f=Nr;break;case Ge.GITHUB:f=nt;break;case Ge.TWITTER:f=ii;break;default:const{oauthIdToken:m,oauthAccessToken:y,oauthTokenSecret:T,pendingToken:P,nonce:$}=u;return y||T||m||P?P?l.startsWith("saml.")?zi._create(l,P):ni._fromParams({providerId:l,signInMethod:l,pendingToken:P,idToken:m,accessToken:y}):new Si(l).credential({idToken:m,accessToken:y,rawNonce:$}):null}return h instanceof B.ZR?f.credentialFromError(h):f.credentialFromResult(h)}function zn(h,u){return u.catch(l=>{throw l instanceof B.ZR&&function Po(h,u){var l;const f=null===(l=u.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new fv(h,function T0(h,u){var l;const f=(0,B.m9)(h),m=u;return G(u.customData.operationType,f,"argument-error"),G(null===(l=m.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,f,"argument-error"),Tp._fromError(f,m)}(h,u));else if(f){const m=hv(u),y=u;m&&(y.credential=m,y.tenantId=f.tenantId||void 0,y.email=f.email||void 0,y.phoneNumber=f.phoneNumber||void 0)}}(h,l),l}).then(l=>{const m=l.user;return{operationType:l.operationType,credential:Kd(l),additionalUserInfo:Tn(l),user:Ni.getOrCreate(m)}})}function Qd(h,u){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,I.Z)(function*(h,u){const l=yield u;return{verificationId:l.verificationId,confirm:f=>zn(h,l.confirm(f))}})).apply(this,arguments)}class fv{constructor(u,l){this.resolver=l,this.auth=function Er(h){return h.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return zn(dv(this.auth),this.resolver.resolveSignIn(u))}}class Ni{constructor(u){this._delegate=u,this.multiFactor=function S0(h){const u=(0,B.m9)(h);return Ap.has(u)||Ap.set(u,Dp._fromUser(u)),Ap.get(u)}(u)}static getOrCreate(u){return Ni.USER_MAP.has(u)||Ni.USER_MAP.set(u,new Ni(u)),Ni.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var l=this;return(0,I.Z)(function*(){return zn(l.auth,_p(l._delegate,u))})()}linkWithPhoneNumber(u,l){var f=this;return(0,I.Z)(function*(){return Qd(f.auth,function wd(h,u,l){return Td.apply(this,arguments)}(f._delegate,u,l))})()}linkWithPopup(u){var l=this;return(0,I.Z)(function*(){return zn(l.auth,function Hp(h,u,l){return bd.apply(this,arguments)}(l._delegate,u,rs))})()}linkWithRedirect(u){var l=this;return(0,I.Z)(function*(){return yield _c(bt(l.auth)),Zp(l._delegate,u,rs)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var l=this;return(0,I.Z)(function*(){return zn(l.auth,yp(l._delegate,u))})()}reauthenticateWithPhoneNumber(u,l){return Qd(this.auth,function hi(h,u,l){return ec.apply(this,arguments)}(this._delegate,u,l))}reauthenticateWithPopup(u){return zn(this.auth,function jp(h,u,l){return nc.apply(this,arguments)}(this._delegate,u,rs))}reauthenticateWithRedirect(u){var l=this;return(0,I.Z)(function*(){return yield _c(bt(l.auth)),Gp(l._delegate,u,rs)})()}sendEmailVerification(u){return function mo(h,u){return Vt.apply(this,arguments)}(this._delegate,u)}unlink(u){var l=this;return(0,I.Z)(function*(){return yield function Ty(h,u){return ju.apply(this,arguments)}(l._delegate,u),l})()}updateEmail(u){return function Ri(h,u){return _o((0,B.m9)(h),u,null)}(this._delegate,u)}updatePassword(u){return function ba(h,u){return _o((0,B.m9)(h),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function Dd(h,u){return wo.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function Ep(h,u){return ui.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,l){return function Ca(h,u,l){return Wi.apply(this,arguments)}(this._delegate,u,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ni.USER_MAP=new WeakMap;const Za=G;let mg=(()=>{class h{constructor(l,f){if(this.app=l,f.isInitialized())return this._delegate=f.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:m}=l.options;Za(m,"invalid-api-key",{appName:l.name}),Za(m,"invalid-api-key",{appName:l.name});const y=typeof window<"u"?rs:void 0;this._delegate=f.initialize({options:{persistence:vc(m,l.name),popupRedirectResolver:y}}),this._delegate._updateErrorMap(yn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ni.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,f){!function ti(h,u,l){const f=bt(h);G(f._canInitEmulator,f,"emulator-config-failed"),G(/^https?:\/\//.test(u),f,"invalid-emulator-scheme");const m=!!l?.disableWarnings,y=pa(u),{host:T,port:P}=function p0(h){const u=pa(h),l=/(\/\/)?([^?#/]+)/.exec(h.substr(u.length));if(!l)return{host:"",port:null};const f=l[2].split("@").pop()||"",m=/^(\[[^\]]+\])(:|$)/.exec(f);if(m){const y=m[1];return{host:y,port:Kl(f.substr(y.length+1))}}{const[y,T]=f.split(":");return{host:y,port:Kl(T)}}}(u);f.config.emulator={url:`${y}//${T}${null===P?"":`:${P}`}/`},f.settings.appVerificationDisabledForTesting=!0,f.emulatorConfig=Object.freeze({host:T,port:P,protocol:y.replace(":",""),options:Object.freeze({disableWarnings:m})}),m||function yy(){function h(){const u=document.createElement("p"),l=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",h):h())}()}(this._delegate,l,f)}applyActionCode(l){return function vp(h,u){return fo.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Ip(this._delegate,l)}confirmPasswordReset(l,f){return function _r(h,u,l){return zu.apply(this,arguments)}(this._delegate,l,f)}createUserWithEmailAndPassword(l,f){var m=this;return(0,I.Z)(function*(){return zn(m._delegate,function Me(h,u,l){return vt.apply(this,arguments)}(m._delegate,l,f))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function Aa(h,u){return Gu.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function po(h,u){const l=Ci.parseLink(u);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,I.Z)(function*(){Za(ns(),l._delegate,"operation-not-supported-in-this-environment");const f=yield function Pd(h,u){return La.apply(this,arguments)}(l._delegate,rs);return f?zn(l._delegate,Promise.resolve(f)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function Co(h,u){bt(h)._logFramework(u)}(this._delegate,l)}onAuthStateChanged(l,f,m){const{next:y,error:T,complete:P}=yc(l,f,m);return this._delegate.onAuthStateChanged(y,T,P)}onIdTokenChanged(l,f,m){const{next:y,error:T,complete:P}=yc(l,f,m);return this._delegate.onIdTokenChanged(y,T,P)}sendSignInLinkToEmail(l,f){return function Da(h,u,l){return dn.apply(this,arguments)}(this._delegate,l,f)}sendPasswordResetEmail(l,f){return function $n(h,u,l){return Rs.apply(this,arguments)}(this._delegate,l,f||void 0)}setPersistence(l){var f=this;return(0,I.Z)(function*(){let m;switch(function So(h,u){Ga(Object.values(bn).includes(u),h,"invalid-persistence-type"),(0,B.b$)()?Ga(u!==bn.SESSION,h,"unsupported-persistence-type"):(0,B.UG)()?Ga(u===bn.NONE,h,"unsupported-persistence-type"):fg()?Ga(u===bn.NONE||u===bn.LOCAL&&(0,B.hl)(),h,"unsupported-persistence-type"):Ga(u===bn.NONE||uv(),h,"unsupported-persistence-type")}(f._delegate,l),l){case bn.SESSION:m=Ms;break;case bn.LOCAL:m=(yield Ve(Eo)._isAvailable())?Eo:di;break;case bn.NONE:m=Ft;break;default:return at("argument-error",{appName:f._delegate.name})}return f._delegate.setPersistence(m)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return zn(this._delegate,function gp(h){return Uu.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return zn(this._delegate,Hu(this._delegate,l))}signInWithCustomToken(l){return zn(this._delegate,function Ay(h,u){return si.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,f){return zn(this._delegate,function qr(h,u,l){return Hu((0,B.m9)(h),ed.credential(u,l)).catch(function(){var f=(0,I.Z)(function*(m){throw"auth/password-does-not-meet-requirements"===m.code&&Ze(h),m});return function(m){return f.apply(this,arguments)}}())}(this._delegate,l,f))}signInWithEmailLink(l,f){return zn(this._delegate,function Kt(h,u,l){return oi.apply(this,arguments)}(this._delegate,l,f))}signInWithPhoneNumber(l,f){return Qd(this._delegate,function Vp(h,u,l){return Ed.apply(this,arguments)}(this._delegate,l,f))}signInWithPopup(l){var f=this;return(0,I.Z)(function*(){return Za(ns(),f._delegate,"operation-not-supported-in-this-environment"),zn(f._delegate,function Up(h,u,l){return Cd.apply(this,arguments)}(f._delegate,l,rs))})()}signInWithRedirect(l){var f=this;return(0,I.Z)(function*(){return Za(ns(),f._delegate,"operation-not-supported-in-this-environment"),yield _c(f._delegate),Uy(f._delegate,l,rs)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function Gt(h,u){return ae.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return h.Persistence=bn,h})();function yc(h,u,l){let f=h;"function"!=typeof h&&({next:f,error:u,complete:l}=h);const m=f;return{next:T=>m(T&&Ni.getOrCreate(T)),error:u,complete:l}}function vc(h,u){const l=function Wa(h,u){const l=gg();if(!l)return[];const f=ln(Ir,h,u);switch(l.getItem(f)){case bn.NONE:return[Ft];case bn.LOCAL:return[Eo,Ms];case bn.SESSION:return[Ms];default:return[]}}(h,u);if(typeof self<"u"&&!l.includes(Eo)&&l.push(Eo),typeof window<"u")for(const f of[di,Ms])l.includes(f)||l.push(f);return l.includes(Ft)||l.push(Ft),l}class Jd{constructor(){this.providerId="phone",this._delegate=new hn(dv(De.Z.auth()))}static credential(u,l){return hn.credential(u,l)}verifyPhoneNumber(u,l){return this._delegate.verifyPhoneNumber(u,l)}unwrap(){return this._delegate}}Jd.PHONE_SIGN_IN_METHOD=hn.PHONE_SIGN_IN_METHOD,Jd.PROVIDER_ID=hn.PROVIDER_ID;const Ic=G;class pv{constructor(u,l,f=De.Z.app()){var m;Ic(null===(m=f.options)||void 0===m?void 0:m.apiKey,"invalid-api-key",{appName:f.name}),this._delegate=new ky(f.auth(),u,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function gv(h){h.INTERNAL.registerComponent(new qt.wA("auth-compat",u=>{const l=u.getProvider("app-compat").getImmediate(),f=u.getProvider("auth");return new mg(l,f)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ed,FacebookAuthProvider:Nr,GithubAuthProvider:nt,GoogleAuthProvider:$r,OAuthProvider:Si,SAMLAuthProvider:wa,PhoneAuthProvider:Jd,PhoneMultiFactorGenerator:F0,RecaptchaVerifier:pv,TwitterAuthProvider:ii,Auth:mg,AuthCredential:Ai,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),h.registerVersion("@firebase/auth-compat","0.5.0")}(De.Z)},861:(Ei,mn,xe)=>{function I(B,Ce,ct,Mt,qt,_n,Ge){try{var W=B[_n](Ge),te=W.value}catch(ye){return void ct(ye)}W.done?Ce(te):Promise.resolve(te).then(Mt,qt)}function De(B){return function(){var Ce=this,ct=arguments;return new Promise(function(Mt,qt){var _n=B.apply(Ce,ct);function Ge(te){I(_n,Mt,qt,Ge,W,"next",te)}function W(te){I(_n,Mt,qt,Ge,W,"throw",te)}Ge(void 0)})}}xe.d(mn,{Z:()=>De})},582:(Ei,mn,xe)=>{function Ce(O,F){var j={};for(var H in O)Object.prototype.hasOwnProperty.call(O,H)&&F.indexOf(H)<0&&(j[H]=O[H]);if(null!=O&&"function"==typeof Object.getOwnPropertySymbols){var Z=0;for(H=Object.getOwnPropertySymbols(O);Z<H.length;Z++)F.indexOf(H[Z])<0&&Object.prototype.propertyIsEnumerable.call(O,H[Z])&&(j[H[Z]]=O[H[Z]])}return j}function ye(O,F,j,H){return new(j||(j=Promise))(function(U,_e){function Qe(tt){try{ve(H.next(tt))}catch(Ot){_e(Ot)}}function $e(tt){try{ve(H.throw(tt))}catch(Ot){_e(Ot)}}function ve(tt){tt.done?U(tt.value):function Z(U){return U instanceof j?U:new j(function(_e){_e(U)})}(tt.value).then(Qe,$e)}ve((H=H.apply(O,F||[])).next())})}function At(O){return this instanceof At?(this.v=O,this):new At(O)}function at(O,F,j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,H=j.apply(O,F||[]),U=[];return Z={},_e("next"),_e("throw"),_e("return"),Z[Symbol.asyncIterator]=function(){return this},Z;function _e(Et){H[Et]&&(Z[Et]=function(xn){return new Promise(function(cn,Bn){U.push([Et,xn,cn,Bn])>1||Qe(Et,xn)})})}function Qe(Et,xn){try{!function $e(Et){Et.value instanceof At?Promise.resolve(Et.value.v).then(ve,tt):Ot(U[0][2],Et)}(H[Et](xn))}catch(cn){Ot(U[0][3],cn)}}function ve(Et){Qe("next",Et)}function tt(Et){Qe("throw",Et)}function Ot(Et,xn){Et(xn),U.shift(),U.length&&Qe(U[0][0],U[0][1])}}function Yn(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,F=O[Symbol.asyncIterator];return F?F.call(O):(O=function ot(O){var F="function"==typeof Symbol&&Symbol.iterator,j=F&&O[F],H=0;if(j)return j.call(O);if(O&&"number"==typeof O.length)return{next:function(){return O&&H>=O.length&&(O=void 0),{value:O&&O[H++],done:!O}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}(O),j={},H("next"),H("throw"),H("return"),j[Symbol.asyncIterator]=function(){return this},j);function H(U){j[U]=O[U]&&function(_e){return new Promise(function(Qe,$e){!function Z(U,_e,Qe,$e){Promise.resolve($e).then(function(ve){U({value:ve,done:Qe})},_e)}(Qe,$e,(_e=O[U](_e)).done,_e.value)})}}}xe.d(mn,{FC:()=>at,KL:()=>Yn,_T:()=>Ce,mG:()=>ye,qq:()=>At}),"function"==typeof SuppressedError&&SuppressedError}},Ei=>{Ei(Ei.s=62)}]);